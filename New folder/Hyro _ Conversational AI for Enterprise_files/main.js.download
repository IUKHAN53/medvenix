/*!For license information please see main.js.LICENSE.txt*/(()=>{var e,t,n,r,o,i,a={785:(e,t,n)=>{"use strict";var r,o=n(5117);!function(){var i,a="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";if("object"==typeof o&&"object"==typeof o.versions&&o.versions.node&&!o.browser){var s=o.versions.node.toString().replace("v","");a="Nodejs/"+s+" (NodeOS) AppleWebKit/"+s+" (KHTML, like Gecko) Nodejs/"+s+" Nodejs/"+s}i=void 0!==n.g?n.g:window,"undefined"==typeof window&&("undefined"==typeof window&&void 0!==n.g&&(n.g.navigator={userAgent:a,getUserMedia:function(){}},i.window=n.g),"undefined"==typeof location&&(i.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(i.screen={width:0,height:0}));var c=window.navigator;void 0!==c?(void 0!==c.webkitGetUserMedia&&(c.getUserMedia=c.webkitGetUserMedia),void 0!==c.mozGetUserMedia&&(c.getUserMedia=c.mozGetUserMedia)):c={getUserMedia:function(){},userAgent:a};var u=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(c.userAgent||""),l=!(-1===c.userAgent.indexOf("Edge")||!c.msSaveOrOpenBlob&&!c.msSaveBlob),d=!!window.opera||c.userAgent.indexOf(" OPR/")>=0,f=c.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(c.userAgent),p=/^((?!chrome|android).)*safari/i.test(c.userAgent),v=!!window.chrome&&!d,h="undefined"!=typeof document&&!!document.documentMode&&!l;function m(e,t){var n=0,r=!1,o=window.setInterval((function(){e()&&(window.clearInterval(o),t(r)),n++>50&&(window.clearInterval(o),t(r=!0))}),10)}var g,y,b={Android:function(){return c.userAgent.match(/Android/i)},BlackBerry:function(){return c.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return c.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return c.userAgent.match(/Opera Mini/i)},Windows:function(){return c.userAgent.match(/IEMobile/i)},any:function(){return b.Android()||b.BlackBerry()||b.iOS()||b.Opera()||b.Windows()},getOsName:function(){var e="Unknown OS";return b.Android()&&(e="Android"),b.BlackBerry()&&(e="BlackBerry"),b.iOS()&&(e="iOS"),b.Opera()&&(e="Opera Mini"),b.Windows()&&(e="Windows"),e}},w="Unknown OS",_="Unknown OS Version",S=function(){for(var e,t=c.appVersion,n=c.userAgent,r="-",o=[{s:"Chrome OS",r:/CrOS/},{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],i=0;e=o[i];i++)if(e.r.test(n)){r=e.s;break}var a="-";switch(/Windows/.test(r)&&(/Windows (.*)/.test(r)&&(a=/Windows (.*)/.exec(r)[1]),r="Windows"),r){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(n)&&(a=/Mac OS X (10[\.\_\d]+)/.exec(n)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(n)&&(a=/Android ([\.\_\d]+)/.exec(n)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(n)&&(a=/OS (\d+)_(\d+)_?(\d+)?/.exec(t))&&a.length>3&&(a=a[1]+"."+a[2]+"."+(0|a[3]))}return{osName:r,osVersion:a}}();S&&S.osName&&"-"!=S.osName?(w=S.osName,_=S.osVersion):b.any()&&"Android"==(w=b.getOsName())&&(_=!!(y=(g=(g||c.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/))&&y[1]);var E="object"==typeof o&&"object"==typeof o.versions&&o.versions.node;"Unknown OS"===w&&E&&(w="Nodejs",_=o.versions.node.toString().replace("v",""));var C=!1,k=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){"undefined"!=typeof document&&"function"==typeof document.createElement&&(!C&&e in document.createElement("canvas")&&(C=!0),!k&&e in document.createElement("video")&&(k=!0))}));var I=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,T=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,O=/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/,x=[],A=[],D=[],R=[];c.mediaDevices&&c.mediaDevices.enumerateDevices&&(c.enumerateDevices=function(e){var t=c.mediaDevices.enumerateDevices();t&&t.then?c.mediaDevices.enumerateDevices().then(e).catch((function(){e([])})):e([])});var L=!1;("undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack||c.mediaDevices&&c.mediaDevices.enumerateDevices)&&(L=!0);var P=!1,M=!1,N=!1,j=!1,W=!1;var U=window.DetectRTC||{};U.browser=function(){c.appVersion;var e,t,n,r=c.userAgent,o=c.appName,i=""+parseFloat(c.appVersion),a=parseInt(c.appVersion,10);if(d){o="Opera";try{a=(i=c.userAgent.split("OPR/")[1].split(" ")[0]).split(".")[0]}catch(e){i="0.0.0.0",a=0}}else h?((t=r.indexOf("rv:"))>0?i=r.substring(t+3):(t=r.indexOf("MSIE"),i=r.substring(t+5)),o="IE"):v?(t=r.indexOf("Chrome"),o="Chrome",i=r.substring(t+7)):p?-1!==r.indexOf("CriOS")?(t=r.indexOf("CriOS"),o="Chrome",i=r.substring(t+6)):-1!==r.indexOf("FxiOS")?(t=r.indexOf("FxiOS"),o="Firefox",i=r.substring(t+6)):(t=r.indexOf("Safari"),o="Safari",i=r.substring(t+7),-1!==(t=r.indexOf("Version"))&&(i=r.substring(t+8)),-1!==c.userAgent.indexOf("Version/")&&(i=c.userAgent.split("Version/")[1].split(" ")[0])):f?(t=r.indexOf("Firefox"),o="Firefox",i=r.substring(t+8)):(e=r.lastIndexOf(" ")+1)<(t=r.lastIndexOf("/"))&&(o=r.substring(e,t),i=r.substring(t+1),o.toLowerCase()===o.toUpperCase()&&(o=c.appName));return l&&(o="Edge",i=c.userAgent.split("Edge/")[1]),-1!==(n=i.search(/[; \)]/))&&(i=i.substring(0,n)),a=parseInt(""+i,10),isNaN(a)&&(i=""+parseFloat(c.appVersion),a=parseInt(c.appVersion,10)),{fullVersion:i,version:a,name:o,isPrivateBrowsing:!1}}(),function(e){var t;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,(function(){t=!1}),(function(e){t=!0}));else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var n;try{(n=window.indexedDB.open("test")).onerror=function(){return!0}}catch(e){t=!0}void 0===t&&m((function(){return"done"===n.readyState}),(function(e){e||(t=!n.result)}))}else if(function(e){var t=window.navigator.userAgent.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;var n=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);return!!(n&&parseInt(n[1],10)>=10)}()){t=!1;try{window.indexedDB||(t=!0)}catch(e){t=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(e){t=!0}void 0===t&&(t=!1,window.localStorage.removeItem("test"))}}catch(e){t=!1}m((function(){return void 0!==t}),(function(e){var n;n=t,U.browser.isPrivateBrowsing=!!n}))}(),U.browser["is"+U.browser.name]=!0,U.osName=w,U.osVersion=_,"object"==typeof o&&"object"==typeof o.versions&&o.versions["node-webkit"];var V=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach((function(e){V||e in window&&(V=!0)})),U.isWebRTCSupported=V,U.isORTCSupported="undefined"!=typeof RTCIceGatherer;var F=!1;(U.browser.isChrome&&U.browser.version>=35||U.browser.isFirefox&&U.browser.version>=34||U.browser.isEdge&&U.browser.version>=17||"Android"===U.osName&&U.browser.isChrome)&&(F=!0),(c.getDisplayMedia||c.mediaDevices&&c.mediaDevices.getDisplayMedia)&&(F=!0),/^(https:|chrome-extension:)$/g.test(location.protocol||"")||("undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(U.browser.isChrome||U.browser.isEdge||U.browser.isOpera)||U.browser.isFirefox)&&(F=!1),U.isScreenCapturingSupported=F;var B={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach((function(e){B.isSupported||e in window&&(B.isSupported=!0,window[e]&&"createMediaStreamSource"in window[e].prototype&&(B.isCreateMediaStreamSourceSupported=!0))})),U.isAudioContextSupported=B.isSupported,U.isCreateMediaStreamSourceSupported=B.isCreateMediaStreamSourceSupported;var Z=!1;U.browser.isChrome&&U.browser.version>31&&(Z=!0),U.isRtpDataChannelsSupported=Z;var H=!1;(U.browser.isFirefox&&U.browser.version>28||U.browser.isChrome&&U.browser.version>25||U.browser.isOpera&&U.browser.version>=11)&&(H=!0),U.isSctpDataChannelsSupported=H,U.isMobileDevice=u;var G=!1;(c.getUserMedia||c.mediaDevices&&c.mediaDevices.getUserMedia)&&(G=!0),U.browser.isChrome&&U.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(G="Requires HTTPs"),"Nodejs"===U.osName&&(G=!1),U.isGetUserMediaSupported=G;var K,q,z,Y="";screen.width&&(Y+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:"")),U.displayResolution=Y,U.displayAspectRatio=(K=screen.width,q=screen.height,z=function e(t,n){return 0==n?t:e(n,t%n)}(K,q),K/z/(q/z)).toFixed(2),U.isCanvasSupportsStreamCapturing=C,U.isVideoSupportsStreamCapturing=k,"Chrome"==U.browser.name&&U.browser.version>=53&&(U.isCanvasSupportsStreamCapturing||(U.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),U.isVideoSupportsStreamCapturing||(U.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),U.DetectLocalIPAddress=function(e,t){if(U.isWebRTCSupported){var n=!0,r=!0;!function(e,t){if("undefined"!=typeof document&&"function"==typeof document.getElementById){var n={},r=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!r){var o=document.getElementById("iframe");if(!o)return;var i=o.contentWindow;r=i.RTCPeerConnection||i.mozRTCPeerConnection||i.webkitRTCPeerConnection}if(r){var a=null;"Chrome"===U.browser&&U.browser.version<58&&(a={optional:[{RtpDataChannels:!0}]});var s=new r({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},a);if(t&&(s.addStream?s.addStream(t):s.addTrack&&t.getTracks()[0]&&s.addTrack(t.getTracks()[0],t)),s.onicecandidate=function(e){e.candidate&&e.candidate.candidate?c(e.candidate.candidate):c()},!t)try{s.createDataChannel("sctp",{})}catch(e){}U.isPromisesSupported?s.createOffer().then((function(e){s.setLocalDescription(e).then(u)})):s.createOffer((function(e){s.setLocalDescription(e,u,(function(){}))}),(function(){}))}}function c(t){if(t){var r=T.exec(t);if(r){var o=r[1];t.match(I);void 0===n[o]&&e(o),n[o]=!0}}else e()}function u(){s.localDescription.sdp.split("\n").forEach((function(e){e&&0===e.indexOf("a=candidate:")&&c(e)}))}}((function(t){t?t.match(I)?e("Local: "+t,n=!1,r):t.match(O)?e("Public: "+t,n,r=!1):e("Public: "+t,n,r):e()}),t)}},U.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,U.isWebSocketsBlocked=!U.isWebSocketsSupported,"Nodejs"===U.osName&&(U.isWebSocketsSupported=!0,U.isWebSocketsBlocked=!1),U.checkWebSocketsSupport=function(e){e=e||function(){};try{var t,n=new WebSocket("wss://echo.websocket.org:443/");n.onopen=function(){U.isWebSocketsBlocked=!1,t=(new Date).getTime(),n.send("ping")},n.onmessage=function(){U.WebsocketLatency=(new Date).getTime()-t+"ms",e(),n.close(),n=null},n.onerror=function(){U.isWebSocketsBlocked=!0,e()}}catch(t){U.isWebSocketsBlocked=!0,e()}},U.load=function(e){!function(e){if(L)if(!c.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(c.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!c.enumerateDevices&&c.enumerateDevices&&(c.enumerateDevices=c.enumerateDevices.bind(c)),c.enumerateDevices){x=[],A=[],D=[],R=[],P=!1,M=!1,N=!1,j=!1,W=!1;var t={};c.enumerateDevices((function(n){x=[],A=[],D=[],R=[],n.forEach((function(e){var n={};for(var r in e)try{"function"!=typeof e[r]&&(n[r]=e[r])}catch(e){}t[n.deviceId+n.label+n.kind]||("audio"===n.kind&&(n.kind="audioinput"),"video"===n.kind&&(n.kind="videoinput"),n.deviceId||(n.deviceId=n.id),n.id||(n.id=n.deviceId),n.label?("videoinput"!==n.kind||W||(W=!0),"audioinput"!==n.kind||j||(j=!0)):(n.isCustomLabel=!0,"videoinput"===n.kind?n.label="Camera "+(R.length+1):"audioinput"===n.kind?n.label="Microphone "+(A.length+1):"audiooutput"===n.kind?n.label="Speaker "+(D.length+1):n.label="Please invoke getUserMedia once.",void 0!==U&&U.browser.isChrome&&U.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(n.label="HTTPs is required to get label of this "+n.kind+" device.")),"audioinput"===n.kind&&(P=!0,-1===A.indexOf(n)&&A.push(n)),"audiooutput"===n.kind&&(M=!0,-1===D.indexOf(n)&&D.push(n)),"videoinput"===n.kind&&(N=!0,-1===R.indexOf(n)&&R.push(n)),x.push(n),t[n.deviceId+n.label+n.kind]=n)})),void 0!==U&&(U.MediaDevices=x,U.hasMicrophone=P,U.hasSpeakers=M,U.hasWebcam=N,U.isWebsiteHasWebcamPermissions=W,U.isWebsiteHasMicrophonePermissions=j,U.audioInputDevices=A,U.audioOutputDevices=D,U.videoInputDevices=R),e&&e()}))}else e&&e();else e&&e()}(e=e||function(){})},U.MediaDevices=void 0!==x?x:[],U.hasMicrophone=P,U.hasSpeakers=M,U.hasWebcam=N,U.isWebsiteHasWebcamPermissions=W,U.isWebsiteHasMicrophonePermissions=j,U.audioInputDevices=A,U.audioOutputDevices=D,U.videoInputDevices=R;var X=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(X=!0),U.isSetSinkIdSupported=X;var J=!1;U.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(J=!0):U.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(J=!0),U.isRTPSenderReplaceTracksSupported=J;var $=!1;U.browser.isFirefox&&U.browser.version>38&&($=!0),U.isRemoteStreamProcessingSupported=$;var Q=!1;"undefined"!=typeof MediaStreamTrack&&"applyConstraints"in MediaStreamTrack.prototype&&(Q=!0),U.isApplyConstraintsSupported=Q;var ee=!1;U.browser.isFirefox&&U.browser.version>=43&&(ee=!0),U.isMultiMonitorScreenCapturingSupported=ee,U.isPromisesSupported=!!("Promise"in window),U.version="1.4.1",void 0===U&&(window.DetectRTC={});var te=window.MediaStream;void 0===te&&"undefined"!=typeof webkitMediaStream&&(te=webkitMediaStream),U.MediaStream=void 0!==te&&"function"==typeof te&&Object.keys(te.prototype),"undefined"!=typeof MediaStreamTrack?U.MediaStreamTrack=Object.keys(MediaStreamTrack.prototype):U.MediaStreamTrack=!1;var ne=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;U.RTCPeerConnection=void 0!==ne&&Object.keys(ne.prototype),window.DetectRTC=U,e.exports=U,void 0===(r=function(){return U}.apply(t,[]))||(e.exports=r)}()},1378:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}h(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&h(e,"error",t,{once:!0})}(e,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var o,i,a,u;if(s(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=c(e))>0&&a.length>o&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=l.bind(r);return o.listener=n,r.wrapFn=o,o}function f(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):v(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function h(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=v(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,o,i,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},5117:e=>{var t,n,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var s,c=[],u=!1,l=-1;function d(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&f())}function f(){if(!u){var e=a(d);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},3528:(e,t,n)=>{"use strict";var r,o,i,a,s,c;n.d(t,{FX:()=>a,Y2:()=>i,tw:()=>r,yh:()=>o}),function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin"}(r||(r={})),function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration"}(o||(o={})),function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel"}(i||(i={})),function(e){e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2"}(a||(a={})),function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange"}(s||(s={})),function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back"}(c||(c={}))},6403:(e,t,n)=>{"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(e){return!!e&&!!e[H]}function i(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[Z]||!!e.constructor[Z]||d(e)||f(e))}function a(e,t,n){void 0===n&&(n=!1),0===s(e)?(n?Object.keys:G)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function s(e){var t=e[H];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:d(e)?2:f(e)?3:0}function c(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u(e,t,n){var r=s(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function l(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function d(e){return U&&e instanceof Map}function f(e){return V&&e instanceof Set}function p(e){return e.o||e.t}function v(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=K(e);delete t[H];for(var n=G(t),r=0;r<n.length;r++){var o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function h(e,t){g(e)||o(e)||!i(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=m),Object.freeze(e),t&&a(e,(function(e,t){return h(t,!0)}),!0))}function m(){r(2)}function g(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function y(e){var t=q[e];return t||r(19,e),t}function b(){return j}function w(e,t){t&&(y("Patches"),e.u=[],e.s=[],e.v=t)}function _(e){S(e),e.p.forEach(C),e.p=null}function S(e){e===j&&(j=e.l)}function E(e){return j={p:[],l:j,h:e,m:!0,_:0}}function C(e){var t=e[H];0===t.i||1===t.i?t.j():t.g=!0}function k(e,t){t._=t.p.length;var n=t.p[0],o=void 0!==e&&e!==n;return t.h.O||y("ES5").S(t,e,o),o?(n[H].P&&(_(t),r(4)),i(e)&&(e=I(t,e),t.l||O(t,e)),t.u&&y("Patches").M(n[H],e,t.u,t.s)):e=I(t,n,[]),_(t),t.u&&t.v(t.u,t.s),e!==B?e:void 0}function I(e,t,n){if(g(t))return t;var r=t[H];if(!r)return a(t,(function(o,i){return T(e,r,t,o,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return O(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=v(r.k):r.o;a(3===r.i?new Set(o):o,(function(t,i){return T(e,r,o,t,i,n)})),O(e,o,!1),n&&e.u&&y("Patches").R(r,n,e.u,e.s)}return r.o}function T(e,t,n,r,a,s){if(o(a)){var l=I(e,a,s&&t&&3!==t.i&&!c(t.D,r)?s.concat(r):void 0);if(u(n,r,l),!o(l))return;e.m=!1}if(i(a)&&!g(a)){if(!e.h.N&&e._<1)return;I(e,a),t&&t.A.l||O(e,a)}}function O(e,t,n){void 0===n&&(n=!1),e.h.N&&e.m&&h(t,n)}function x(e,t){var n=e[H];return(n?p(n):e)[t]}function A(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function D(e){e.P||(e.P=!0,e.l&&D(e.l))}function R(e){e.o||(e.o=v(e.t))}function L(e,t,n){var r=d(t)?y("MapSet").T(t,n):f(t)?y("MapSet").F(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:b(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=r,i=z;n&&(o=[r],i=Y);var a=Proxy.revocable(o,i),s=a.revoke,c=a.proxy;return r.k=c,r.j=s,c}(t,n):y("ES5").J(t,n);return(n?n.A:b()).p.push(r),r}function P(e){return o(e)||r(22,e),function e(t){if(!i(t))return t;var n,r=t[H],o=s(t);if(r){if(!r.P&&(r.i<4||!y("ES5").K(r)))return r.t;r.I=!0,n=M(t,o),r.I=!1}else n=M(t,o);return a(n,(function(t,o){r&&function(e,t){return 2===s(e)?e.get(t):e[t]}(r.t,t)===o||u(n,t,e(o))})),3===o?new Set(n):n}(e)}function M(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return v(e)}n.d(t,{xC:()=>fe,hg:()=>be,oM:()=>he,SI:()=>we});var N,j,W="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),U="undefined"!=typeof Map,V="undefined"!=typeof Set,F="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,B=W?Symbol.for("immer-nothing"):((N={})["immer-nothing"]=!0,N),Z=W?Symbol.for("immer-draftable"):"__$immer_draftable",H=W?Symbol.for("immer-state"):"__$immer_state",G=("undefined"!=typeof Symbol&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames),K=Object.getOwnPropertyDescriptors||function(e){var t={};return G(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},q={},z={get:function(e,t){if(t===H)return e;var n=p(e);if(!c(n,t))return function(e,t,n){var r,o=A(t,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!i(r)?r:r===x(e.t,t)?(R(e),e.o[t]=L(e.A.h,r,e)):r},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,n){var r=A(p(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(e.D[t]=!0,!e.P){if(l(n,x(p(e),t))&&(void 0!==n||c(e.t,t)))return!0;R(e),D(e)}return e.o[t]=n,!0},deleteProperty:function(e,t){return void 0!==x(e.t,t)||t in e.t?(e.D[t]=!1,R(e),D(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=p(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},Y={};a(z,(function(e,t){Y[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Y.deleteProperty=function(e,t){return z.deleteProperty.call(this,e[0],t)},Y.set=function(e,t,n){return z.set.call(this,e[0],t,n,e[0])};var X=function(){function e(e){this.O=F,this.N=!1,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,n){if("function"==typeof e&&"function"!=typeof t){var o=t;t=e;var a=this;return function(e){var n=this;void 0===e&&(e=o);for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return a.produce(e,(function(e){var r;return(r=t).call.apply(r,[n,e].concat(i))}))}}var s;if("function"!=typeof t&&r(6),void 0!==n&&"function"!=typeof n&&r(7),i(e)){var c=E(this),u=L(this,e,void 0),l=!0;try{s=t(u),l=!1}finally{l?_(c):S(c)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return w(c,n),k(e,c)}),(function(e){throw _(c),e})):(w(c,n),k(s,c))}if(!e||"object"!=typeof e){if((s=t(e))===B)return;return void 0===s&&(s=e),this.N&&h(s,!0),s}r(21,e)},t.produceWithPatches=function(e,t){var n,r,o=this;return"function"==typeof e?function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return o.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(r))}))}:[this.produce(e,t,(function(e,t){n=e,r=t})),n,r]},t.createDraft=function(e){i(e)||r(8),o(e)&&(e=P(e));var t=E(this),n=L(this,e,void 0);return n[H].C=!0,S(t),n},t.finishDraft=function(e,t){var n=(e&&e[H]).A;return w(n,t),k(void 0,n)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){e&&!F&&r(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var i=y("Patches").$;return o(e)?i(e,t):this.produce(e,(function(e){return i(e,t.slice(n+1))}))},e}(),J=new X,$=J.produce;J.produceWithPatches.bind(J),J.setAutoFreeze.bind(J),J.setUseProxies.bind(J),J.applyPatches.bind(J),J.createDraft.bind(J),J.finishDraft.bind(J);const Q=$;var ee=n(4890);function te(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,r,e):t(o)}}}}n(2222);var ne=te();ne.withExtraArgument=te;const re=ne;function oe(){return oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oe.apply(this,arguments)}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ae(e,t){return ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ae(e,t)}function se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ce(e,t,n){return ce=se()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&ae(o,n.prototype),o},ce.apply(null,arguments)}function ue(e){var t="function"==typeof Map?new Map:void 0;return ue=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ce(e,arguments,ie(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ae(r,e)},ue(e)}var le="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?ee.qC:ee.qC.apply(null,arguments)};var de=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.concat=function(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return ce(r,(t=e.prototype.concat).call.apply(t,[this].concat(o)))},o.prepend=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?ce(r,t[0].concat(this)):ce(r,t.concat(this))},r}(ue(Array));function fe(e){var t,n=function(e){return function(e){void 0===e&&(e={});var t=e,n=t.thunk,r=void 0===n||n,o=(t.immutableCheck,t.serializableCheck,new de);return r&&(function(e){return"boolean"==typeof e}(r)?o.push(re):o.push(re.withExtraArgument(r.extraArgument))),o}(e)},r=e||{},o=r.reducer,i=void 0===o?void 0:o,a=r.middleware,s=void 0===a?n():a,c=r.devTools,u=void 0===c||c,l=r.preloadedState,d=void 0===l?void 0:l,f=r.enhancers,p=void 0===f?void 0:f;if("function"==typeof i)t=i;else{if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,ee.UY)(i)}var v=ee.md.apply(void 0,"function"==typeof s?s(n):s),h=ee.qC;u&&(h=le(oe({trace:!1},"object"==typeof u&&u)));var m=[v];Array.isArray(p)?m=[v].concat(p):"function"==typeof p&&(m=p(m));var g=h.apply(void 0,m);return(0,ee.MT)(t,d,g)}function pe(e,t){function n(){if(t){var n=t.apply(void 0,arguments);if(!n)throw new Error("prepareAction did not return an object");return oe({type:e,payload:n.payload},"meta"in n&&{meta:n.meta},{},"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function ve(e){var t,n={},r=[],o={addCase:function(e,t){var r="string"==typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,o},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),o},addDefaultCase:function(e){return t=e,o}};return e(o),[n,r,t]}function he(e){var t=e.name,n=e.initialState;if(!t)throw new Error("`name` is a required option for createSlice");var r=e.reducers||{},a=void 0===e.extraReducers?[]:"function"==typeof e.extraReducers?ve(e.extraReducers):[e.extraReducers],s=a[0],c=void 0===s?{}:s,u=a[1],l=void 0===u?[]:u,d=a[2],f=void 0===d?void 0:d,p=Object.keys(r),v={},h={},m={};p.forEach((function(e){var n,o,i=r[e],a=t+"/"+e;"reducer"in i?(n=i.reducer,o=i.prepare):n=i,v[e]=n,h[a]=n,m[e]=o?pe(a,o):pe(a)}));var g=function(e,t,n,r){void 0===n&&(n=[]);var a="function"==typeof t?ve(t):[t,n,r],s=a[0],c=a[1],u=a[2];return function(t,n){void 0===t&&(t=e);var r=[s[n.type]].concat(c.filter((function(e){return(0,e.matcher)(n)})).map((function(e){return e.reducer})));return 0===r.filter((function(e){return!!e})).length&&(r=[u]),r.reduce((function(e,t){if(t){if(o(e)){var r=t(e,n);return void 0===r?e:r}if(i(e))return Q(e,(function(e){return t(e,n)}));var a=t(e,n);if(void 0===a)throw Error("A case reducer on a non-draftable value must not return undefined");return a}return e}),t)}}(n,oe({},c,{},h),l,f);return{name:t,reducer:g,actions:m,caseReducers:v}}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var me=["name","message","stack","code"],ge=function(e){this.value=e},ye=function(e){if("object"==typeof e&&null!==e){var t={},n=me,r=Array.isArray(n),o=0;for(n=r?n:n[Symbol.iterator]();;){var i;if(r){if(o>=n.length)break;i=n[o++]}else{if((o=n.next()).done)break;i=o.value}var a=i;"string"==typeof e[a]&&(t[a]=e[a])}return t}return{message:String(e)}};function be(e,t,n){var r=pe(e+"/fulfilled",(function(e,t,n){return{payload:e,meta:{arg:n,requestId:t}}})),o=pe(e+"/pending",(function(e,t){return{payload:void 0,meta:{arg:t,requestId:e}}})),i=pe(e+"/rejected",(function(e,t,n,r){var o=!!e&&"AbortError"===e.name,i=!!e&&"ConditionError"===e.name;return{payload:r,error:ye(e||"Rejected"),meta:{arg:n,requestId:t,aborted:o,condition:i}}})),a="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(s,c,u){var l,d=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t}(),f=new a,p=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),v=!1,h=function(){try{var a,l=function(e){return h?e:(n&&!n.dispatchConditionRejection&&i.match(a)&&a.meta.condition||s(a),a)},h=!1,m=function(l,h){try{var m=function(){if(n&&n.condition&&!1===n.condition(e,{getState:c,extra:u}))throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return v=!0,s(o(d,e)),Promise.resolve(Promise.race([p,Promise.resolve(t(e,{dispatch:s,getState:c,extra:u,requestId:d,signal:f.signal,rejectWithValue:function(e){return new ge(e)}})).then((function(t){return t instanceof ge?i(null,d,e,t.value):r(t,d,e)}))])).then((function(e){a=e}))}()}catch(e){return h(e)}return m&&m.then?m.then(void 0,h):m}(0,(function(t){a=i(t,d,e)}));return Promise.resolve(m&&m.then?m.then(l):l(m))}catch(e){return Promise.reject(e)}}();return Object.assign(h,{abort:function(e){v&&(l=e,f.abort())}})}}),{pending:o,rejected:i,fulfilled:r,typePrefix:e})}function we(e){if("error"in e)throw e.error;return e.payload}!function(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[H];return z.get(t,e)},set:function(t){var n=this[H];z.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var o=e[t][H];if(!o.P)switch(o.i){case 5:r(o)&&D(o);break;case 4:n(o)&&D(o)}}}function n(e){for(var t=e.t,n=e.k,r=G(n),o=r.length-1;o>=0;o--){var i=r[o];if(i!==H){var a=t[i];if(void 0===a&&!c(t,i))return!0;var s=n[i],u=s&&s[H];if(u?u.t!==a:!l(s,a))return!0}}var d=!!t[H];return r.length!==G(t).length+(d?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}var i={};!function(e,t){q[e]=t}("ES5",{J:function(t,n){var r=Array.isArray(t),o=function(t,n){if(t){for(var r=Array(n.length),o=0;o<n.length;o++)Object.defineProperty(r,""+o,e(o,!0));return r}var i=K(n);delete i[H];for(var a=G(i),s=0;s<a.length;s++){var c=a[s];i[c]=e(c,t||!!i[c].enumerable)}return Object.create(Object.getPrototypeOf(n),i)}(r,t),i={i:r?5:4,A:n?n.A:b(),P:!1,I:!1,D:{},l:n,t,k:o,o:null,g:!1,C:!1};return Object.defineProperty(o,H,{value:i,writable:!0}),o},S:function(e,n,i){i?o(n)&&n[H].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[H];if(n){var o=n.t,i=n.k,s=n.D,u=n.i;if(4===u)a(i,(function(t){t!==H&&(void 0!==o[t]||c(o,t)?s[t]||e(i[t]):(s[t]=!0,D(n)))})),a(o,(function(e){void 0!==i[e]||c(i,e)||(s[e]=!1,D(n))}));else if(5===u){if(r(n)&&(D(n),s.length=!0),i.length<o.length)for(var l=i.length;l<o.length;l++)s[l]=!1;else for(var d=o.length;d<i.length;d++)s[d]=!0;for(var f=Math.min(i.length,o.length),p=0;p<f;p++)void 0===s[p]&&e(i[p])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}()},7937:(e,t,n)=>{"use strict";n.d(t,{J:()=>r,i:()=>o});const r=()=>parseInt(4),o=()=>"4e9c45dc9d9db07e2b9d7b3877c9fcce8f1bd667"},2835:(e,t,n)=>{"use strict";n.d(t,{M:()=>g,_:()=>v});var r,o,i,a,s,c,u,l,d,f,p,v,h=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},m=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};!function(e){e.camera="camera",e.display="display"}(v||(v={}));class g{constructor(e){r.add(this),o.set(this,void 0),i.set(this,{[v.camera]:null,[v.display]:null}),a.set(this,[]),s.set(this,null),c.set(this,null),h(this,o,e,"f")}onStreamChange(e){return m(this,a,"f").push(e),()=>{h(this,a,m(this,a,"f").filter((t=>t===e)),"f")}}async startCameraStream({audio:e,video:t}){const n=await m(this,o,"f").setupCameraMediaStream({audio:e,video:t});return h(this,s,n.stopVideo,"f"),h(this,c,n.stopAudio,"f"),m(this,r,"m",l).call(this,v.camera,n.stream),n}async startDisplayStream(){const e=await m(this,o,"f").setupDisplayMediaStream();return m(this,r,"m",l).call(this,v.display,e),e}stopCameraStream(){return m(this,s,"f")&&m(this,s,"f").call(this),m(this,r,"m",d).call(this,v.camera)}stopDisplayStream(){return m(this,r,"m",d).call(this,v.display)}stopCameraAudioTrack(){m(this,c,"f")&&m(this,c,"f").call(this)}stopCameraVideoTrack(){m(this,s,"f")&&m(this,s,"f").call(this)}getCameraStream(){return m(this,i,"f")[v.camera]}getDisplayStream(){return m(this,i,"f")[v.display]}getCameraVideoTrack(){return m(this,r,"m",u).call(this,v.camera,"video")}getCameraAudioTrack(){return m(this,r,"m",u).call(this,v.camera,"audio")}getDisplayVideoTrack(){return m(this,r,"m",u).call(this,v.display,"video")}getAllTracks(){return[this.getCameraAudioTrack(),this.getCameraVideoTrack(),this.getDisplayVideoTrack()].filter((e=>Boolean(e)))}}o=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,c=new WeakMap,r=new WeakSet,u=function(e,t){var n;const r=null===(n=m(this,i,"f")[e])||void 0===n?void 0:n.getTracks().filter((e=>e.kind===t));return(null==r?void 0:r.length)?r[0]:null},l=function(e,t){m(this,r,"m",d).call(this,e,!0),m(this,i,"f")[e]=t,m(this,r,"m",p).call(this,e,t),m(this,r,"m",f).call(this,e)},d=function(e,t=!1){const n=m(this,i,"f")[e];return!!n&&(n.getTracks().forEach((e=>e.stop())),m(this,i,"f")[e]=null,t||m(this,r,"m",f).call(this,e),!0)},f=function(e){const t=m(this,i,"f")[e];m(this,a,"f").forEach((n=>n({streamType:e,stream:t})))},p=function(e,t){const n=n=>{n.addEventListener("ended",(()=>{t.getTracks().length||m(this,r,"m",d).call(this,e)}))};t.getTracks().forEach(n),t.addEventListener("addtrack",(e=>n(e.track)))}},7856:(e,t,n)=>{"use strict";n.d(t,{UJ:()=>R,as:()=>O,dW:()=>D,jc:()=>T});var r,o,i,a,s,c,u,l,d,f,p,v,h,m,g,y,b,w,_,S,E,C=n(1378),k=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},I=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};var T,O,x,A;!function(e){e.CLIENT_DISCONNECT="CLIENT_DISCONNECT",e.CONNECT_REJECTED="CONNECT_REJECTED",e.BLOCKED="BLOCKED",e.MAX_SESSIONS="MAX_SESSIONS",e.PROTOCOL_VERSION_AHEAD="PROTOCOL_VERSION_AHEAD",e.PROTOCOL_VERSION_BEHIND="PROTOCOL_VERSION_BEHIND",e.DISPLACED="DISPLACED",e.OFFLINE="OFFLINE",e.UNKNOWN="UNKNOWN",e.BAD_ACCOUNT="BAD_ACCOUNT",e.EXISTING_USER_SOCKET_BUSY="EXISTING_USER_SOCKET_BUSY",e.PASSIVE_REJECTION="PASSIVE_REJECTION",e.STALE="STALE",e.ACTION_RESPONSE_TIMEOUT="ACTION_RESPONSE_TIMEOUT",e.BUSY_CONNECTION="BUSY_CONNECTION",e.CONNECTION_DATA_NOT_FOUND="CONNECTION_DATA_NOT_FOUND"}(T||(T={})),function(e){e.pong="pong",e.subscribe="subscribe",e.unsubscribe="unsubscribe"}(O||(O={})),function(e){e.disconnecting="disconnecting",e.connectError="connect_error",e.ping="_ping",e.actionResponse="action_response"}(x||(x={})),function(e){e.status="status"}(A||(A={}));const D=Object.assign(Object.assign({},A),x);class R{constructor({logger:e,protocolVersion:t,url:n,reconnectWhenOffline:g}){r.add(this),this.eventEmitter=new C.EventEmitter,o.set(this,void 0),i.set(this,void 0),a.set(this,void 0),s.set(this,void 0),c.set(this,new Map),u.set(this,0),l.set(this,new Set),this.connectArgs=void 0,d.set(this,null),f.set(this,R.calculateDelay()),p.set(this,0),v.set(this,0),h.set(this,0),m.set(this,!1),this.log=e,k(this,i,t,"f"),k(this,o,n,"f"),k(this,a,"disconnected","f"),k(this,s,null,"f"),k(this,m,g,"f")}static calculateDelay(e){e||(e=500);let t=Math.min(2*e,2e4);return t=Math.round(t-t/2+Math.random()*t),t}connect(e){!1!==(null==e?void 0:e.reconnectReset)&&(this.resetReconnect(),(null==e?void 0:e.reconnectReset)&&delete e.reconnectReset),this.connectArgs=e||this.connectArgs||{},this.destroy();const t=new URL(I(this,o,"f"));Object.entries(this.makeConnectQuery()).forEach((([e,n])=>{["number","string","boolean"].includes(typeof n)?t.searchParams.append(e,n.toString()):this.log.warn(`Found a bad socket connect query parameter ${e}: ${n} (${typeof n})`)})),k(this,s,new WebSocket(t),"f"),I(this,r,"m",g).call(this)}makeConnectQuery(){return{protocolVersion:I(this,i,"f")}}addChattyAction(e){I(this,l,"f").add(e)}disconnect(e){this.destroy(e)}destroy(e){I(this,s,"f")&&(this.stopPonger(),k(this,d,e||null,"f"),I(this,r,"m",E).call(this,I(this,d,"f")||T.UNKNOWN),k(this,u,0,"f"),I(this,s,"f").onerror=null,I(this,s,"f").onopen=null,I(this,s,"f").onmessage=null,I(this,s,"f").readyState===WebSocket.CLOSED||I(this,s,"f").close(1e3,"client"),k(this,s,null,"f"))}getSocket(){return I(this,s,"f")}getStatus(){return I(this,a,"f")}on(e,t){this.eventEmitter.on(e,t)}async emit(e,t,n){return new Promise(((o,i)=>{var a,c;if((null===(a=I(this,s,"f"))||void 0===a?void 0:a.readyState)!==WebSocket.OPEN)throw new Error(`Tried to emit action [${e}], but WebSocket not open`);{const a={action:e,payload:t};n||(a.actionId=I(this,r,"m",w).call(this,{res:o,rej:i},e,t)),null===(c=I(this,s,"f"))||void 0===c||c.send(JSON.stringify(a)),n&&o(void 0)}}))}changeStatus(e){k(this,a,e,"f"),this.eventEmitter.emit(D.status,{status:I(this,a,"f"),disconnectCode:I(this,d,"f")})}wsOnCloseHandler(e){if(1006===e.code||4999===e.code)if(navigator.onLine)k(this,d,T.CONNECT_REJECTED,"f");else if(k(this,d,T.OFFLINE,"f"),I(this,m,"f"))return this.log.debug("Connection failed because we are offline, will retry soon"),void I(this,r,"m",b).call(this);if(e.code>1e3&&1006!==e.code&&4999!==e.code)return this.log.debug(`WS closed with non-normal code [${e.code}], reconnecting...`),void I(this,r,"m",b).call(this);this.resetReconnect(),this.log.debug(`WS close, ws code [${e.code}], ws reason [${e.reason}], disconnectingCode [${I(this,d,"f")}]`),I(this,r,"m",E).call(this,I(this,d,"f")),this.changeStatus("disconnected"),this.stopPonger()}wsOnOpenHandler(){this.log.debug("WebSocket.onopen"),this.resetReconnect(),this.changeStatus("connected"),this.startPonger()}wsOnErrorHandler(e){this.log.error("WebSocket.onerror",e)}wsOnMessageHandler(e){const t=JSON.parse(e.data||"{}"),n=t.message||"";["Internal server error","Endpoint request timed out"].includes(n)&&this.log.warn(`Server returned an error message [${n}]`);const o=t.action||"",i=t.payload||{},{error:a,actionId:s,failedAction:c}=t;if(a)return this.log.warn(`Ws error response code [${a}], action [${c}]`),void(s&&this.absorbEmitFailedMessage(t));if(I(this,l,"f").has(o)||this.log.debug(`On message action [${o}]`),o===x.actionResponse){const e=t.actionId||null;e?I(this,r,"m",_).call(this,e,i):this.log.warn("Received an action_response without an actionId",{payload:i})}else if(o===x.disconnecting){const e=i&&i.code;e||this.log.warn("Expected disconnecting event to have a 'code' field",t),k(this,d,this.resolveSocketError(e),"f")}else I(this,r,"m",y).call(this,o)?this.eventEmitter.emit(o,i):this.log.warn(`Received action for which there is no handler [${o}]`)}resetReconnect(){clearTimeout(I(this,v,"f")),k(this,f,R.calculateDelay(),"f"),k(this,p,0,"f")}absorbEmitFailedMessage(e){const t=I(this,c,"f").get(e.actionId.toString());t&&t.rej(e.error),I(this,r,"m",S).call(this,e.actionId)}resolveSocketError(e){let t=Object.values(T).includes(e)?e:T.UNKNOWN;return t===T.UNKNOWN&&this.log.warn(`Received unexpected socket error code [${e}]`),e||(t=T.CLIENT_DISCONNECT),t}startPonger(){this.log.debug("start pong");const e=Math.round(8e3),t=4e4-e,n=()=>t+Math.random()*e*2,r=()=>{this.emit(O.pong,void 0,!0),k(this,h,window.setTimeout(r.bind(this),n()),"f")};k(this,h,window.setTimeout(r,n()),"f")}stopPonger(){I(this,h,"f")&&(this.log.debug("stop pong"),clearTimeout(I(this,h,"f")),k(this,h,0,"f"))}}o=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,h=new WeakMap,m=new WeakMap,r=new WeakSet,g=function(){if(!I(this,s,"f"))throw new Error("Cannot setupWebsocket without WebSocket instance");this.changeStatus("connecting"),I(this,s,"f").onclose=this.wsOnCloseHandler.bind(this),I(this,s,"f").onerror=this.wsOnErrorHandler.bind(this),I(this,s,"f").onopen=this.wsOnOpenHandler.bind(this),I(this,s,"f").onmessage=this.wsOnMessageHandler.bind(this)},y=function(e){return this.eventEmitter.eventNames().includes(e)},b=function(){var e;clearTimeout(I(this,v,"f")),k(this,p,(e=I(this,p,"f"),++e),"f"),this.log.debug(`Will attempt reconnect #${I(this,p,"f")} in ${I(this,f,"f")}ms`),k(this,v,window.setTimeout((()=>{if(!this.connectArgs)throw new Error("Cannot reconnect without connect arguments, has there been an initial 'connect(...)' called?");this.connect(Object.assign(Object.assign({},this.connectArgs),{reconnectReset:!1}))}),I(this,f,"f")),"f"),k(this,f,R.calculateDelay(I(this,f,"f")),"f")},w=function(e,t,n){var r;const o=k(this,u,(r=I(this,u,"f"),++r),"f");return I(this,c,"f").set(o.toString(),e),setTimeout((()=>{I(this,c,"f").has(o.toString())&&(this.log.debug(`Emit action ${t} timed out (actionId=${o})`),this.absorbEmitFailedMessage({actionId:o,action:t,payload:n||{},error:T.ACTION_RESPONSE_TIMEOUT}))}),5e3),o},_=function(e,t){const n=I(this,c,"f").get(e.toString());n?n.res(t):this.log.warn(`No callback found for actionId [${e}]`),I(this,r,"m",S).call(this,e)},S=function(e){I(this,c,"f").delete(e.toString())},E=function(e){I(this,c,"f").forEach((({rej:t},n)=>{t(e||T.UNKNOWN)})),I(this,c,"f").clear()}},1151:(e,t,n)=>{"use strict";var r,o,i;n.d(t,{Hd:()=>i,_y:()=>r,gi:()=>o}),function(e){e.TEXT="text",e.ANSWER_BUTTONS="answer_buttons",e.TYPING="typing",e.EMAIL_INPUT="email_input",e.PHONE_INPUT="phone_input",e.SHORT_INPUT="short_input",e.CHOICES="choices",e.FEEDBACK_INPUT="feedback_input",e.SCHEDULE="schedule",e.VIDEO="video",e.JOURNEY_EVENT="journey_event",e.GENERAL_EVENT="general_event"}(r||(r={})),function(e){e.INBOUND_CALL="inbound_call"}(o||(o={})),function(e){e.AGENT_CALL="agent_call",e.AGENT_TRANSFER="agent_transfer",e.VISITOR_MISSED_AGENT_CALL="visitor_missed_agent_call",e.VISITOR_CALLBACK_AGENT="visitor_callback_agent"}(i||(i={}))},9199:(e,t,n)=>{"use strict";n.d(t,{_y:()=>D._y,Hd:()=>D.Hd,gi:()=>D.gi,dD:()=>w,Bu:()=>r,tw:()=>v.tw,yh:()=>v.yh,w_:()=>O,$N:()=>x,ZL:()=>o,mB:()=>E,pL:()=>_,IB:()=>i,Gj:()=>T});var r,o,i,a,s,c,u,l,d,f,p,v=n(3528);!function(e){e.RECORDING_START_EVENT_TAG="sb-recording-start",e.IFRAME_LOADING_EVENT_TAG="sb-iframe-loading"}(r||(r={})),function(e){e["chat.inbox.unread-message-count.user"]="chat.inbox.unread-message-count.user",e["chat.inbox.stats.org"]="chat.inbox.stats.org",e["chat.inbox.stats.user"]="chat.inbox.stats.user",e["chat.inbox.conversation-updates.open.assigned"]="chat.inbox.conversation-updates.open.assigned",e["chat.inbox.conversation-updates.open.mentioned"]="chat.inbox.conversation-updates.open.mentioned",e["chat.inbox.conversation-updates.open.all"]="chat.inbox.conversation-updates.open.all",e["chat.inbox.conversation-updates.open.unassigned"]="chat.inbox.conversation-updates.open.unassigned",e["chat.inbox.conversation-updates.closed.assigned"]="chat.inbox.conversation-updates.closed.assigned",e["chat.inbox.conversation-updates.closed.mentioned"]="chat.inbox.conversation-updates.closed.mentioned",e["chat.inbox.conversation-updates.closed.all"]="chat.inbox.conversation-updates.closed.all",e["chat.inbox.conversation-updates.closed.unassigned"]="chat.inbox.conversation-updates.closed.unassigned",e["chat.conversation"]="chat.conversation",e["chat.conversations.visitor"]="chat.conversations.visitor",e["app-notifications.user"]="app-notifications.user",e["chat.widget.visitor"]="chat.widget.visitor",e["availability.org"]="availability.org"}(o||(o={})),function(e){e.IDLE="IDLE",e.WAITING="WAITING",e.ALERT="ALERT",e.ACTIVE="ACTIVE",e.FINISHED="FINISHED",e.MISSED="MISSED"}(i||(i={})),function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE"}(a||(a={})),function(e){e.VISITOR="VISITOR",e.IP_ADDRESS="IP_ADDRESS"}(s||(s={})),function(e){e.BLOCK="BLOCK",e.SILENCE="SILENCE"}(c||(c={})),function(e){e.REQUESTED_HELP="REQUESTED_HELP",e.HELP_REQUEST_MISSED="HELP_REQUEST_MISSED",e.REJECTED_CALL="REJECTED_CALL",e.ALERT="ALERT",e.PAGE_VISIT="PAGE_VISIT",e.FEEDBACK="FEEDBACK",e.SPYING="SPYING",e.VIDEO="VIDEO",e.TAKEOVER="TAKEOVER",e.DISPLAYSHARE="DISPLAYSHARE",e.DISPLAYDEMO="DISPLAYDEMO",e.SESSION="SESSION"}(u||(u={})),function(e){e.SPYING="SPYING",e.VIDEO="VIDEO",e.TAKEOVER="TAKEOVER"}(l||(l={})),function(e){e.REQUESTED_HELP="REQUESTED_HELP",e.PAGE_VISIT="PAGE_VISIT"}(d||(d={})),function(e){e.ADMIN="ADMIN",e.MEMBER="MEMBER",e.VIEWER="VIEWER",e.CUSTOM="CUSTOM"}(f||(f={})),function(e){e.EVERYDAY="EVERYDAY",e.WEEKDAY="WEEKDAY",e.WEEKEND="WEEKEND",e.MONDAY="MONDAY",e.TUESDAY="TUESDAY",e.WEDNESDAY="WEDNESDAY",e.THURSDAY="THURSDAY",e.FRIDAY="FRIDAY",e.SATURDAY="SATURDAY",e.SUNDAY="SUNDAY"}(p||(p={}));var h,m,g,y,b,w,_,S,E,C,k,I,T,O,x,A,D=n(1151);!function(e){e.NEWEST="newest",e.OLDEST="oldest"}(h||(h={})),function(e){e.OPEN="open",e.CLOSED="closed"}(m||(m={})),function(e){e.ASSIGNED="assigned",e.MENTIONED="mentioned",e.ALL="all",e.UNASSIGNED="unassigned"}(g||(g={})),n(8931),n(2024),function(e){e.PROACTIVE_VIDEOS="PROACTIVE_VIDEOS",e.JOURNEY_BUILDER="JOURNEY_BUILDER",e.AGENT_SCHEDULING="AGENT_SCHEDULING",e.AUTOMATIONS="AUTOMATIONS",e.TOUR="TOUR",e.GROUPS="GROUPS",e.SEGMENTS="SEGMENTS",e.CONTEXTUAL_RECORDING="CONTEXTUAL_RECORDING",e.HELP_CENTER="HELP_CENTER"}(y||(y={})),function(e){e.thumbnail="thumbnail",e.small="small",e.medium="medium",e.large="large"}(b||(b={})),function(e){e.COMPLETE="COMPLETE",e.FAILED="FAILED",e.UPLOADING="UPLOADING"}(w||(w={})),function(e){e.text="text",e.textarea="textarea",e.checkbox="checkbox",e.radio="radio"}(_||(_={})),function(e){e.in_person="in_person",e.phone="phone",e.google_meet="google_meet",e.zoom="zoom"}(S||(S={})),function(e){e.collective="collective",e.availability="availability",e.fair="fair"}(E||(E={})),function(e){e.clearbit="clearbit",e.sixsense="sixsense",e.intercom="intercom",e.calendly="calendly",e.hubspot="hubspot",e.slack="slack",e.teams="teams",e.acuity="acuity",e.zapier="zapier",e.salesforce="salesforce",e.zendesk="zendesk",e.chilipiper="chilipiper",e.outreach="outreach"}(C||(C={})),function(e){e["google-calendar"]="google-calendar",e.zoom="zoom"}(k||(k={})),function(e){e.allContacts="allContacts",e.leadContacts="leadContacts",e.allCompanies="allCompanies",e.hubspotContacts="hubspotContacts",e.outreachContacts="outreachContacts",e.salesforceContacts="salesforceContacts",e.servicebellContacts="servicebellContacts"}(I||(I={})),function(e){e.IN_PROGRESS="IN_PROGRESS",e.COMPLETE="COMPLETE"}(T||(T={})),function(e){e.HOT="hot",e.ALWAYS="always"}(O||(O={})),function(e){e.SKELETON="skeleton",e.CHAT="chat"}(x||(x={})),function(e){e.RULES="rules",e.API="api"}(A||(A={}))},8931:(e,t,n)=>{"use strict";var r,o;n.d(t,{E:()=>r,O:()=>o}),function(e){e.ALERT="alert",e.VIDEO="video",e.EXPAND="expand"}(r||(r={})),function(e){e.VISIT="VISIT",e.CLICK="CLICK",e.FORM="FORM"}(o||(o={}))},2024:(e,t,n)=>{"use strict";var r,o,i,a,s;n.d(t,{QO:()=>o,r4:()=>r}),function(e){e.IMMEDIATE="immediate",e.SHOW="show",e.EXPAND="expand",e.ALERT="alert",e.DIAL="dial",e.INTERCOM="intercom",e.JS="js"}(r||(r={})),function(e){e.OFF_HOURS="off-hours",e.NONE_ONLINE="none-online",e.BUSY="busy"}(o||(o={})),function(e){e.CHAT="chat",e.CALL="call",e.MEETING="meeting"}(i||(i={})),function(e){e.LIVE_AGENTS="live-agents",e.HELP_CENTER="help-center"}(a||(a={})),function(e){e.IDLE_HELP_TEXT="IDLE_HELP_TEXT",e.IDLE_HELP_TEXT_FOCUSED="IDLE_HELP_TEXT_FOCUSED",e.IDLE_BUSY_TEXT="IDLE_BUSY_TEXT",e.IDLE_BUSY_TEXT_FOCUSED="IDLE_BUSY_TEXT_FOCUSED",e.IDLE_AWAY_TEXT="IDLE_AWAY_TEXT",e.IDLE_AWAY_TEXT_FOCUSED="IDLE_AWAY_TEXT_FOCUSED",e.ANSWER_CALL="ANSWER_CALL",e.NEED_HELP_TITLE="NEED_HELP_TITLE",e.NEED_HELP_TEXT="NEED_HELP_TEXT",e.NEED_HELP_AWAY_TEXT="NEED_HELP_AWAY_TEXT",e.NEED_HELP_AWAY_TITLE="NEED_HELP_AWAY_TITLE",e.NEED_HELP_BUSY_TEXT="NEED_HELP_BUSY_TEXT",e.NEED_HELP_BUSY_TITLE="NEED_HELP_BUSY_TITLE",e.NEED_HELP_TITLE_OFFLINE="NEED_HELP_TITLE_OFFLINE",e.NEED_HELP_TEXT_OFFLINE="NEED_HELP_TEXT_OFFLINE",e.NEED_HELP_CTA="NEED_HELP_CTA",e.DIALING_TITLE="DIALING_TITLE",e.RECORDING_OPTIN_TITLE="RECORDING_OPTIN_TITLE",e.RECORDING_OPTIN_TEXT="RECORDING_OPTIN_TEXT"}(s||(s={}))},6817:(e,t,n)=>{"use strict";n.d(t,{IZ:()=>l,VS:()=>o,iN:()=>a});var r,o,i,a,s=n(1378),c=n.n(s),u=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};!function(e){e.connect="connect",e.data="data",e.disconnect="disconnect",e.streamout="streamout",e.streamin="streamin"}(o||(o={})),function(e){e.lightBlur="light_blur",e.strongBlur="strong_blur",e.image="image"}(i||(i={})),function(e){e.CLOSED="CLOSED",e.ERROR="ERROR"}(a||(a={}));class l{constructor(e,t){r.set(this,new(c().EventEmitter)),this.logger=t,this.mediaStreams=e}on(e,t){return u(this,r,"f").on(e,t),this}emit(e,...t){return u(this,r,"f").emit(e,...t)}removeAllListeners(){u(this,r,"f").removeAllListeners()}static runDiagnostics(e,t){t.warn("runDiagnostics not implemented")}}r=new WeakMap},3668:(e,t,n)=>{"use strict";n.d(t,{_3:()=>T,Xw:()=>_,qp:()=>A,fq:()=>Z,Zd:()=>B,Ni:()=>F,Zt:()=>h,b6:()=>w,bG:()=>V,cc:()=>S,Ug:()=>k,uv:()=>E,EV:()=>j,bZ:()=>U,nc:()=>L,_T:()=>R,e8:()=>D,GB:()=>y,_F:()=>m,O3:()=>x,St:()=>N,NP:()=>W,nV:()=>P,nv:()=>M,LL:()=>v,aS:()=>C,iL:()=>I,fA:()=>g,en:()=>O,Oj:()=>b});var r=n(5861),o=n(4687),i=n.n(o),a="https://api.servicebell.com",s=function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n);case 2:if(!(r=e.sent).ok){e.next=10;break}if(204!==r.status){e.next=6;break}return e.abrupt("return",{data:null});case 6:return e.next=8,r.json();case 8:return o=e.sent,e.abrupt("return",{data:o});case 10:return e.next=12,r.text();case 12:s=e.sent,e.prev=13,c=JSON.parse(s),a=c.message,e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(13),new Error(s);case 21:throw new Error(a);case 22:case"end":return e.stop()}}),e,null,[[13,18]])})));return function(t,n){return e.apply(this,arguments)}}();const c=function(e,t){return s("".concat(a).concat(e),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)})},u=function(e,t){return s("".concat(a).concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)})},l=function(e,t){return s("".concat(a).concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)})},d=function(e,t){var n=new URLSearchParams(t.params).toString(),r=n?"".concat(a).concat(e,"?").concat(n):"".concat(a).concat(e);return s(r,{headers:{Accept:"application/json"}})};var f=n(32),p={status:"published"};function v(e){return c("/api/v1/visitor/contact",e).catch((function(t){f.Z.error("Unable to register visitor contact",e,t)}))}function h(e,t){return d("/api/v1/visitor/calendly",{params:{clientKey:e,visitorId:t}})}function m(e,t,n,r){return c("/api/v1/visitor/calendly",{visitorId:e,eventUri:t,inviteeUri:n,clientKey:r})}function g(e,t,n,r){return c("/api/v1/visitor/feedback",r?{visitorId:e,clientKey:t,feedbackAnswers:n,conversationId:r}:{visitorId:e,clientKey:t,feedbackAnswers:n})}function y(e){return d("/api/v1/visitor/init",{params:{clientKey:e}})}function b(e,t,n){var r=new FormData;return r.append("visitorSid",e),r.append("sbid",t),r.append("snapshot",n,"snapshot"),fetch("".concat("https://api.servicebell.com","/api/v1/visitor/snapshot"),{method:"POST",body:r})}function w(e,t,n){var r=new URLSearchParams({clientKey:t,visitorId:e});return n&&r.set("cursor",n.toString()),d("/api/v1/visitor/chat",{params:r})}function _(e,t,n){var r=Object.assign({clientKey:e,visitorId:t},n?{agentId:n}:{});return c("/api/v1/widget/chat/conversations",r)}function S(e,t,n){var r=new URLSearchParams({clientKey:e});return d("/api/v1/widget/chat/visitors/".concat(t,"/conversations/").concat(n),{params:r})}function E(e,t){var n=new URLSearchParams({clientKey:e});return d("/api/v1/widget/chat/visitors/".concat(t,"/conversations"),{params:n})}function C(e,t,n){return l("/api/v1/widget/chat/visitors/".concat(t,"/conversations/").concat(n,"/read"),{clientKey:e})}function k(e,t,n,r){var o=new URLSearchParams({clientKey:e});return r&&o.set("cursor",r.toString()),d("/api/v1/widget/chat/visitors/".concat(t,"/conversations/").concat(n,"/messages"),{params:o})}function I(e,t,n){return c("/api/v1/widget/images",{clientKey:t,visitorId:e,filename:n})}function T(e,t,n){return c("/api/v1/widget/contextual/recording?clientKey=".concat(e),Object.assign(Object.assign({},n?{conversationId:n}:{}),{visitorId:t}))}function O(e,t,n,r){return u("/api/v1/widget/contextual/recording/status?clientKey=".concat(e),{recordingId:t,status:n,visitorId:r})}function x(e){return c("/api/v1/visitor/choice",e)}function A(e){return d("/api/v1/widget/scheduler/agent_meet_page",{params:{filters:JSON.stringify(e)}})}function D(e){return d("/api/v1/widget/scheduler/event_types/".concat(e),{params:{}})}function R(e,t,n){var r={startTime:t,endTime:n};return d("/api/v1/widget/scheduler/event_types/".concat(e,"/start_times"),{params:r})}function L(e,t){var n={date:t};return d("/api/v1/widget/scheduler/event_types/".concat(e,"/next_available_date"),{params:n})}function P(e){return c("/api/v1/widget/scheduler/events",e)}function M(e){return c("/api/v1/visitor/start_journey",e)}function N(e){return c("/api/v1/visitor/debug_journey",e)}function j(e){var t=Object.assign(Object.assign({},e),{id:String(e.id)});return d("/api/v1/visitor/expiring_media",{params:t})}function W(e){return c("/api/v1/visitor/journey_video_watched",e)}function U(e){return d("/api/v1/public/helpcenter/settings?orgId=".concat(e),{params:{}})}function V(e){return d("/api/v1/public/helpcenter/article-collections?orgId=".concat(e),{params:{}})}function F(e,t){return d("/api/v1/public/helpcenter/articles/?orgId=".concat(e,"&filters=").concat(JSON.stringify(p),"&search=").concat(t),{params:{}})}function B(e,t){var n=Object.assign({},p);return n.articleCollectionId=t.toString(),d("/api/v1/public/helpcenter/articles?orgId=".concat(e,"&filters=").concat(JSON.stringify(n)),{params:{}})}function Z(e,t){return d("/api/v1/public/helpcenter/articles/".concat(t,"?orgId=").concat(e),{params:{}})}},1663:(e,t,n)=>{"use strict";n.d(t,{Dq:()=>x,FU:()=>I,Fg:()=>k,LO:()=>_,VL:()=>O,X$:()=>T,aJ:()=>L,dv:()=>E,eY:()=>w,iP:()=>b,mS:()=>S,my:()=>C});var r=n(5861),o=n(885),i=n(4687),a=n.n(i),s=n(5776),c=n(5713),u=n(8891),l=n(5592),d=n(7109),f=n(2212),p=n(3593),v=n(3109),h=n(7887),m=n(6242),g=n(3668),y=function(){var e=document.getElementById(p.uK);return e&&e.contentDocument},b=function(){var e=(y()||document).documentElement,t=(0,s.eJ)({width:(null==e?void 0:e.clientWidth)||0,height:(null==e?void 0:e.clientHeight)||0}),n=(0,o.Z)(t,2),r=n[0],i=n[1];return(0,s.d4)((function(){var e=function(){var e=(y()||document).documentElement;i({width:e.clientWidth,height:e.clientHeight})};return window.addEventListener("resize",e,{passive:!0}),window.top&&(window.top.addEventListener("load",e),window.top.addEventListener(v.tP,e)),function(){window.removeEventListener("resize",e),window.top&&(window.top.removeEventListener("load",e),window.top.removeEventListener(v.tP,e))}}),[e]),r},w=function(){var e=(0,l.Q)((function(e){return e.app.org.widgetSettings})),t=(0,l.Q)((function(e){return e.app.pageWidgetSettings})),n=(0,l.Q)((function(e){return e.app.options}));return(0,s.Ye)((function(){return Object.assign(Object.assign(Object.assign({},e),t),n)}),[e,t,n])},_=function(e){var t=(0,s.sO)(e);return(0,s.d4)((function(){t.current=e}),[e]),t},S=function(){var e=(0,l.Q)((function(e){return e.app})),t=e.stage,n=e.org,r=w(),o=r.hidden,i=r.hideConditions,a=(0,l.Q)((function(e){return e.chat})).isChatExpanded;if(t!==d.Hf.NEED_HELP||a)return!1;if(i){if(i.includes(d.QO.OFF_HOURS)&&!n.isWorkingHours)return!0;if(i.includes(d.QO.NONE_ONLINE)&&!n.available)return!0;if(i.includes(d.QO.BUSY)&&n.busy)return!0}return o},E=function(){var e=(0,l.Q)((function(e){return e.app.org.id}));return"https://www.servicebell.com?referrer=".concat(e)};function C(e){var t=(0,s.sO)(!0);(0,s.d4)((function(){t.current?t.current=!1:(0,c.Tm)(e?"sb:collapse":"sb:expand")}),[e])}function k(){var e=(0,s.eJ)(Object.assign({},u.rS)),t=(0,o.Z)(e,2),n=t[0],r=t[1],i=(0,l.Q)((function(e){return e.app.org.widgetSettings})),a=i.color,c=i.bgColor;return(0,s.d4)((function(){r(Object.assign({},u.rS))}),[a,c]),n}function I(){var e=w().copy;return(0,s.Ye)((function(){var t=(0,f.E_)(),n={};return Object.keys(t).forEach((function(r){var o=r,i=e[o]||t[o];n[o]=(0,f.Tu)(i)})),n}),[e])}function T(e){var t=(0,s.eJ)(),n=(0,o.Z)(t,2),r=n[0],i=n[1],a=(0,l.Q)(h.Dg),c=(0,l.Q)((function(e){return e.chat.isChatExpanded}));return(0,s.d4)((function(){e!==d.Hf.NEED_HELP||c?a.id&&i(a):i(void 0)}),[e,c,a]),a.id?a:r}function O(){var e=w().disableMobile;return(0,s.Ye)((function(){return m.isMobileDevice&&e&&window.screen.width<450}),[e])}var x=function(e){var t=(0,s.eJ)(),n=(0,o.Z)(t,2),i=n[0],c=n[1],u=(0,s.eJ)(!1),l=(0,o.Z)(u,2),d=l[0],f=l[1],p=(0,s.eJ)(!1),v=(0,o.Z)(p,2),h=v[0],m=v[1],g=(0,s.eJ)(""),y=(0,o.Z)(g,2),b=y[0],w=y[1],_=(0,s.I4)((0,r.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(!0),t.t0=c,t.next=5,e();case 5:t.t1=t.sent.data,(0,t.t0)(t.t1),m(!0),t.next=13;break;case 10:t.prev=10,t.t2=t.catch(0),w("".concat(t.t2));case 13:return t.prev=13,f(!1),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])}))),[e]);return(0,s.d4)((function(){_()}),[_]),{data:i,isLoading:d,hasLoaded:h,error:b,loadData:_}},A={url:"",expireTime:0},D=function(e,t){return"sbuem:".concat(e,":").concat(t)},R=function(e,t,n){var r=JSON.stringify(n);localStorage.setItem(D(e,t),r)},L=function(e,t){var n=(0,l.Q)((function(e){return e.realtime})).clientKey,i=(0,s.eJ)(function(e,t){try{var n=localStorage.getItem(D(e,t)),r=JSON.parse(n||"{}");if(r.url&&r.expireTime)return r}catch(e){console.log("Could not load LS key for expiring media")}return A}(e,t)),c=(0,o.Z)(i,2),u=c[0],d=c[1],f=(0,s.I4)((0,r.Z)(a().mark((function r(){var o,i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,(0,g.EV)({clientKey:n,type:e,id:t});case 4:o=r.sent,i={url:o.data.url,expireTime:Date.now()+Math.round(1e3*Math.max(1,o.data.expireSeconds-5))},d(i),R(e,t,i);case 8:case"end":return r.stop()}}),r)}))),[e,t,n]);return(0,s.d4)((function(){u.url&&Date.now()>u.expireTime&&f(),u.url||f()}),[f,u.url,u.expireTime]),u}},3109:(e,t,n)=>{"use strict";n.d(t,{Vz:()=>y,qr:()=>r,tP:()=>g});var r,o=n(5861),i=n(4687),a=n.n(i),s=n(9046),c=n(7220),u=n(2611),l=n(2795),d=n(3593),f=n(1088),p=n(6688),v=n(8477),h=(0,l.U)("iframe"),m="https://cdn.servicebell.com/main.js";!function(e){e.frameFocus="sbiframefocus",e.frameMousemove="sbiframemousemove",e.frameKeydown="sbiframekeydown",e.frameScroll="sbiframescroll"}(r||(r={}));var g="sbiframeloaded",y=function(e){return new Promise((function(t){if(document.getElementById(d.uK))return h.warn("Attempted to create iframe, but it is already created"),void t();var n=document.createElement("div");n.setAttribute("id",d.Hb);var i=document.createElement("iframe");n.prepend(i),i.setAttribute("class",d.uK),i.setAttribute("id",d.uK),i.setAttribute("frameBorder","0"),i.setAttribute("allow","fullscreen"),i.setAttribute("src",window.location.href),h.debug("Set Iframe src ".concat(window.location.href)),document.body.prepend(n);var l=document.body.getAttribute("id");document.body.setAttribute("id","svb-top-body"),i.addEventListener("load",(function r(){if(i.contentWindow){try{i.contentWindow.scroll(0,window.scrollY)}catch(e){if("SecurityError"===e.name)return h.warn("Iframe failed, will fallback to retrigger mode"),i.remove(),n.remove(),l?document.body.setAttribute("id",l):document.body.removeAttribute("id"),c.ZP.dispatch((0,u.c)()),void t()}!function(){var t=[];document.body.childNodes.forEach((function(n){var r=n;r.id&&[e,d.Hb].includes(r.id)||t.push(r)}));var n=[];document.head.childNodes.forEach((function(e){var t=e,r=!t.src||t.src!==m;(!t.id||"svb-styles"!==t.id)&&r&&n.push(t)})),t.forEach((function(e){document.body.contains(e)&&document.body.removeChild(e)})),n.forEach((function(e){document.head.contains(e)&&document.head.removeChild(e)}))}();var o="margin: 0; overflow: hidden; width: 100vw; height: 100vh;";document.body.setAttribute("style",o),document.body.setAttribute("class",""),i.setAttribute("class","".concat(d.uK," ").concat(d.uK,"--loaded")),i.removeEventListener("load",r),h.debug("Iframe initialized and loaded ".concat(i.contentWindow.location.href)),t();var a=document.body.getBoundingClientRect().top;0!==a&&document.body.setAttribute("style","".concat(o," position: relative; top: ").concat(-a,"px;"))}})),i.addEventListener("load",(function(){(0,o.Z)(a().mark((function e(){var t,n,r,o,u,l,d,S;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.contentWindow&&i.contentDocument){e.next=2;break}return e.abrupt("return");case 2:if(h.info("Iframe has loaded ".concat(i.contentWindow.location.href)),c.ZP.getState().app.options.skipBlankifyExternalLinks?h.debug("Skipping blankification of external links due to app.options setting"):(0,f.a)(!0),i.contentWindow.ServiceBell){e.next=9;break}return h.warn("Iframe just loaded a page without ServiceBell, attempting to inject & init"),e.next=8,(0,s.ve)(m,i.contentDocument);case 8:i.contentWindow.ServiceBell.init("",{mode:"iframe-immediate"});case 9:return e.next=11,(0,s.yY)();case 11:window.history.replaceState({},"",i.contentWindow.location.href),document.title=i.contentDocument.title,l='link[rel="icon"], link[rel="shortcut icon"]',d=document.querySelector(l),(S=i.contentDocument.querySelector(l))&&document.head.appendChild(S),d&&d.remove(),window.dispatchEvent(new CustomEvent(g,{detail:{href:i.contentWindow.location.href,title:i.contentDocument.title}})),null===(t=i.contentWindow)||void 0===t||t.addEventListener("focus",y),null===(n=i.contentWindow)||void 0===n||n.addEventListener("mousemove",w),null===(r=i.contentWindow)||void 0===r||r.addEventListener("keydown",b),null===(o=i.contentWindow)||void 0===o||o.addEventListener("scroll",_),null===(u=i.contentWindow)||void 0===u||u.addEventListener("beforeunload",(function(){if(c.ZP.getState().realtime.isRrwebRecording){var e=(0,v.lz)();e&&(0,p.if)(e)}}));case 24:case"end":return e.stop()}}),e)})))()}));var y=function(){return window.dispatchEvent(new CustomEvent(r.frameFocus))},b=function(){return window.dispatchEvent(new CustomEvent(r.frameKeydown))},w=function(){return window.dispatchEvent(new CustomEvent(r.frameMousemove))},_=function(){return window.dispatchEvent(new CustomEvent(r.frameScroll,{detail:{window:i.contentWindow}}))}}))}},32:(e,t,n)=>{"use strict";n.d(t,{Z:()=>bn});var r=n(2982),o=n(1002),i={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Object.prototype.hasOwnProperty.call(i,e)||(e=i.log),a[e].apply(a,t)};function s(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,n)}catch(e){a.error(t,e)}}}a.debug=console.debug.bind(console),a.log=console.log.bind(console),a.info=console.info.bind(console),a.warn=console.warn.bind(console),a.error=console.error.bind(console);var c,u=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},l=!1;function d(e){l=e}function f(e,t,n){var r=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=c?p(r):r;return n.apply(this,e)}}function p(e){return function(){return v(e,this,arguments)}}function v(e,t,n){try{return e.apply(t,n)}catch(e){if(h(i.error,e),c)try{c(e)}catch(e){h(i.error,e)}}}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];l&&a.apply(void 0,u([e,"[MONITOR]"],t,!1))}var m=1e3;function g(e,t,n){var r,o,i=!n||void 0===n.leading||n.leading,a=!n||void 0===n.trailing||n.trailing,s=!1;return{throttled:function(){for(var n=[],c=0;c<arguments.length;c++)n[c]=arguments[c];s?r=n:(i?e.apply(void 0,n):r=n,s=!0,o=setTimeout((function(){a&&r&&e.apply(void 0,r),s=!1,r=void 0}),t))},cancel:function(){clearTimeout(o),s=!1,r=void 0}}}function y(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})),e}function b(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,b)}function w(e){return 0!==e&&100*Math.random()<=e}function _(){}function S(e,t,n){if("object"!=typeof e||null===e)return JSON.stringify(e);var r=E(Object.prototype),o=E(Array.prototype),i=E(Object.getPrototypeOf(e)),a=E(e);try{return JSON.stringify(e,t,n)}catch(e){return"<error: unable to serialize object>"}finally{r(),o(),i(),a()}}function E(e){var t=e,n=t.toJSON;return n?(delete t.toJSON,function(){t.toJSON=n}):_}function C(e,t){return-1!==e.indexOf(t)}function k(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach((function(e){return t.push(e)}));else for(var n=0;n<e.length;n++)t.push(e[n]);return t}function I(e){return function(e){return"number"==typeof e}(e)&&e>=0&&e<=100}function T(e){return Object.keys(e).map((function(t){return e[t]}))}function O(e,t){return e.slice(0,t.length)===t}function x(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}function A(e,t,n){void 0===n&&(n="");var r=e.charCodeAt(t-1),o=r>=55296&&r<=56319?t+1:t;return e.length<=o?e:"".concat(e.slice(0,o)).concat(n)}function D(e,t,n,r){return R(e,[t],n,r)}function R(e,t,n,r){var o=void 0===r?{}:r,i=o.once,a=o.capture,s=o.passive,c=p(i?function(e){l(),n(e)}:n),u=s?{capture:a,passive:s}:a;t.forEach((function(t){return e.addEventListener(t,c,u)}));var l=function(){return t.forEach((function(t){return e.removeEventListener(t,c,u)}))};return{stop:l}}function L(e,t,n){if(void 0===n&&(n=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var n=e.has(t);return n||e.add(t),n}}}var t=[];return{hasAlreadyBeenSeen:function(e){var n=t.indexOf(e)>=0;return n||t.push(e),n}}}()),void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var r=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,r)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var o=Array.isArray(e)?e:[],i=0;i<t.length;++i)o[i]=L(o[i],t[i],n);return o}var a,s="object"==(null===(a=e)?"null":Array.isArray(a)?"array":typeof a)?e:{};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(s[c]=L(s[c],t[c],n));return s}}function P(e){return L(void 0,e)}function M(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0,o=t;r<o.length;r++){var i=o[r];null!=i&&(e=L(e,i))}return e}function N(){var e={};return{get:function(){return e},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},set:function(t){e=t},getContext:function(){return P(e)},setContext:function(t){e=P(t)},setContextProperty:function(t,n){e[t]=P(n)},removeContextProperty:function(t){delete e[t]},clearContext:function(){e={}}}}var j,W,U,V,F=function(){function e(){this.buffer=[]}return e.prototype.add=function(e){this.buffer.push(e)>500&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach((function(e){return e()})),this.buffer.length=0},e}();function B(){return(new Date).getTime()}function Z(){return B()}function H(){return performance.now()}function G(){return{relative:H(),timeStamp:Z()}}function K(e,t){return t-e}function q(){return void 0===j&&(j=performance.timing.navigationStart),j}function z(){var e=x().DatadogEventBridge;if(e)return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,n){e.send(JSON.stringify({eventType:t,event:n}))}}}function Y(e){var t;void 0===e&&(e=null===(t=x().location)||void 0===t?void 0:t.hostname);var n=z();return!!n&&n.getAllowedWebViewHosts().some((function(t){return e===t||(n=e,r=".".concat(t),n.slice(-r.length)===r);var n,r}))}function X(e,t,n,r){var o=new Date;o.setTime(o.getTime()+n);var i="expires=".concat(o.toUTCString()),a=r&&r.crossSite?"none":"strict",s=r&&r.domain?";domain=".concat(r.domain):"",c=r&&r.secure?";secure":"";document.cookie="".concat(e,"=").concat(t,";").concat(i,";path=/;samesite=").concat(a).concat(s).concat(c)}function J(e){return function(e,t){var n=new RegExp("(?:^|;)\\s*".concat(t,"\\s*=\\s*([^;]+)")).exec(e);return n?n[1]:void 0}(document.cookie,e)}function $(e,t){X(e,"",0,t)}function Q(e){return function(e,t){if(function(){if(void 0!==V)return V;try{var e=new URL("http://test/path");return V="http://test/path"===e.href}catch(e){V=!1}return V}())return void 0!==t?new URL(e,t):new URL(e);if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var n=document,r=n.createElement("a");if(void 0!==t){var o=(n=document.implementation.createHTMLDocument("")).createElement("base");o.href=t,n.head.appendChild(o),n.body.appendChild(r)}return r.href=e,r}(e,function(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)}(window.location)).href}var ee="datadoghq.com",te={logs:"logs",rum:"rum",sessionReplay:"session-replay"},ne={logs:"logs",rum:"rum",sessionReplay:"replay"};function re(e,t,n){var r=e.site,o=void 0===r?ee:r,i=e.clientToken,a=o.split("."),s=a.pop(),c="".concat(te[t],".browser-intake-").concat(a.join("-"),".").concat(s),u="https://".concat(c,"/api/v2/").concat(ne[t]),l=e.proxyUrl&&Q(e.proxyUrl);return{build:function(){var e="ddsource=browser"+"&ddtags=".concat(encodeURIComponent(["sdk_version:".concat("4.23.2")].concat(n).join(",")))+"&dd-api-key=".concat(i)+"&dd-evp-origin-version=".concat(encodeURIComponent("4.23.2"))+"&dd-evp-origin=browser"+"&dd-request-id=".concat(b());"rum"===t&&(e+="&batch_time=".concat(Z()));var r="".concat(u,"?").concat(e);return l?"".concat(l,"?ddforward=").concat(encodeURIComponent(r)):r},buildIntakeUrl:function(){return l?"".concat(l,"?ddforward"):u},endpointType:t}}var oe=/[^a-z0-9_:./-]/;function ie(e,t){var n=200-e.length-1;(t.length>n||oe.test(t))&&a.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var r=t.replace(/,/g,"_");return"".concat(e,":").concat(r)}function ae(e){var t,n,r;if(e&&e.clientToken)if(void 0===e.sampleRate||I(e.sampleRate))if(void 0===e.telemetrySampleRate||I(e.telemetrySampleRate)){var o;if(void 0===e.telemetryConfigurationSampleRate||I(e.telemetryConfigurationSampleRate))return o=e.enableExperimentalFeatures,Array.isArray(o)&&(U||(U=new Set(o)),o.filter((function(e){return"string"==typeof e})).forEach((function(e){C(e,"-")&&a.warn("please use snake case for '".concat(e,"'")),U.add(e)}))),y({beforeSend:e.beforeSend&&s(e.beforeSend,"beforeSend threw an error:"),cookieOptions:se(e),sampleRate:null!==(t=e.sampleRate)&&void 0!==t?t:100,telemetrySampleRate:null!==(n=e.telemetrySampleRate)&&void 0!==n?n:20,telemetryConfigurationSampleRate:null!==(r=e.telemetryConfigurationSampleRate)&&void 0!==r?r:5,service:e.service,silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144},function(e){var t=function(e){var t=e.env,n=e.service,r=e.version,o=e.datacenter,i=[];return t&&i.push(ie("env",t)),n&&i.push(ie("service",n)),r&&i.push(ie("version",r)),o&&i.push(ie("datacenter",o)),i}(e),n=function(e,t){return{logsEndpointBuilder:re(e,"logs",t),rumEndpointBuilder:re(e,"rum",t),sessionReplayEndpointBuilder:re(e,"sessionReplay",t)}}(e,t),r=T(n).map((function(e){return e.buildIntakeUrl()})),o=function(e,t,n){if(e.replica){var r=y({},e,{site:ee,clientToken:e.replica.clientToken}),o={logsEndpointBuilder:re(r,"logs",n),rumEndpointBuilder:re(r,"rum",n)};return t.push.apply(t,T(o).map((function(e){return e.buildIntakeUrl()}))),y({applicationId:e.replica.applicationId},o)}}(e,r,t);return y({isIntakeUrl:function(e){return r.some((function(t){return 0===e.indexOf(t)}))},replica:o,site:e.site||ee},n)}(e));a.error("Telemetry Configuration Sample Rate should be a number between 0 and 100")}else a.error("Telemetry Sample Rate should be a number between 0 and 100");else a.error("Sample Rate should be a number between 0 and 100");else a.error("Client Token is not configured, we will not send any data.")}function se(e){var t={};return t.secure=function(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}(e),t.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===W){for(var e="dd_site_test_".concat(b()),t=window.location.hostname.split("."),n=t.pop();t.length&&!J(e);)X(e,"test",1e3,{domain:n="".concat(t.pop(),".").concat(n)});$(e,{domain:n}),W=n}return W}()),t}var ce="?";function ue(e){var t=[],n=ye(e,"stack"),r=String(e);return n&&O(n,r)&&(n=n.slice(r.length)),n&&n.split("\n").forEach((function(e){var n=function(e){var t=fe.exec(e);if(t){var n=t[2]&&0===t[2].indexOf("native"),r=t[2]&&0===t[2].indexOf("eval"),o=pe.exec(t[2]);return r&&o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3]),{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||ce,line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}}(e)||function(e){var t=ve.exec(e);if(t)return{args:[],column:t[3]?+t[3]:void 0,func:ce,line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){var t=he.exec(e);if(t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||ce,line:+t[3],url:t[2]}}(e)||function(e){var t=me.exec(e);if(t){var n=t[3]&&t[3].indexOf(" > eval")>-1,r=ge.exec(t[3]);return n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||ce,line:t[4]?+t[4]:void 0,url:t[3]}}}(e);n&&(!n.func&&n.line&&(n.func=ce),t.push(n))})),{message:ye(e,"message"),name:ye(e,"name"),stack:t}}var le="((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\\w+\\.|\\/).*?)",de="(?::(\\d+))",fe=new RegExp("^\\s*at (.*?) ?\\(".concat(le).concat(de,"?").concat(de,"?\\)?\\s*$"),"i"),pe=new RegExp("\\((\\S*)".concat(de).concat(de,"\\)")),ve=new RegExp("^\\s*at ?".concat(le).concat(de,"?").concat(de,"??\\s*$"),"i"),he=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,me=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,ge=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function ye(e,t){if("object"==typeof e&&e&&t in e){var n=e[t];return"string"==typeof n?n:void 0}}var be="agent",we="console",_e="logger",Se="network",Ee="source",Ce="report";function ke(e){var t=Ie(e);return e.stack.forEach((function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"(".concat(e.args.join(", "),")"):"",o=e.line?":".concat(e.line):"",i=e.line&&e.column?":".concat(e.column):"";t+="\n  at ".concat(n).concat(r," @ ").concat(e.url).concat(o).concat(i)})),t}function Ie(e){return"".concat(e.name||"Error",": ").concat(e.message)}function Te(){var e,t=new Error;if(!t.stack)try{throw t}catch(e){}return v((function(){var n=ue(t);n.stack=n.stack.slice(2),e=ke(n)})),e}function Oe(e,t){for(var n=e,r=[];(null==n?void 0:n.cause)instanceof Error&&r.length<10;){var o=ue(n.cause);r.push({message:n.cause.message,source:t,type:null==o?void 0:o.name,stack:o&&ke(o)}),n=n.cause}return r.length?r:void 0}var xe=function(){function e(e){this.onFirstSubscribe=e,this.observers=[]}return e.prototype.subscribe=function(e){var t=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(e),{unsubscribe:function(){t.observers=t.observers.filter((function(t){return e!==t})),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},e.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))},e}();function Ae(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=new xe((function(){var t=e.map((function(e){return e.subscribe((function(e){return n.notify(e)}))}));return function(){return t.forEach((function(e){return e.unsubscribe()}))}}));return n}var De={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function Re(e,t,n,r,o){return n&&ke({name:e,message:t,stack:[{func:"?",url:n,line:r,column:o}]})}function Le(e,t,n){return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every((function(e){return C(t,e)}))?"all"===e?t:(r=e,o=new Set,r.forEach((function(e){return o.add(e)})),k(o)):void a.error("".concat(n,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'));var r,o}var Pe={debug:"debug",error:"error",info:"info",warn:"warn"},Me="console",Ne="http",je=Object.keys(Pe),We=function(){function e(e,t,n,r,o){void 0===n&&(n=Ne),void 0===r&&(r=Pe.debug),void 0===o&&(o={}),this.handleLogStrategy=e,this.handlerType=n,this.level=r,this.contextManager=N(),this.contextManager.set(y({},o,t?{logger:{name:t}}:void 0))}return e.prototype.log=function(e,t,n){void 0===n&&(n=Pe.info),this.handleLogStrategy({message:e,context:P(t),status:n},this)},e.prototype.debug=function(e,t){this.log(e,t,Pe.debug)},e.prototype.info=function(e,t){this.log(e,t,Pe.info)},e.prototype.warn=function(e,t){this.log(e,t,Pe.warn)},e.prototype.error=function(e,t){var n={error:{origin:_e}};this.log(e,M(n,t),Pe.error)},e.prototype.setContext=function(e){this.contextManager.set(e)},e.prototype.getContext=function(){return this.contextManager.get()},e.prototype.addContext=function(e,t){this.contextManager.add(e,t)},e.prototype.removeContext=function(e){this.contextManager.remove(e)},e.prototype.setHandler=function(e){this.handlerType=e},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(e){this.level=e},e.prototype.getLevel=function(){return this.level},function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);i>3&&a&&Object.defineProperty(t,n,a)}([f],e.prototype,"log",null),e}();function Ue(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||J("datadog-synthetics-injects-rum"))}function Ve(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||J("datadog-synthetics-result-id");return"string"==typeof e?e:void 0}var Fe,Be="configuration",Ze=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","http://localhost","<anonymous>"],He=["ddog-gov.com"],Ge={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1};function Ke(e,t){h(i.debug,e,t),ze(y({type:"log",message:e,status:"debug"},t))}function qe(e){ze(y({type:"log",status:"error"},function(e){if(e instanceof Error){var t=ue(e);return{error:{kind:t.name,stack:ke(Ye(t))},message:t.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught ".concat(S(e))}}(e)))}function ze(e){Fe&&Ge.sentEventCount<Ge.maxEventsPerPage&&(Ge.sentEventCount+=1,Fe(e))}function Ye(e){return e.stack=e.stack.filter((function(e){return!e.url||Ze.some((function(t){return O(e.url,t)}))})),e}var Xe=/[^\u0000-\u007F]/,Je=function(){function e(e,t,n,r,o,i){void 0===i&&(i=_),this.request=e,this.batchMessagesLimit=t,this.batchBytesLimit=n,this.messageBytesLimit=r,this.flushTimeout=o,this.beforeUnloadCallback=i,this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0,this.setupFlushOnExit(),this.flushPeriodically()}return e.prototype.add=function(e){this.addOrUpdate(e)},e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},e.prototype.flush=function(e){if(void 0===e&&(e=this.request.send),0!==this.bufferMessagesCount){var t=this.pushOnlyBuffer.concat(T(this.upsertBuffer)),n=this.bufferBytesCount;this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0,e({data:t.join("\n"),bytesCount:n})}},e.prototype.flushOnExit=function(){this.flush(this.request.sendOnExit)},e.prototype.computeBytesCount=function(e){return Xe.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length},e.prototype.addOrUpdate=function(e,t){var n=this.process(e),r=n.processedMessage,o=n.messageBytesCount;o>=this.messageBytesLimit?a.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB.")):(this.hasMessageFor(t)&&this.remove(t),this.willReachedBytesLimitWith(o)&&this.flush(),this.push(r,o,t),this.isFull()&&this.flush())},e.prototype.process=function(e){var t=S(e);return{processedMessage:t,messageBytesCount:this.computeBytesCount(t)}},e.prototype.push=function(e,t,n){this.bufferMessagesCount>0&&(this.bufferBytesCount+=1),void 0!==n?this.upsertBuffer[n]=e:this.pushOnlyBuffer.push(e),this.bufferBytesCount+=t,this.bufferMessagesCount+=1},e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=this.computeBytesCount(t);this.bufferBytesCount-=n,this.bufferMessagesCount-=1,this.bufferMessagesCount>0&&(this.bufferBytesCount-=1)},e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},e.prototype.willReachedBytesLimitWith=function(e){return this.bufferBytesCount+e+1>=this.batchBytesLimit},e.prototype.isFull=function(){return this.bufferMessagesCount===this.batchMessagesLimit||this.bufferBytesCount>=this.batchBytesLimit},e.prototype.flushPeriodically=function(){var e=this;setTimeout(p((function(){e.flush(),e.flushPeriodically()})),this.flushTimeout)},e.prototype.setupFlushOnExit=function(){var e=this;navigator.sendBeacon&&(D(window,"beforeunload",this.beforeUnloadCallback),D(document,"visibilitychange",(function(){"hidden"===document.visibilityState&&e.flushOnExit()})),D(window,"beforeunload",(function(){return e.flushOnExit()})))},e}();function $e(e,t,n,r,o){0===t.transportStatus&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?et(e,t,n,{onSuccess:function(){return tt(0,t,n,r,o)},onFailure:function(){t.queuedPayloads.enqueue(e),Qe(t,n,r,o)}}):t.queuedPayloads.enqueue(e)}function Qe(e,t,n,r){2===e.transportStatus&&setTimeout(p((function(){var o=e.queuedPayloads.first();o||Ke("no payload to retry",{debug:{queue:{size:e.queuedPayloads.size(),is_full:e.queuedPayloads.isFull(),bytes_count:e.queuedPayloads.bytesCount},transport_status:e.transportStatus,bandwidth:{ongoing_request_count:e.bandwidthMonitor.ongoingRequestCount,ongoing_byte_count:e.bandwidthMonitor.ongoingByteCount}}}),et(o,e,t,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=1e3,tt(1,e,t,n,r)},onFailure:function(){e.currentBackoffTime=Math.min(6e4,2*e.currentBackoffTime),Qe(e,t,n,r)}})})),e.currentBackoffTime)}function et(e,t,n,r){var o=r.onSuccess,i=r.onFailure;t.bandwidthMonitor.add(e);var a=[];n(e,(function(n){a.push(n),a.length>1&&Ke("response already received",{debug:{responses:a}}),t.bandwidthMonitor.remove(e),function(e){return 0===e.status||408===e.status||429===e.status||e.status>=500}(n)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,i()):(t.transportStatus=0,o())}))}function tt(e,t,n,r,o){0===e&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(o({message:"Reached max ".concat(r," events size queued for upload: ").concat(3,"MiB"),source:be,startClocks:G()}),t.queueFullReported=!0);var i=t.queuedPayloads;for(t.queuedPayloads=nt();i.size()>0;)$e(i.dequeue(),t,n,r,o)}function nt(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=3145728}}}var rt=!1;function ot(e,t,n){var r=new XMLHttpRequest;r.open("POST",e,!0),r.send(t),r.addEventListener("loadend",p((function(){null==n||n({status:r.status,api:"xhr"})})))}function it(e,t,n,r){var o,i=a(t);function a(t){return new Je(function(e,t,n){var r={transportStatus:0,currentBackoffTime:1e3,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=81920&&this.ongoingRequestCount<32},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:nt(),queueFullReported:!1},o=function(n,r){return function(e,t,n,r){var o=n.data,i=n.bytesCount,a=e.build();(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}})()&&i<t?fetch(a,{method:"POST",body:o,keepalive:!0}).then(p((function(e){return null==r?void 0:r({status:e.status,api:"fetch"})})),p((function(){ot(a,o,r)}))):ot(a,o,r)}(e,t,n,r)};return{send:function(t){$e(t,r,o,e.endpointType,n)},sendOnExit:function(n){!function(e,t,n){var r=n.data,o=n.bytesCount,i=e.build();if(navigator.sendBeacon&&o<t)try{if(navigator.sendBeacon(i,r))return}catch(e){!function(e){rt||(rt=!0,qe(e))}(e)}ot(i,r)}(e,t,n)}}}(t,e.batchBytesLimit,n),e.batchMessagesLimit,e.batchBytesLimit,e.messageBytesLimit,e.flushTimeout)}return r&&(o=a(r)),{add:function(e,t){void 0===t&&(t=!0),i.add(e),o&&t&&o.add(e)}}}var at,st=1/0,ct=function(){function e(e){var t=this;this.expireDelay=e,this.entries=[],this.clearOldContextsInterval=setInterval((function(){return t.clearOldContexts()}),6e4)}return e.prototype.add=function(e,t){var n=this,r={context:e,startTime:t,endTime:st,remove:function(){var e=n.entries.indexOf(r);e>=0&&n.entries.splice(e,1)},close:function(e){r.endTime=e}};return this.entries.unshift(r),r},e.prototype.find=function(e){void 0===e&&(e=st);for(var t=0,n=this.entries;t<n.length;t++){var r=n[t];if(r.startTime<=e){if(e<=r.endTime)return r.context;break}}},e.prototype.closeActive=function(e){var t=this.entries[0];t&&t.endTime===st&&t.close(e)},e.prototype.findAll=function(e){return void 0===e&&(e=st),this.entries.filter((function(t){return t.startTime<=e&&e<=t.endTime})).map((function(e){return e.context}))},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){clearInterval(this.clearOldContextsInterval)},e.prototype.clearOldContexts=function(){for(var e=H()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<e;)this.entries.pop()},e}(),ut=9e5,lt=/^([a-z]+)=([a-z0-9-]+)$/,dt="_dd_s",ft=[];function pt(e,t){var n;if(void 0===t&&(t=0),at||(at=e),e===at)if(t>=100)mt();else{var r,o=bt();if(vt()){if(o.lock)return void ht(e,t);if(r=b(),o.lock=r,yt(o,e.options),(o=bt()).lock!==r)return void ht(e,t)}var i=e.process(o);if(vt()&&(o=bt()).lock!==r)ht(e,t);else{if(i&&gt(i,e.options),vt()&&(!i||!wt(i))){if((o=bt()).lock!==r)return void ht(e,t);delete o.lock,yt(o,e.options),i=o}null===(n=e.after)||void 0===n||n.call(e,i||o),mt()}}else ft.push(e)}function vt(){return!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent)}function ht(e,t){setTimeout(p((function(){pt(e,t+1)})),10)}function mt(){at=void 0;var e=ft.shift();e&&pt(e)}function gt(e,t){wt(e)?function(e){X(dt,"",0,e)}(t):(e.expire=String(B()+ut),yt(e,t))}function yt(e,t){X(dt,function(e){return(t=e,Object.keys(t).map((function(e){return[e,t[e]]}))).map((function(e){var t=e[0],n=e[1];return"".concat(t,"=").concat(n)})).join("&");var t}(e),ut,t)}function bt(){var e=J(dt),t={};return function(e){return void 0!==e&&(-1!==e.indexOf("&")||lt.test(e))}(e)&&e.split("&").forEach((function(e){var n=lt.exec(e);if(null!==n){var r=n[1],o=n[2];t[r]=o}})),t}function wt(e){return t=e,0===Object.keys(t).length;var t}var _t,St=[];function Et(e,t,n){!function(e){var t=J(dt),n=J("_dd"),r=J("_dd_r"),o=J("_dd_l");if(!t){var i={};n&&(i.id=n),o&&/^[01]$/.test(o)&&(i.logs=o),r&&/^[012]$/.test(r)&&(i.rum=r),gt(i,e)}}(e);var r=function(e,t,n){var r,o=new xe,i=new xe,a=setInterval(p((function(){pt({options:e,process:function(e){return l(e)?void 0:{}},after:c})})),1e3),s=l(r=bt())?r:{};function c(e){return l(e)||(e={}),u()&&(function(e){return s.id!==e.id||s[t]!==e[t]}(e)?(s={},i.notify()):s=e),e}function u(){return void 0!==s[t]}function l(e){return(void 0===e.created||B()-Number(e.created)<144e5)&&(void 0===e.expire||B()<Number(e.expire))}return{expandOrRenewSession:g(p((function(){var r;pt({options:e,process:function(e){var o=c(e);return r=function(e){var r=n(e[t]),o=r.trackingType,i=r.isTracked;return e[t]=o,i&&!e.id&&(e.id=b(),e.created=String(B())),i}(o),o},after:function(e){r&&!u()&&function(e){s=e,o.notify()}(e),s=e}})})),1e3).throttled,expandSession:function(){pt({options:e,process:function(e){return u()?c(e):void 0}})},getSession:function(){return s},renewObservable:o,expireObservable:i,stop:function(){clearInterval(a)}}}(e,t,n);St.push((function(){return r.stop()}));var o,i=new ct(144e5);function a(){return{id:r.getSession().id,trackingType:r.getSession()[t]}}return St.push((function(){return i.stop()})),r.renewObservable.subscribe((function(){i.add(a(),H())})),r.expireObservable.subscribe((function(){i.closeActive(H())})),r.expandOrRenewSession(),i.add(a(),[0,q()][0]),o=R(window,["click","touchstart","keydown","scroll"],(function(){return r.expandOrRenewSession()}),{capture:!0,passive:!0}).stop,St.push(o),function(e){var t=p((function(){"visible"===document.visibilityState&&r.expandSession()})),n=D(document,"visibilitychange",t).stop;St.push(n);var o=setInterval(t,6e4);St.push((function(){clearInterval(o)}))}(),{findActiveSession:function(e){return i.find(e)},renewObservable:r.renewObservable,expireObservable:r.expireObservable}}function Ct(e){return w(e.sampleRate)?"1":"0"}var kt=((_t={})[Pe.debug]=0,_t[Pe.info]=1,_t[Pe.warn]=2,_t[Pe.error]=3,_t);function It(e,t,n){var r=n.getHandler(),o=Array.isArray(r)?r:[r];return kt[e]>=kt[n.getLevel()]&&C(o,t)}var Tt=!1;function Ot(e){var t,n=window;if(Ue()){var r=o(n.DD_RUM_SYNTHETICS);return r||Tt||(Tt=!0,Ke("Logs sent before RUM is injected by the synthetics worker",{testId:(t=window._DATADOG_SYNTHETICS_PUBLIC_ID||J("datadog-synthetics-public-id"),"string"==typeof t?t:void 0),resultId:Ve()})),r}return o(n.DD_RUM);function o(t){if(t&&t.getInternalContext)return t.getInternalContext(e)}}var xt,At={};function Dt(e,t,n){var r,o=e.map((function(e){return function(e){return"string"==typeof e?e:e instanceof Error?Ie(ue(e)):S(e,void 0,2)}(e)})).join(" ");if(t===i.error){var a=function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(r instanceof Error)return r}}(e);r=a?ke(ue(a)):void 0,o="console error: ".concat(o)}return{api:t,message:o,stack:r,handlingStack:n}}var Rt,Lt,Pt=((xt={})[i.log]=Pe.info,xt[i.debug]=Pe.debug,xt[i.info]=Pe.info,xt[i.warn]=Pe.warn,xt[i.error]=Pe.error,xt),Mt=((Rt={})[De.cspViolation]=Pe.error,Rt[De.intervention]=Pe.error,Rt[De.deprecation]=Pe.warn,Rt);function Nt(e,t,n){var r=e[t],o=n(r),i=function(){if("function"==typeof o)return o.apply(this,arguments)};return e[t]=i,{stop:function(){e[t]===i?e[t]=r:o=r}}}function jt(e,t,n){var r=n.before,o=n.after;return Nt(e,t,(function(e){return function(){var t,n=arguments;return r&&v(r,this,n),"function"==typeof e&&(t=e.apply(this,n)),o&&v(o,this,n),t}}))}var Wt,Ut=new WeakMap;function Vt(){var e;return Lt||(e=new xe((function(){var t=jt(XMLHttpRequest.prototype,"open",{before:Ft}).stop,n=jt(XMLHttpRequest.prototype,"send",{before:function(){Bt.call(this,e)}}).stop,r=jt(XMLHttpRequest.prototype,"abort",{before:Zt}).stop;return function(){t(),n(),r()}})),Lt=e),Lt}function Ft(e,t){Ut.set(this,{state:"open",method:e,url:Q(String(t))})}function Bt(e){var t=this,n=Ut.get(this);if(n){var r=n;r.state="start",r.startTime=H(),r.startClocks=G(),r.isAborted=!1,r.xhr=this;var o=!1,i=jt(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&a()}}).stop,a=p((function(){if(t.removeEventListener("loadend",a),i(),!o){o=!0;var s=n;s.state="complete",s.duration=K(r.startClocks.timeStamp,Z()),s.status=t.status,e.notify(y({},s))}}));this.addEventListener("loadend",a),e.notify(r)}}function Zt(){var e=Ut.get(this);e&&(e.isAborted=!0)}function Ht(e,t,n){var r=n&&n.method||"object"==typeof t&&t.method||"GET",o=Q("object"==typeof t&&t.url||t),i={state:"start",init:n,input:t,method:r,startClocks:G(),url:o};return e.notify(i),i}function Gt(e,t,n){var r=function(t){var r=n;r.state="complete",r.duration=K(r.startClocks.timeStamp,Z()),"stack"in t||t instanceof Error?(r.status=0,r.isAborted=t instanceof DOMException&&t.code===DOMException.ABORT_ERR,r.error=t,e.notify(r)):"status"in t&&(r.response=t,r.responseType=t.type,r.status=t.status,r.isAborted=!1,e.notify(r))};t.then(p(r),p(r))}function Kt(e,t){if(!e.forwardErrorsToLogs)return{stop:_};var n,r=Vt().subscribe((function(e){"complete"===e.state&&i("xhr",e)})),o=(Wt||(n=new xe((function(){if(window.fetch)return Nt(window,"fetch",(function(e){return function(t,r){var o,i=v(Ht,null,[n,t,r]);return i?(o=e.call(this,i.input,i.init),v(Gt,null,[n,o,i])):o=e.call(this,t,r),o}})).stop})),Wt=n),Wt).subscribe((function(e){"complete"===e.state&&i("fetch",e)}));function i(n,r){function o(e){t.notify(0,{rawLogsEvent:{message:"".concat(zt(n)," error ").concat(r.method," ").concat(r.url),date:r.startClocks.timeStamp,error:{origin:Se,stack:e||"Failed to load"},http:{method:r.method,status_code:r.status,url:r.url},status:Pe.error,origin:Se}})}e.isIntakeUrl(r.url)||!function(e){return 0===e.status&&"opaque"!==e.responseType}(r)&&!function(e){return e.status>=500}(r)||("xhr"in r?function(e,t,n){"string"==typeof e.response?n(qt(e.response,t)):n(e.response)}(r.xhr,e,o):r.response?function(e,t,n){window.TextDecoder?e.body?function(e,t,n){!function(e,t,n){var r=e.getReader(),o=[],i=0;function a(){var e;if(r.cancel().catch(_),1===o.length)e=o[0];else{e=new Uint8Array(i);var a=0;o.forEach((function(t){e.set(t,a),a+=t.length}))}n(void 0,e.slice(0,t),e.length>t)}!function e(){r.read().then(p((function(n){n.done?a():(o.push(n.value),(i+=n.value.length)>t?a():e())})),p((function(e){return n(e)})))}()}(e,t,(function(e,t,r){if(e)n(e);else{var o=(new TextDecoder).decode(t);r&&(o+="..."),n(void 0,o)}}))}(e.clone().body,t.requestErrorResponseLengthLimit,(function(e,t){n(e?"Unable to retrieve response: ".concat(e):t)})):n():e.clone().text().then(p((function(e){return n(qt(e,t))})),p((function(e){return n("Unable to retrieve response: ".concat(e))})))}(r.response,e,o):r.error&&function(e,t,n){n(qt(ke(ue(e)),t))}(r.error,e,o))}return{stop:function(){r.unsubscribe(),o.unsubscribe()}}}function qt(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}function zt(e){return"xhr"===e?"XHR":"Fetch"}var Yt=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function Xt(e){return t=function(t,n){e.notify(function(e){var t=e.stackTrace,n=e.originalError,r=e.handlingStack,o=e.startClocks,i=e.nonErrorPrefix,a=e.source,s=e.handling;return t&&(void 0!==t.message||n instanceof Error)?{startClocks:o,source:a,handling:s,originalError:n,message:t.message||"Empty message",stack:ke(t),handlingStack:r,type:t.name,causes:Oe(n,a)}:{startClocks:o,source:a,handling:s,originalError:n,message:"".concat(i," ").concat(S(n)),stack:"No stack, consider using an instance of Error",handlingStack:r,type:t&&t.name}}({stackTrace:t,originalError:n,startClocks:G(),nonErrorPrefix:"Uncaught",source:Ee,handling:"unhandled"}))},n=function(e){return jt(window,"onerror",{before:function(t,n,r,o,i){var a;if(i)a=ue(i),e(a,i);else{var s,c={url:n,column:o,line:r},u=t;if("[object String]"==={}.toString.call(t)){var l=Yt.exec(u);l&&(s=l[1],u=l[2])}e(a={name:s,message:"string"==typeof u?u:void 0,stack:[c]},t)}}})}(t).stop,r=function(e){return jt(window,"onunhandledrejection",{before:function(t){var n=t.reason||"Empty reason",r=ue(n);e(r,n)}})}(t).stop,{stop:function(){n(),r()}};var t,n,r}var Jt,$t,Qt,en=function(){function e(){this.callbacks={}}return e.prototype.notify=function(e,t){var n=this.callbacks[e];n&&n.forEach((function(e){return e(t)}))},e.prototype.subscribe=function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:function(){n.callbacks[e]=n.callbacks[e].filter((function(e){return t!==e}))}}},e}(),tn=function(e){var t,n,r=!1,o=N(),s={},u=function(){},l=new F,f=function(e,t,n,r){void 0===n&&(n=P(S())),void 0===r&&(r=Z()),l.add((function(){return f(e,t,n,r)}))},h=function(){},g=new We((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f.apply(void 0,e)}));function S(){return{view:{referrer:document.referrer,url:window.location.href},context:o.get()}}return t={logger:g,init:p((function(e){var t;if(Y()&&(e=function(e){return y({},e,{clientToken:"empty"})}(e)),function(e){return!r||(e.silentMultipleInit||a.error("DD_LOGS is already initialized."),!1)}(e)){var n=function(e){var t=ae(e),n=Le(e.forwardConsoleLogs,T(i),"Forward Console Logs"),r=Le(e.forwardReports,T(De),"Forward Reports");if(t&&n&&r)return e.forwardErrorsToLogs&&!C(n,i.error)&&n.push(i.error),y({forwardErrorsToLogs:!1!==e.forwardErrorsToLogs,forwardConsoleLogs:n,forwardReports:r,requestErrorResponseLengthLimit:32768},t)}(e);n&&(t=function(e,t,n,r){var o=new en,s=function(e){return o.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{origin:be},origin:be,status:Pe.error}})},u=function(e,t){var n,r=function(e,t){var n,r=new xe;return Ge.telemetryEnabled=w(t.telemetrySampleRate),Ge.telemetryConfigurationEnabled=Ge.telemetryEnabled&&w(t.telemetryConfigurationSampleRate),Fe=function(o){!C(He,t.site)&&Ge.telemetryEnabled&&r.notify(function(e,t){return M({type:"telemetry",date:Z(),service:e,version:"4.23.2",source:"browser",_dd:{format_version:2},telemetry:t,experimental_features:k(U||new Set)},void 0!==n?n():{})}(e,o))},c=qe,y(Ge,{maxEventsPerPage:t.maxTelemetryEventsPerPage,sentEventCount:0}),{setContextProvider:function(e){n=e},observable:r}}("browser-logs-sdk",e);if(Y()){var o=z();r.observable.subscribe((function(e){return o.send("internal_telemetry",e)}))}else{var i=it(e,e.rumEndpointBuilder,t,null===(n=e.replica)||void 0===n?void 0:n.rumEndpointBuilder);r.observable.subscribe((function(t){return i.add(t,function(e){return"datad0g.com"===e.site}(e))}))}return r}(t,s);u.setContextProvider((function(){var e,t,n,r,o,i;return{application:{id:null===(e=Ot())||void 0===e?void 0:e.application_id},session:{id:null===(t=f.findTrackedSession())||void 0===t?void 0:t.id},view:{id:null===(r=null===(n=Ot())||void 0===n?void 0:n.view)||void 0===r?void 0:r.id},action:{id:null===(i=null===(o=Ot())||void 0===o?void 0:o.user_action)||void 0===i?void 0:i.id}}})),Kt(t,o),function(e,t){if(!e.forwardErrorsToLogs)return{stop:_};var n=new xe;Xt(n).stop,n.subscribe((function(e){t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{kind:e.type,origin:Ee,stack:e.stack},origin:Ee,status:Pe.error}})}))}(t,o),function(e,t){var n,r;(n=e.forwardConsoleLogs,r=n.map((function(e){return At[e]||(At[e]=function(e){var t=new xe((function(){var n=console[e];return console[e]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n.apply(console,r);var i=Te();v((function(){t.notify(Dt(r,e,i))}))},function(){console[e]=n}}));return t}(e)),At[e]})),Ae.apply(void 0,r)).subscribe((function(e){t.notify(0,{rawLogsEvent:{date:Z(),message:e.message,origin:we,error:e.api===i.error?{origin:we,stack:e.stack}:void 0,status:Pt[e.api]}})}))}(t,o),function(e,t){(function(e){var t,n=[];C(e,De.cspViolation)&&n.push(t=new xe((function(){var e=p((function(e){t.notify(function(e){var t=De.cspViolation,n="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:De.cspViolation,subtype:e.effectiveDirective,message:"".concat(t,": ").concat(n),stack:Re(e.effectiveDirective,e.originalPolicy?"".concat(n,' of the policy "').concat(A(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber)}}(e))}));return D(document,"securitypolicyviolation",e).stop})));var r=e.filter((function(e){return e!==De.cspViolation}));return r.length&&n.push(function(e){var t=new xe((function(){if(window.ReportingObserver){var n=p((function(e){return e.forEach((function(e){t.notify(function(e){var t=e.type,n=e.body;return{type:t,subtype:n.id,message:"".concat(t,": ").concat(n.message),stack:Re(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)}}(e))}))})),r=new window.ReportingObserver(n,{types:e,buffered:!0});return r.observe(),function(){r.disconnect()}}}));return t}(r)),Ae.apply(void 0,n)})(e.forwardReports).subscribe((function(e){var n,r=e.message,o=Mt[e.type];o===Pe.error?n={kind:e.subtype,origin:Ce,stack:e.stack}:e.stack&&(r+=" Found in ".concat(function(e){var t;return null===(t=/@ (.+)/.exec(e))||void 0===t?void 0:t[1]}(e.stack))),t.notify(0,{rawLogsEvent:{date:Z(),message:r,origin:Ce,error:n,status:o}})}))}(t,o);var l,d=function(e){return{handleLog:function(t,n,r,o){var i=t.context;It(t.status,Me,n)&&a(t.status,t.message,M(n.getContext(),i)),e.notify(0,{rawLogsEvent:{date:o||Z(),message:t.message,status:t.status,origin:_e},messageContext:i,savedCommonContext:r,logger:n})}}}(o).handleLog,f=!function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test_".concat(b()),n="test";X(t,n,m,e);var r=J(t)===n;return $(t,e),r}catch(e){return a.error(e),!1}}(t.cookieOptions)||Y()||Ue()?function(e){var t="1"===Ct(e)?{}:void 0;return{findTrackedSession:function(){return t}}}(t):function(e){var t=Et(e.cookieOptions,"logs",(function(t){return function(e,t){var n=function(e){return"0"===e||"1"===e}(t)?t:Ct(e);return{trackingType:n,isTracked:"1"===n}}(e,t)}));return{findTrackedSession:function(e){var n=t.findActiveSession(e);return n&&"1"===n.trackingType?{id:n.id}:void 0}}}(t);return function(e,t,n,r,o,i){var a=je.concat(["custom"]),s={};a.forEach((function(e){var n,r,o,a,c;s[e]=(n=e,r=t.eventRateLimiterThreshold,o=i,a=0,c=!1,{isLimitReached:function(){if(0===a&&setTimeout((function(){a=0}),6e4),(a+=1)<=r||c)return c=!1,!1;if(a===r+1){c=!0;try{o({message:"Reached max number of ".concat(n,"s by minute: ").concat(r),source:be,startClocks:G()})}finally{c=!1}}return!0}})})),n.subscribe(0,(function(i){var a,c,u,l=i.rawLogsEvent,d=i.messageContext,f=void 0===d?void 0:d,p=i.savedCommonContext,v=void 0===p?void 0:p,h=i.logger,m=void 0===h?o:h,g=l.date-q(),y=e.findTrackedSession(g);if(y){var b=v||r(),w=M({service:t.service,session_id:y.id,view:b.view},b.context,Ot(g),l,m.getContext(),f);!It(l.status,Ne,m)||!1===(null===(a=t.beforeSend)||void 0===a?void 0:a.call(t,w))||(null===(c=w.error)||void 0===c?void 0:c.origin)!==be&&(null!==(u=s[w.status])&&void 0!==u?u:s.custom).isLimitReached()||n.notify(1,w)}}))}(f,t,o,n,r,s),Y()?function(e){var t=z();e.subscribe(1,(function(e){t.send("log",e)}))}(o):function(e,t,n){var r,o=it(e,e.logsEndpointBuilder,n,null===(r=e.replica)||void 0===r?void 0:r.logsEndpointBuilder);t.subscribe(1,(function(e){o.add(e)}))}(t,o,s),function(e){Ge.telemetryConfigurationEnabled&&ze({type:Be,configuration:e})}(function(e){var t=function(e){return{session_sample_rate:e.sampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:void 0!==e.proxyUrl?!!e.proxyUrl:void 0,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains}}(e);return y({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports},t)}(e)),{handleLog:d,getInternalContext:(l=f,{get:function(e){var t=l.findTrackedSession(e);if(t)return{session_id:t.id}}}).get}}(e,n,S,g),f=t.handleLog,u=t.getInternalContext,h=function(){return P(e)},l.drain(),r=!0)}})),getLoggerGlobalContext:p(o.get),getGlobalContext:p(o.getContext),setLoggerGlobalContext:p(o.set),setGlobalContext:p(o.setContext),addLoggerGlobalContext:p(o.add),setGlobalContextProperty:p(o.setContextProperty),removeLoggerGlobalContext:p(o.remove),removeGlobalContextProperty:p(o.removeContextProperty),clearGlobalContext:p(o.clearContext),createLogger:p((function(e,t){return void 0===t&&(t={}),s[e]=new We((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f.apply(void 0,e)}),e,t.handler,t.level,t.context),s[e]})),getLogger:p((function(e){return s[e]})),getInitConfiguration:p((function(){return h()})),getInternalContext:p((function(e){return u(e)}))},n=y({version:"4.23.2",onReady:function(e){e()}},t),Object.defineProperty(n,"_setDebug",{get:function(){return d},enumerable:!1}),n}();$t=tn,Qt=(Jt=x())["DD_LOGS"],Jt.DD_LOGS=$t,Qt&&Qt.q&&Qt.q.forEach((function(e){return s(e,"onReady callback threw an error:")()}));var nn=n(7937),rn=n(9046),on="".concat("https://api.servicebell.com","/api/v1/visitor/ddproxy"),an=null;if((0,rn.yL)()){var sn=window.top.__ddTopWindowLogger__;sn&&(an=sn)}else tn.init({env:"production",clientToken:"pub42fbf37103cb3ff40544afec68ccb41b",site:"datadoghq.com",forwardErrorsToLogs:!1,sampleRate:100,version:(0,nn.i)(),service:"widget",proxyUrl:on}),(an=tn.logger).setLevel("debug"),window.__ddTopWindowLogger__=an;var cn=Math.random()>.999,un=window.location.hostname.endsWith("servicebell.com"),ln=!1;const dn=an;var fn=n(7220),pn={},vn=["error","warn","log","info","debug"],hn="_sbloglevel_",mn=function e(t){if(null!==t&&"object"===(0,o.Z)(t)){if(t instanceof Error)return{name:t.name||null,message:t.message||null,stack:t.stack||null};var n={};return Object.getOwnPropertyNames(t).forEach((function(r){n[r]=e(t[r])})),n}return t},gn=function(e){return vn.includes(e)},yn=function(e,t,n,i){var a,s=function(){var e=function(){var e=document.location.search.substring(1),t=new URLSearchParams(e),n=t.get("sblog");if(n&&gn(n)?localStorage.setItem(hn,n):"off"===n&&localStorage.removeItem(hn),n){t.delete("sblog");var r=t.toString(),o="".concat(window.location.pathname).concat(r?"?".concat(r):"");history.replaceState(null,"",o)}var i=localStorage.getItem(hn);return i&&gn(i)?i:null}();return e?vn.indexOf(e):-1}();s>-1&&vn.indexOf(e)<=s&&(a=console)[e].apply(a,(0,r.Z)([t,n,i].filter(Boolean)));var c={};n&&("object"===(0,o.Z)(n)&&null!==n&&(c=n),"string"==typeof n&&(c.message=n)),c.error?c.error2=i||void 0:c.error=i||void 0,c=mn(c);var u=Object.assign(Object.assign({},function(){var e={};try{var t=fn.ZP.getState();t.realtime.helpedBy&&(e.agentId=t.realtime.helpedBy),t.realtime.helpedBySid&&(e.agentSid=t.realtime.helpedBySid),t.app.org.id&&"number"==typeof t.app.org.id&&(e.orgId=t.app.org.id),t.realtime.sbid&&(e.sbid=t.realtime.sbid),t.realtime.sid&&(e.visitorSid=t.realtime.sid),t.realtime.customId&&(e.visitorCustomId=t.realtime.customId)}catch(e){return pn}return pn=e,e}()),{extra:c});dn&&function(e,t){return!("error"!==e&&"warn"!==e&&!cn&&!un&&(!t.agentId&&!ln||(ln=!0,0)))}(e,u)&&dn["log"===e?"debug":e](t,u)};const bn={error:function(e,t,n){return yn("error",e,t,n)},warn:function(e,t){return yn("warn",e,t)},log:function(e,t){return yn("log",e,t)},info:function(e,t){return yn("info",e,t)},debug:function(e,t){return yn("debug",e,t)}}},2795:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var r=n(32),o=function(e){var t=function(t){return"[".concat(e,"] ").concat(t)};return{error:function(e,n,o){return r.Z.error(t(e),n,o)},warn:function(e,n){return r.Z.warn(t(e),n)},log:function(e,n){return r.Z.log(t(e),n)},info:function(e,n){return r.Z.info(t(e),n)},debug:function(e,n){return r.Z.debug(t(e),n)}}}},7780:(e,t,n)=>{"use strict";n.d(t,{l:()=>S});var r,o,i,a,s,c,u,l,d,f,p,v=n(785),h=n.n(v),m=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},g=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const y="_sbAudioDeviceId_",b="_sbVideoDeviceId_",w={NotAllowedError:"Could not get <device> media streams, make sure you have enabled device permissions in your browser",NotFoundError:"Could not find <device>",NotReadableError:"Failed to access <device> due to a hardware failure",OverconstrainedError:"Could not get <device> that meets minimum requirements",TypeError:"Empty constraints or operating in an insecure context prevented <device> access",default:"Could not get <device> media streams, make sure you have devices available and enabled permissions in your browser"};o=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,r=new WeakSet,d=function(e){return g(this,u,"f")?g(this,u,"f").apply(e):e},f=function(){return new Promise((e=>{h().load((()=>{!g(this,a,"f")&&h().isWebsiteHasMicrophonePermissions&&(g(this,o,"f").debug("Refreshing device list after permissions granted"),navigator.mediaDevices.dispatchEvent(new Event("devicechange")),m(this,a,!0,"f")),e()}))}))},p=function(e=!1){return new Promise((t=>{g(this,i,"f")||e?h().load(t):t()})).then((()=>{m(this,i,!1,"f")}))};var _=(0,n(2795).U)("media-devices"),S=new class{constructor(e){r.add(this),o.set(this,void 0),i.set(this,!0),a.set(this,!1),s.set(this,null),c.set(this,[]),u.set(this,null),l.set(this,void 0),this.getMediaDevices=async()=>{await g(this,r,"m",p).call(this);const{audioInputDevices:e,videoInputDevices:t}=h();return{audioInputDevices:e,videoInputDevices:t}},this.getPreferredMediaDevices=async()=>{var e,t,n,i;await g(this,r,"m",p).call(this,!0);let a=localStorage.getItem(y)||(null===(e=h().audioInputDevices[0])||void 0===e?void 0:e.deviceId)||void 0,s=localStorage.getItem(b)||(null===(t=h().videoInputDevices[0])||void 0===t?void 0:t.deviceId)||void 0;return a&&!h().audioInputDevices.map((e=>e.deviceId)).includes(a)&&(g(this,o,"f").info(`Preferred mic device ${a} not found, will use first available`),a=(null===(n=h().audioInputDevices[0])||void 0===n?void 0:n.deviceId)||void 0),s&&!h().videoInputDevices.map((e=>e.deviceId)).includes(s)&&(g(this,o,"f").info(`Preferred cam device ${s} not found, will use first available`),s=(null===(i=h().videoInputDevices[0])||void 0===i?void 0:i.deviceId)||void 0),{audio:a,video:s}},this.setPreferredMediaDevices=(e,t)=>{e&&localStorage.setItem(y,e),t&&localStorage.setItem(b,t)},m(this,o,e,"f"),m(this,l,this.listenToDeviceChange((()=>m(this,i,!0,"f"))),"f")}destroy(){g(this,c,"f").forEach((e=>{e.getTracks().forEach((e=>e.stop()))})),g(this,l,"f").call(this)}listenToDeviceChange(e){if(!(null===navigator||void 0===navigator?void 0:navigator.mediaDevices))return()=>null;const t=()=>{g(this,s,"f")&&clearTimeout(g(this,s,"f")),m(this,s,setTimeout((()=>{e(),m(this,s,null,"f")}),100),"f")};return navigator.mediaDevices.addEventListener("devicechange",t),()=>navigator.mediaDevices.removeEventListener("devicechange",t)}async setupCameraMediaStream({audio:e,video:t}){const{mediaDevices:n}=navigator;if(!n)throw g(this,o,"f").warn("Could not access navigator.mediaDevices"),new Error("Your browser does not support camera streaming");let i,a;try{const o=await this.getPreferredMediaDevices(),s={};e&&(i="string"==typeof e?e:o.audio,s.audio="string"!=typeof i||{deviceId:i}),t&&(a="string"==typeof t?t:o.video,s.video="string"==typeof a?{deviceId:a,facingMode:"user"}:{facingMode:"user"});const c=g(this,r,"m",d).call(this,await n.getUserMedia(s));this.setPreferredMediaDevices("object"==typeof s.audio?s.audio.deviceId:void 0,"object"==typeof s.video?s.video.deviceId:void 0),await g(this,r,"m",f).call(this);const l=()=>{var e;c.getVideoTracks().forEach((e=>e.stop())),null===(e=g(this,u,"f"))||void 0===e||e.stop(c)},p=()=>{c.getAudioTracks().forEach((e=>e.stop()))},v=()=>{l(),p()};return{stream:c,audioDeviceId:i,videoDeviceId:a,stopVideo:l,stopAudio:p,stopAll:v}}catch(n){const r=n.name||"default",s=e&&t?"microphone and camera":e?"microphone":"camera",c=(w[r]||w.default).replace("<device>",s);g(this,o,"f").warn(c,{error:n,audioDeviceId:i,videoDeviceId:a});const u=new Error(c);throw u.name=r||"GetUserMediaFailed",u}}async setupDisplayMediaStream(){var e;if(!(null===(e=null===navigator||void 0===navigator?void 0:navigator.mediaDevices)||void 0===e?void 0:e.getDisplayMedia))throw new Error("Your browser does not support screen capture");try{return await navigator.mediaDevices.getDisplayMedia({audio:!0,video:{cursor:"always",displaySurface:"browser"}})}catch(e){throw g(this,o,"f").warn("Failed to getDisplayMedia",{error:e}),e}}isVideoProcessingSupported(){return!!g(this,u,"f")}setVideoEffectProcessor(e){m(this,u,e,"f")}async setVideoEffect(e,t){var n;g(this,o,"f").info(`Setting video effect to ${e}.`),await(null===(n=g(this,u,"f"))||void 0===n?void 0:n.prepare(e,t))}}(_)},1088:(e,t,n)=>{"use strict";n.d(t,{V:()=>c,a:()=>s});var r,o,i=n(9046),a=n(32),s=function(e){var t=e?"[iframe]":"",n=(0,i.zb)();r&&r.disconnect();var o=function(){var e=Array.from(n.body.getElementsByTagName("a")).filter((function(e){return(0,i.fI)(e.href)&&"_blank"!==e.getAttribute("target")}));e.forEach((function(e){return e.setAttribute("target","_blank")})),e.length>0&&a.Z.info("".concat(t," Modified ").concat(e.length," external anchors to target _blank"))};(r=new MutationObserver((function(e){e.forEach((function(e){e.oldValue!==e.target.textContent&&o()}))}))).observe(n.body,{characterDataOldValue:!0,subtree:!0,childList:!0,characterData:!0}),o()},c=function(e){var t=(0,i.zb)(),n=function(){var e=t.location.href,n=t.title;e?window.dispatchEvent(new CustomEvent("sblocationchanged",{detail:{href:e,title:n}})):a.Z.debug("Ignoring falsy href [".concat(e,"], will not dispatch sblocationchanged dom event"))};o&&o.disconnect();var r=0,s=t.location.href,c=t.title;(o=new MutationObserver((function(o){o.forEach((function(){!t||s===t.location.href&&c===t.title||(s=t.location.href,c=t.title,a.Z.debug("".concat(e?"Iframe":"Document"," location.href changed (mutation) ").concat(s)),e&&(window.history.replaceState({},"",s),document.title=t.title),clearTimeout(r),r=window.setTimeout((function(){n()}),100))}))}))).observe(t.body,{childList:!0,subtree:!0}),n()}},8743:(e,t,n)=>{"use strict";n.d(t,{H:()=>g});var r=n(5776),o=n(8429),i=n(6403),a=n(9046),s=n(5164),c=n(2795),u=n(2355),l=n(5592),d=n(2611),f=n(6688),p=n(7109),v=n(5713),h=(0,c.U)("call-kit"),m={callAccepted:(0,i.hg)("realtime/callAccepted",(function(e,t){(0,t.getState)().realtime.hasAcceptedCall||((0,f.hQ)(),(0,v.Tm)("sb:callaccept"))})),callRejected:(0,i.hg)("realtime/callRejected",(function(e){(0,f.dS)(),(0,f.d2)(p.xz.REJECT_CALL),(0,v.Tm)("sb:callreject")})),callEnded:(0,i.hg)("realtime/callEnded",(function(e,t){var n=t.dispatch,r=t.getState,o=r().app,i=o.screenTakeoverOn,a=o.isRequestingDisplayshare,c=o.widgetExtent,u=r().realtime.incomingDisplayStreamId;n((0,d.oU)({audio:!1,video:!1})),i&&n((0,d.zS)(!1)),a&&n((0,d.Px)(!1)),u&&n((0,s.p)({streamId:null,isReceivingAudio:!1,isReceivingVideo:!1})),"normal"!==c&&n((0,d.pU)("normal")),(0,v.Tm)("sb:callend")})),endCallWanted:(0,i.hg)("realtime/endCallWanted",(function(e){var t=null==e?void 0:e.reason;"decline"===t?(0,f.d2)(p.xz.STOP_VIDEO_DECLINE):"missed"===t?(0,f.d2)(p.xz.STOP_VIDEO_MISSED):(0,f.d2)(p.xz.STOP_VIDEO),(0,f.d2)(p.xz.STOP_TAKEOVER),(0,f.d2)(p.xz.STOP_DISPLAYSHARE)}))},g=(0,u.j)({thunks:m,thunkReducers:{callAccepted:{fulfilled:function(e){e.hasAcceptedCall=!0,e.hasAcceptedAnyCall=!0}},callEnded:{fulfilled:function(e){e.hasAcceptedCall=!1}}},reducers:{incomingCameraStreamChanged:function(e,t){var n=t.payload,r=n.streamId,o=n.isReceivingAudio,i=n.isReceivingVideo;e.incomingCameraStreamId=r,e.isReceivingAudio=o,e.isReceivingVideo=i}},useKitHook:function(){var e=(0,o.I0)(),t=(0,l.Q)((function(e){return e.app})),n=t.stage,i=t.startCallOnPageVisible,s=t.isPageVisible,c=t.isAutoplayAudioAllowed,u=(0,l.Q)((function(e){return e.realtime})),g=u.isVideo,y=u.isVideoAccepted,b=u.peerStatus,w=u.hasAcceptedCall,_=u.isReceivingVideo,S="connected"===b&&g,E=(0,a.D9)(S);(0,r.d4)((function(){E||!S||w||(h.debug("Call ready due to visitor isVideo"),e((0,d.iP)({accepted:y})))}),[E,S,w,s,y,e]),(0,r.d4)((function(){S&&(0,v.Tm)("sb:callstart")}),[S]),(0,r.d4)((function(){var e=_&&c?"on":"off";h.debug("Speaker status is ".concat(e)),(0,f.A4)(e)}),[c,_]),(0,r.d4)((function(){i&&s&&(h.debug("Call ready due to startCallOnPageVisible"),setTimeout((function(){return e((0,d.iP)())}),300))}),[i,s,e]),(0,r.d4)((function(){!g&&[p.Hf.ACTIVE_CALL,p.Hf.ANSWER_CALL].includes(n)&&(h.debug("Stopping call because isVideo is false and stage is ".concat(n)),e(m.callEnded()))}),[g,n,e])}})},8273:(e,t,n)=>{"use strict";n.d(t,{S:()=>I});var r=n(885),o=n(2982),i=n(5776),a=n(6403),s=n(8429),c=n(7856),u=n(2795),l=n(5592),d=n(1663),f=n(7109),p=n(9046),v=n(2611),h=n(5164),m=n(2355),g=n(6688),y=n(5713),b=n(6242);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=(0,u.U)("connect-kit"),S="_sb_last_connect_time_",E={apiConnect:(0,a.hg)("realtime/apiConnect",(function(e,t){var n=t.getState,r=t.dispatch;"disconnected"===n().realtime.serverStatus&&(r((0,h.tq)()),r((0,v.Ov)({connect:!1})),r(k.raiseConnectTrigger(f.r4.JS)))})),apiDisconnect:(0,a.hg)("realtime/apiDisconnect",(function(e,t){var n=t.getState,r=t.dispatch;"connected"===n().realtime.serverStatus&&(r(k.raiseConnectTrigger(null)),(0,g.lt)(),x())}))},C={introducedToServer:function(e,t){e.isIntroducedToServer=t.payload},raiseConnectTrigger:function(e,t){var n,r=t.payload;r&&!(null===(n=e.raisedConnectTriggers)||void 0===n?void 0:n.includes(r))&&(e.raisedConnectTriggers=[].concat((0,o.Z)(e.raisedConnectTriggers||[]),[r])),e.lastRaisedConnectTrigger=t.payload},connectTriggersChanged:function(e,t){e.connectTriggers=t.payload}},k=(0,m.M)({reducers:C}),I=(0,m.j)({thunks:E,thunkReducers:{},reducers:C,useKitHook:function(){var e=(0,s.I0)(),t=(0,l.Q)((function(e){return e})),n=t.app,o=n.hasReceivedOrg,a=n.org,u=n.options,m=n.stage,S=n.pageWidgetSettings,E=n.widgetExtent,C=n.uiPanel,I=t.realtime,x=I.serverStatus,A=I.isIntroducedToServer,D=I.clientKey,R=I.connectTriggers,L=I.raisedConnectTriggers,P=I.lastRaisedConnectTrigger,M=I.lastServerDisconnectTime,N=I.isVisitorAway,j=I.lastVisitorActiveTime,W=I.isSpying,U=I.isSpyingChangedTime,V=I.peerStatus,F=I.serverErrorCode,B=I.flagReconnectAfterOtherBrowserContextsDisconnected,Z=(0,l.Q)((function(e){return e.conversation})).activeConversationId,H=S.connect,G=(0,i.eJ)(!1),K=(0,r.Z)(G,2),q=K[0],z=K[1],Y=(0,i.eJ)(0),X=(0,r.Z)(Y,2),J=X[0],$=X[1],Q=(0,i.sO)(!1),ee=(0,i.sO)(500),te=Date.now()-M,ne=te<1e3,re=(0,d.VL)(),oe=!!Z&&"chat"===C,ie=(0,i.eJ)(0),ae=(0,r.Z)(ie,2),se=ae[0],ce=ae[1],ue=u.connect;(0,i.d4)((function(){if(o){var t=a.widgetSettings.connect;!1===ue&&(_.debug("Options connect is false, will remove IMMEDIATE from connect triggers if present and add JS"),(t=a.widgetSettings.connect.filter((function(e){return e!==f.r4.IMMEDIATE}))).push(f.r4.JS)),_.debug("Populating connect triggers ".concat(JSON.stringify(t))),e(k.connectTriggersChanged(t))}}),[ue,o,e]);var le=!u.hidden,de=!!u.expanded;(0,i.d4)((function(){le&&(_.debug("Raise SHOW connect trigger for not hidden option"),e(k.raiseConnectTrigger(f.r4.SHOW)))}),[le,e]),(0,i.d4)((function(){de&&!Q.current&&(_.debug("Raise EXPAND connect trigger for expanded options"),e(k.raiseConnectTrigger(f.r4.EXPAND)),Q.current=!0)}),[de,e]),(0,i.d4)((function(){"collapsed"===E||Q.current||(_.debug("Raise EXPAND connect trigger for should not be collapsed"),e(k.raiseConnectTrigger(f.r4.EXPAND)),Q.current=!0)}),[E,e]);var fe=!(0,p.D9)(R)&&R,pe=["connected","connecting","reconnecting"].includes(x);(0,i.d4)((function(){if(!(N||pe||F))if(re)_.debug("Not connecting, this is a mobile device (".concat(b.osName,", ").concat(window.screen.width,"px wide) and mobile devices are disabled for this org"));else if(D&&R){if(O())return _.debug("Connecting instantly due to recent last connect time"),T(),void(0,g.zp)();var e=H?"page":"org",t=H||R,n=t.includes(f.r4.IMMEDIATE)?f.r4.IMMEDIATE:t.includes(P)?P:null;if(fe&&!n){var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(L);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.includes(i)&&(_.debug("Early raised connect trigger match [".concat(i,"]")),n=i)}}catch(e){o.e(e)}finally{o.f()}}if(n)return _.debug("Connection trigger [".concat(n,"] from [").concat(e,"] setting, attempt connect")),T(),void(0,g.zp)()}}),[D,pe,F,R,H,L,fe,N,P,re]),(0,i.d4)((function(){if(F){_.info("Connect socket error [".concat(F,"]"));var t=void 0,n=void 0;switch(F){case c.jc.BLOCKED:(0,y.sA)(new y.ce("Visitor is blocked")),t=!1;break;case c.jc.PROTOCOL_VERSION_BEHIND:_.warn("Tried to connect to server but widget protocol behind"),(0,y.sA)(new y.BR("Widget version is out of date"));break;case c.jc.MAX_SESSIONS:_.warn("Tried to connect to server but org has exceeded its session quota"),(0,y.sA)(new y.ce("Max sessions")),t=!1;break;case c.jc.CONNECT_REJECTED:ne?(_.debug("Automatically attempting a reconnect because we were connected ".concat(te,"ms ago (serverErrorCode=").concat(F,")")),e((0,h.tq)())):((0,y.sA)(new y.ce("Socket connect rejected")),n=!0);break;case c.jc.DISPLACED:case c.jc.CONNECTION_DATA_NOT_FOUND:case c.jc.STALE:_.debug("Will clear code [".concat(F,"] on visitor activity")),$(Date.now());break;default:_.debug("Will clear code [".concat(F,"] after delay")),z(!0)}e((0,v.gB)({available:t,hidden:n}))}}),[F,e]),(0,i.d4)((function(){A&&(ee.current=500)}),[A]),(0,i.d4)((function(){"connected"!==x&&A&&e(k.introducedToServer(!1))}),[x,A,e]),(0,i.d4)((function(){if(N){if("connected"!==x||!W)return"connected"===x&&!W&&Date.now()-U<1e4?(_.info("Ignoring AFK disconnect when recently associated"),void setTimeout((function(){return ce(se+1)}),1e4)):void("connected"!==V?m!==f.Hf.DIALING?oe?_.info("Ignoring AFK disconnect when conversation is open"):"connected"===x&&(_.info("Disconnected socket due to AFK"),(0,g.lt)()):_.info("Ignoring AFK disconnect while dialing"):_.info("Ignoring AFK disconnect when peer connected"));_.info("Ignoring AFK disconnect when associated")}}),[N,x,W,U,se,V,m,oe,e]),(0,i.d4)((function(){F&&J&&(j<J||(_.info("Visitor is active, will clear disconnect code ".concat(F)),$(0),e((0,h.tq)())))}),[j,F,J,e]),(0,i.d4)((function(){B&&(F?(_.info("Clearing server error code for reconnect after other browser contexts no longer connected"),T(),e((0,h.tq)())):_.info("Other browser contexts no longer connected, but no server error code to clear"),e((0,h.LY)(!1)))}),[B,F,z,e]),(0,i.d4)((function(){if(q&&F){var t=ee.current;_.debug("Clearing code [".concat(F,"] after ").concat(t,"ms"));var n=!1,r=setTimeout((function(){n=!0,e((0,h.tq)()),_.debug("Cleared code [".concat(F,"] after ").concat(t,"ms")),ee.current=Math.round(1.2*(t+750+750*Math.random()))}),t);return function(){n||(_.debug("Canceled code clear timeout, useEffect dependency updated"),clearTimeout(r))}}}),[q,F,e])}}),T=function(){return localStorage.setItem(S,Date.now().toString())},O=function(){return Date.now()-parseInt(localStorage.getItem(S)||"0",10)<9e5},x=function(){return localStorage.removeItem(S)}},6688:(e,t,n)=>{"use strict";n.d(t,{A4:()=>r.A4,ES:()=>r.ES,Ew:()=>r.Ew,G7:()=>r.G7,Qn:()=>r.Qn,Th:()=>r.Th,VU:()=>r.VU,Yi:()=>r.Yi,_F:()=>r._F,bW:()=>r.bW,d2:()=>r.d2,dS:()=>r.dS,fD:()=>r.fD,hQ:()=>r.hQ,if:()=>r.if,jQ:()=>r.jQ,lt:()=>r.lt,nJ:()=>r.nJ,nw:()=>r.nw,sn:()=>r.sn,tD:()=>r.tD,yQ:()=>r.yQ,zA:()=>r.zA,zO:()=>r.zO,zp:()=>r.zp});var r=n(6436)},6369:(e,t,n)=>{"use strict";n.d(t,{r:()=>de});var r=n(5861),o=n(4687),i=n.n(o),a=n(5776),s=n(8429),c=n(6403),u=n(5164),l=n(2795),d=n(2355),f=n(5592),p=n(2611),v=n(3668),h=n(9046),m=n(1950),g=n(2982),y=n(3109),b=n(7220),w=n(7109),_=n(32);function S(e){return e="^"+(e=e.split("*").join("(.*)"))+"$",new RegExp(e)}function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k,I=w.Oi.CLICK,T=w.Oi.VISIT,O=w.Oi.FORM,x=[],A="",D=[],R={};function L(){var e=(0,h.zb)().location.pathname;return A===e||(k=x.filter((function(t){var n=t.pageRegex.exec(e);return!!(null==n?void 0:n.length)})),A=e),k}function P(){var e;null===(e=(0,h.zb)().defaultView)||void 0===e||e.addEventListener("click",W),["click","keydown"].forEach((function(e){var t;null===(t=(0,h.zb)().defaultView)||void 0===t||t.addEventListener(e,U,{capture:!0})}))}function M(e,t){return{page:e,action:w.EL.ALERT,event:t,handler:function(){return function(e){window.ServiceBell.alert({title:e.title||void 0,body:e.message||void 0})}(t)}}}function N(e){return e.proactiveVideo?{page:e.page,action:w.EL.VIDEO,event:e.proactiveVideo,handler:function(){b.ZP.dispatch((0,p.bn)(e.proactiveVideo))}}:null}function j(e){return e.expand?{page:e.page,action:w.EL.EXPAND,event:e.expand,handler:function(){return b.ZP.dispatch((0,p.ld)())}}:null}function W(e){var t,n=function(t){if(t.event!==I)return!1;var n=(0,h.zb)().querySelectorAll(t.selector);return Array.from(n).includes(e.target)},r=null,o=null,i=null,a=E(L());try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.alerts){var c,u=E(s.alerts);try{for(u.s();!(c=u.n()).done;){var l=c.value;n(l)&&(r=M(s.page,l))}}catch(e){u.e(e)}finally{u.f()}}s.proactiveVideo&&n(s.proactiveVideo)&&(o=N(s)),s.expand&&n(s.expand)&&(i=j(s))}}catch(e){a.e(e)}finally{a.f()}for(var d=0,f=[r,o,i];d<f.length;d++){var p=f[d];p&&F(p)}}function U(e){var t=e.composedPath(),n=["form","input","select","textarea"];if(t.find((function(e){return n.includes(e.localName)}))){var r,o=null,i=null,a=E(L());try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.alerts){var c,u=E(s.alerts);try{for(u.s();!(c=u.n()).done;){var l=c.value;l.event===O&&(o=M(s.page,Object.assign(Object.assign({},l),{oncePerSession:!0})))}}catch(e){u.e(e)}finally{u.f()}}s.expand&&s.expand.event===O&&(i=j(s))}}catch(e){a.e(e)}finally{a.f()}for(var d=0,f=[o,i];d<f.length;d++){var p=f[d];p&&F(p)}}}function V(){var e,t={},n=null,r=null,o=null,i=E(L());try{for(i.s();!(e=i.n()).done;){var a=e.value;if(t=Object.assign(Object.assign({},t),a.widgetSettings),a.alerts){var s,c=E(a.alerts);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.event===T&&(n=M(a.page,u))}}catch(e){c.e(e)}finally{c.f()}}a.proactiveVideo&&a.proactiveVideo.event===T&&(r=N(a)),a.expand&&a.expand.event===T&&(o=j(a))}}catch(e){i.e(e)}finally{i.f()}b.ZP.dispatch((0,p.me)(t));for(var l=0,d=[n,r,o];l<d.length;l++){var f=d[l];f&&F(f)}r||b.ZP.dispatch((0,p.bn)(null))}function F(e){var t=e.page,n=e.action,r=e.event,o=e.handler,i=function(e){var t=e.action,n=e.event;return"page-rule-event:".concat(e.page,":").concat(t,":").concat(n.event)}({page:t,action:n,event:r});if(r.oncePerSession&&(R[i]||sessionStorage.getItem(i)))return!1;var a={page:t,timeout:setTimeout((function(){o(),r.oncePerSession&&(R[i]=Date.now().toString(),sessionStorage.setItem(i,Date.now().toString())),D=D.filter((function(e){return a!==e}))}),r.delay||0)};return D=[].concat((0,g.Z)(D),[a]),!0}var B=n(8891),Z=n(1088),H=n(7887),G=n(7780),K=n(5713),q=(0,l.U)("ajax-mode"),z="__SB_HTMX_SCRIPT__",Y="servicebell";var X=n(7937);function J(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Q=[],ee=[],te={};function ne(){var e;null===(e=(0,h.zb)().defaultView)||void 0===e||e.addEventListener("click",oe),["click","keydown"].forEach((function(e){var t;null===(t=(0,h.zb)().defaultView)||void 0===t||t.addEventListener(e,ie,{capture:!0})}))}function re(e){return e.arguments?{event:e.arguments,handler:function(){return b.ZP.dispatch((0,p.ld)())}}:null}function oe(e){var t,n=function(t){if("click"!==t.expandOn)return!1;var n=(0,h.zb)().querySelectorAll(t.cssSelector);return Array.from(n).includes(e.target)},r=null,o=J(Q);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.arguments&&n(i.arguments)&&(r=re(i))}}catch(e){o.e(e)}finally{o.f()}for(var a=0,s=[r];a<s.length;a++){var c=s[a];c&&ce(c)}}function ie(e){var t=e.composedPath(),n=["form","input","select","textarea"];if(t.find((function(e){return n.includes(e.localName)}))){var r,o=null,i=J(Q);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.arguments&&"form"===a.arguments.expandOn&&(o=re(a))}}catch(e){i.e(e)}finally{i.f()}for(var s=0,c=[o];s<c.length;s++){var u=c[s];u&&ce(u)}}}function ae(){var e,t=null,n=J(Q);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.arguments&&"visit"===r.arguments.expandOn&&(t=re(r))}}catch(e){n.e(e)}finally{n.f()}for(var o=0,i=[t];o<i.length;o++){var a=i[o];a&&ce(a)}}function se(){ee=ee.filter((function(e){return clearTimeout(e.timeout),!1}))}function ce(e){var t,n=e.event,r=e.handler,o=(t={event:n},"page-rule-event:expand:".concat(t.event.expandOn));if(n.oncePerSession&&(te[o]||sessionStorage.getItem(o)))return!1;var i={timeout:setTimeout((function(){r(),n.oncePerSession&&(te[o]=Date.now().toString(),sessionStorage.setItem(o,Date.now().toString())),ee=ee.filter((function(e){return i!==e}))}),n.delayMs||0)};return ee=[].concat((0,g.Z)(ee),[i]),!0}var ue=(0,l.U)("init-kit"),le={fetchInitialData:(0,c.hg)("realtime/fetchInitialData",function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a,s,c,u,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.clientKey,o=n.dispatch,a=(0,X.i)(),s=(0,X.J)(),ue.debug("Get widget init data"),e.prev=5,e.next=8,(0,v.GB)(r);case 8:return c=e.sent,o((0,p.Vo)(c.data)),u=c.data,l=u.commitHash,d=u.protocolVersion,l!==a&&ue.warn("Widget and server have different commit hash\nwidget: ".concat(a,"\nserver: ").concat(l)),s!==d&&ue.warn("Widget and server have different protocol versions\nwidget: ".concat(s,"\nserver: ").concat(d)),e.abrupt("return",c.data);case 16:throw e.prev=16,e.t0=e.catch(5),ue.warn("fetchInitialData rejected, widget will not init",e.t0),(0,K.sA)(e.t0),e.t0;case 21:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t,n){return e.apply(this,arguments)}}())},de=(0,d.j)({thunks:le,thunkReducers:{fetchInitialData:{pending:function(e){e.initialDataStatus="loading"},fulfilled:function(e,t){var n=t.payload;e.initialDataStatus="loaded",e.serverCommitHash=n.commitHash,e.serverProtocolVersion=n.protocolVersion}}},reducers:{},useKitHook:function(){var e,t=(0,s.I0)(),n=(0,f.Q)((function(e){return e.realtime})),r=n.sbid,o=n.iframeLoadCount,i=(0,f.Q)((function(e){return e.app})),c=i.org,l=i.hasReceivedOrg,d=i.rootElementId,v=i.isIframeFailed,g=i.isStreamEvents,b=(0,f.Q)(H.aE),w=c.widgetSettings,E=w.color,C=w.bgColor;(0,a.d4)((function(){l&&!r&&(ue.debug("Have org id, will get or create sbid"),t((0,u.mr)((0,h.$Q)(c.id))))}),[r,l,t]),(0,a.d4)((function(){l&&(0,m.T)(c.id)}),[l]),(0,a.d4)((function(){var e;l&&(ue.debug("Starting to manage page rules"),e=c.pageRules,x=function(e){var t=(0,h.zb)().location.origin;return e.map((function(e){var n=e.page;if(e.page.startsWith("http"))try{var r=new URL(e.page);if(r.origin!==t)return!1;n="".concat(r.pathname).concat(r.search).concat(r.hash)}catch(t){return _.Z.debug("Filtering out invalid URL ".concat(e.page)),!1}try{return Object.assign(Object.assign({},e),{pageRegex:S(n)})}catch(e){return _.Z.debug("Filtering out invalid path '".concat(n,"'")),!1}})).filter((function(e){return!!e}))}(e),P(),window.addEventListener("sblocationchanged",(function(){!function(){var e=L();D=D.filter((function(t){return!!e.find((function(e){return e.page===t.page}))||(clearTimeout(t.timeout),!1)}))}(),V()})),V(),window.top&&window.top.addEventListener(y.tP,P))}),[l]),(0,a.d4)((function(){var e;c.widgetSettings.clientRules&&(ue.debug("Starting to manage client rules"),function(e){var t;window.removeEventListener("sblocationchanged",(function(){se(),ae()})),null===(t=(0,h.zb)().defaultView)||void 0===t||t.removeEventListener("click",oe),["click","keydown"].forEach((function(e){var t;null===(t=(0,h.zb)().defaultView)||void 0===t||t.removeEventListener(e,ie,{capture:!0})})),Q=e,ne(),window.addEventListener("sblocationchanged",(function(){se(),ae()})),ae(),window.top&&window.top.addEventListener(y.tP,ne)}(null===(e=null==c?void 0:c.widgetSettings)||void 0===e?void 0:e.clientRules))}),[null===(e=null==c?void 0:c.widgetSettings)||void 0===e?void 0:e.clientRules]),(0,a.d4)((function(){(E||C)&&d&&(ue.debug("Setting theme color(s) [".concat(E,"]")),(0,B.A2)(E,C,d))}),[E,C,d]),(0,a.d4)((function(){(0,h.yL)()||(ue.debug("Begin watch location"),(0,Z.V)(!1))}),[]),(0,a.d4)((function(){o&&(ue.debug("Begin iframe watch location"),(0,Z.V)(!0))}),[o]),(0,a.d4)((function(){v&&(ue.debug("Iframe failed, fallback to watch location on root document"),(0,Z.V)(!1))}),[v]),(0,a.d4)((function(){"iframe-jit"===b&&g&&0===o&&d&&(ue.debug("Create iframe for iframe-jit mode"),(0,y.Vz)(d))}),[b,g,o,d]),(0,a.d4)((function(){"iframe-immediate"===b&&0===o&&d&&(ue.debug("Create iframe for iframe-immediate mode"),(0,y.Vz)(d))}),[b,o,d]),(0,a.d4)((function(){"ajax"===b&&g&&d&&(ue.debug("Initializing ajax mode"),function(e){if(document.getElementById(e))if(document.getElementById(z))q.debug("htmx already initialized, doing nothing");else{var t=document.createElement("script");t.id=z,t.src="https://cdn.servicebell.com/htmx-1.6.1-custom.min.js",t.onload=function(){return function(e){q.debug("Defining '".concat(Y,"' htmx extension"));var t=window.htmx;if(!t)return q.warn("Failed to find global htmx library for extension definition, disabling hx-boost"),void document.body.removeAttribute("hx-boost");var n=function(t,n){if("BODY"===t.nodeName&&"BODY"===n.nodeName){var r=document.getElementById(e);r||q.warn("Failed to find #".concat(e," in document during htmx swap"));for(var o=t.firstChild;n.childNodes.length>0;)n.firstChild&&t.insertBefore(n.firstChild,o);if(r&&t.insertBefore(r,o),o){for(;o.nextSibling;)t.removeChild(o.nextSibling);t.removeChild(o)}return[t]}};t.defineExtension(Y,{handleSwap:function(e,t,r){return n(t,r)},handleHistorySwap:function(e,t){return n(e,t)}})}(e)},document.head.appendChild(t),document.body.setAttribute("hx-boost","true"),document.body.setAttribute("hx-ext",Y)}else q.warn("Failed to find root element #".concat(e,", not initializing htmx"))}(d))}),[b,g,d]),(0,a.d4)((function(){if(l)return t((0,p.zV)()),G.l.listenToDeviceChange((function(){ue.debug("Media device changed, will populate devices"),t((0,p.zV)())}))}),[l,t])}})},2355:(e,t,n)=>{"use strict";n.d(t,{M:()=>i,j:()=>a});var r=n(6403),o=n(5164),i=function(e){var t=e.reducers;return(0,r.oM)({name:"realtime",initialState:o.E3,reducers:t}).actions};function a(e){return e}},4049:(e,t,n)=>{"use strict";n.d(t,{u:()=>g});var r=n(8743),o=n(8273),i=n(2355),a=(0,i.j)({thunks:{},thunkReducers:{},reducers:{incomingDisplayStreamChanged:function(e,t){e.incomingDisplayStreamId=t.payload.streamId||null}},useKitHook:function(){}}),s=n(5776),c=n(8429),u=n(5592),l=n(2611),d=(0,i.j)({thunks:{},thunkReducers:{},reducers:{},useKitHook:function(){var e=(0,c.I0)(),t=(0,u.Q)((function(e){return e.realtime})),n=t.isDisplayshare,r=t.outgoingDisplayStreamId;(0,s.d4)((function(){n&&!r&&e((0,l.Px)(!0)),n||e((0,l.Px)(!1))}),[n,r,e]),(0,s.d4)((function(){!n&&r&&e((0,l.MJ)())}),[n,r,e])}}),f=n(6369),p=(0,i.j)({thunks:{},thunkReducers:{},reducers:{peerStatusUpdated:function(e,t){e.peerStatus=t.payload,"disconnected"===t.payload&&(e.incomingCameraStreamId=null,e.incomingDisplayStreamId=null,e.isReceivingAudio=!1,e.isReceivingVideo=!1)}},useKitHook:function(){}}),v=n(4463),h=(0,n(2795).U)("takeover-kit"),m=(0,i.j)({thunks:{},thunkReducers:{},reducers:{},useKitHook:function(){var e=(0,c.I0)(),t=(0,u.Q)((function(e){return e.realtime})),n=t.isTakeover,r=t.peerStatus,o=(0,u.Q)((function(e){return e.app})),i=o.org,a=o.hasOptedIntoTakeover,d=o.screenTakeoverOn,f=o.showTakeoverOptin,p="ask"===i.widgetSettings.takeover,v=!p||a,m="connected"===r;(0,s.d4)((function(){m&&n&&p&&!a&&(h.debug("Visitor isTakeover, but permission required, show modal"),e((0,l.ah)(!0)))}),[m,n,p,a,e]),(0,s.d4)((function(){!n&&f&&(h.debug("Visitor not isTakeover, but modal shown, hide modal"),e((0,l.ah)(!1)))}),[n,f,e]),(0,s.d4)((function(){m&&n&&v&&!d&&(h.debug("Visitor isTakeover, turn on takeover"),e((0,l.zS)(!0)))}),[m,n,v,d,e]),(0,s.d4)((function(){!d||m&&n||(h.debug("Ceasing takeover because ".concat(n?"peer is not connected":"isTakeover is false")),e((0,l.zS)(!1)))}),[d,m,n,e])}}),g=[r.H,o.S,f.r,p,v.b,m,d,a]},6436:(e,t,n)=>{"use strict";n.d(t,{nw:()=>Vt,bW:()=>tn,zp:()=>Kt,yQ:()=>en,Th:()=>nn,lt:()=>qt,NM:()=>Cn,S9:()=>kn,iD:()=>Sn,Ho:()=>wn,DZ:()=>_n,_F:()=>An,ES:()=>$t,hQ:()=>an,zO:()=>rn,Ew:()=>on,O1:()=>Xt,zA:()=>Qt,S:()=>zt,dS:()=>sn,if:()=>gn,tD:()=>yn,fD:()=>cn,G7:()=>ln,Qn:()=>dn,d2:()=>bn,Yi:()=>un,nJ:()=>Yt,A4:()=>En,VU:()=>In,M:()=>On,q8:()=>pn,jQ:()=>Tn,sn:()=>xn,wh:()=>fn});var r,o=n(4942),i=n(5861),a=n(885),s=n(4687),c=n.n(s),u=n(2795),l=n(7780),d=n(9513),f=n(4578),p=function(e,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},p(e,t)};function v(){}function h(){h.init.call(this)}function m(e){return void 0===e._maxListeners?h.defaultMaxListeners:e._maxListeners}function g(e,t,n){if(t)e.call(n);else for(var r=e.length,o=k(e,r),i=0;i<r;++i)o[i].call(n)}function y(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=k(e,o),a=0;a<o;++a)i[a].call(n,r)}function b(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,a=k(e,i),s=0;s<i;++s)a[s].call(n,r,o)}function w(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var a=e.length,s=k(e,a),c=0;c<a;++c)s[c].call(n,r,o,i)}function _(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=k(e,o),a=0;a<o;++a)i[a].apply(n,r)}function S(e,t,n,r){var o,i,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]):(i=e._events=new v,e._eventsCount=0),a){if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=m(e))&&o>0&&a.length>o){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[t]=n,++e._eventsCount;return e}function E(e,t,n){var r=!1;function o(){e.removeListener(t,o),r||(r=!0,n.apply(e,arguments))}return o.listener=n,o}function C(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function k(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function I(e,t){if(!e.length)return[];var n=new RegExp(".{1,"+t+"}","g"),r=e.match(n),o="10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){var t=parseInt(e,10);return(t^16*Math.random()>>t/4).toString(16)}));return r.map((function(e,t){return{id:o,chunks:r.length,chunk:t+1,data:e}}))}v.prototype=Object.create(null),h.EventEmitter=h,h.usingDomains=!1,h.prototype.domain=void 0,h.prototype._events=void 0,h.prototype._maxListeners=void 0,h.defaultMaxListeners=10,h.init=function(){this.domain=null,h.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new v,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},h.prototype.getMaxListeners=function(){return m(this)},h.prototype.emit=function(e){var t,n,r,o,i,a,s,c="error"===e;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(t=arguments[1],!s){if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(n=a[e]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:g(n,l,this);break;case 2:y(n,l,this,arguments[1]);break;case 3:b(n,l,this,arguments[1],arguments[2]);break;case 4:w(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];_(n,l,this,o)}return!0},h.prototype.addListener=function(e,t){return S(this,e,t,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(e,t){return S(this,e,t,!0)},h.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,E(this,e,t)),this},h.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,E(this,e,t)),this},h.prototype.removeListener=function(e,t){var n,r,o,i,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new v:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length;i-->0;)if(n[i]===t||n[i].listener&&n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new v,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o);r.removeListener&&this.emit("removeListener",e,a||t)}return this},h.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new v,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new v:delete n[e]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new v,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},h.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},h.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):C.call(e,t)},h.prototype.listenerCount=C,h.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}((function(){var e=r.call(this)||this;return e.chunkMap={},e.feedChunk=function(t){if(e.chunkMap[t.id]||(e.chunkMap[t.id]=Array(t.chunks).fill(null)),e.chunkMap[t.id][t.chunk-1]=t.data,-1===e.chunkMap[t.id].findIndex((function(e){return null===e}))){var n=e.chunkMap[t.id].join("");e.emit("data",n),delete e.chunkMap[t.id]}},e.addListener("chunk",(function(t){!function(e){return!!e&&"object"==typeof e&&"string"==typeof e.id&&"number"==typeof e.chunks&&"number"==typeof e.chunk&&"string"==typeof e.data}(t)?console.warn("Chunkosaurus received non-chunk data "+t):e.feedChunk(t)})),e}),r=h);var T=n(1296),O=n.n(T),x=n(5776),A=n(8429),D=n(7937),R=n(2835),L=n(9199),P=n(1950),M=n(5713),N=n(3668),j=n(9046),W="http://www.w3.org/2000/svg",U=0,V=null,F=null,B=null,Z=!1,H=0,G=function(){if(V=null,B){Z=!0,setTimeout((function(){return Z=!1}),100);var e=B;B=null,e.style.opacity="0",setTimeout((function(){e.remove()}),4e3)}},K=n(3109),q=n(8477),z=n(5592),Y=n(2611),X=n(5164),J=n(1892),$=n(4049),Q=n(5671),ee=n(3144),te=n(7220),ne=n(136),re=n(2963),oe=n(1120),ie=n(2407),ae=n(6242);function se(){return(se=(0,i.Z)(c().mark((function e(){var t,r,o,i,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ae.isBrowserFirefox){e.next=8;break}return e.next=3,n.e(830).then(n.t.bind(n,9989,23));case 3:t=e.sent,r=t.TransformStream,o=t.ReadableStream,i=t.WritableStream,window.TransformStream=r,window.ReadableStream=o,window.WritableStream=i;case 8:if(!ae.isBrowserSafari&&!ae.isBrowserFirefox){e.next=14;break}return e.next=11,n.e(347).then(n.bind(n,9429));case 11:a=e.sent,s=a.CompressionStream,window.CompressionStream=s;case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){se.apply(this,arguments)}();var ce=function(){var e=(0,i.Z)(c().mark((function e(t){var n,r,o,a,s,u,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,r=new CompressionStream("gzip"),ae.isBrowserFirefox?(o=function(e){(0,ne.Z)(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,oe.Z)(t);if(n){var o=(0,oe.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,re.Z)(this,e)});function o(e){return(0,Q.Z)(this,o),r.call(this,{start:function(t){return(0,i.Z)(c().mark((function n(){var r,o,i,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=!1;case 1:if(r){n.next=13;break}return n.next=4,e.read();case 4:if(o=n.sent,i=o.done,a=o.value,r=i,!i){n.next=10;break}return n.abrupt("break",13);case 10:t.enqueue(a),n.next=1;break;case 13:t.close(),e.releaseLock();case 15:case"end":return n.stop()}}),n)})))()}})}return(0,ee.Z)(o)}((0,ie.Z)(ReadableStream)),a=new o(t.stream().getReader()),n=a.pipeThrough(r)):n=t.stream().pipeThrough(r),s=!1,u=[],l=n.getReader();case 6:if(s){e.next=14;break}return e.next=9,l.read();case 9:d=e.sent,s=d.done,d.value&&u.push(d.value),e.next=6;break;case 14:return e.abrupt("return",new Blob(u));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=n(7326);function le(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,oe.Z)(e)););return e}function de(){return de="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=le(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},de.apply(this,arguments)}var fe=n(7856);var pe,ve,he=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};!function(e){e.introduction="introduction",e.visitorUpdate="update",e.alert="alert",e.identity="identity",e.dialAgentMissed="missed_call",e.acceptedSpying="accepted_spying",e.acceptedTakeover="accepted_takeover",e.acceptedCall="accepted_call",e.rejectedCall="rejected_call",e.chatMessage="chat_message",e.chatTyping="chat_typing",e.readChatMessages="read_chat_messages",e.rrwebEvent="rrweb_event",e.dial="dial",e.startJourney="start_journey",e.startedBookMeeting="started_book_meeting",e.testToken="test_token"}(ve||(ve={}));var me,ge=Object.assign(Object.assign({},ve),fe.as);!function(e){e.init="init",e.peerSignal="peer_setup",e.update="update",e.availability="availability",e.chatMessage="chat_message",e.chatTyping="chat_typing",e.forceDial="force_dial",e.rrwebEventAcks="rrweb_event_acks",e.pubsubMessage="pubsub_message",e.visitorRelay="visitor_relay",e.webRtcConnection="webrtc_connection",e.widgetSettingsUpdate="widget_settings_update"}(me||(me={}));var ye=Object.assign(Object.assign({},me),fe.dW),be=ye,we=function(e){(0,ne.Z)(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,oe.Z)(t);if(n){var o=(0,oe.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,re.Z)(this,e)});function o(e){var t,n;return(0,Q.Z)(this,o),n=r.call(this,e),pe.set((0,ue.Z)(n),""),de((t=(0,ue.Z)(n),(0,oe.Z)(o.prototype)),"addChattyAction",t).call(t,be.rrwebEventAcks),n}return(0,ee.Z)(o,[{key:"setClientKey",value:function(e){!function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?o.call(e,n):o?o.value=n:t.set(e,n)}(this,pe,e,"f")}},{key:"makeConnectQuery",value:function(){if(!he(this,pe,"f"))throw new Error("Must set client key before connecting");return Object.assign({role:"visitor",clientKey:he(this,pe,"f")},de((0,oe.Z)(o.prototype),"makeConnectQuery",this).call(this))}}]),o}(fe.UJ);pe=new WeakMap;var _e,Se=n(2982),Ee=(0,u.U)("rrweb-deduplicator"),Ce=(_e=0,function(e){Date.now()-_e>5e3&&(_e=Date.now(),Ee.debug("".concat(e," [throttled log ").concat(5e3,"ms]")))}),ke=function(e){return Object.entries(e.attributes).reduce((function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1];if(o&&"string"!=typeof o){var i=Object.keys(o).join(",");return"".concat(e,":").concat(r,":").concat(i)}return"".concat(e,":").concat(r)}),"")};function Ie(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oe,xe,Ae,De,Re,Le,Pe,Me,Ne,je,We,Ue,Ve,Fe,Be,Ze,He,Ge,Ke,qe,ze,Ye,Xe,Je,$e,Qe,et,tt,nt=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},rt=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},ot=(0,u.U)("rrweb-router"),it=function(){function e(t,n){var r=this;(0,Q.Z)(this,e),Oe.add(this),xe.set(this,void 0),Ae.set(this,void 0),De.set(this,void 0),Re.set(this,void 0),Le.set(this,""),Pe.set(this,""),Me.set(this,{}),Ne.set(this,new Map),je.set(this,0),We.set(this,0),Ue.set(this,0),Ge.set(this,(function(e){return rt(r,Me,"f")[e]||(rt(r,Me,"f")[e]=0),rt(r,Me,"f")[e]+=1,rt(r,Me,"f")[e]})),Ke.set(this,(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.length)throw new Error("Cannot envelope without any events");var n=e[0],o=n.rid,i=n.mode,a={type:"event",event:{type:t?"rrwebWidgetEvent":"rrwebEvent",events:e,rid:o,mode:i},nonce:rt(r,Ge,"f").call(r,o)};return a})),nt(this,xe,t,"f"),nt(this,Ae,n,"f"),nt(this,De,new at(rt(this,Oe,"m",Ve).bind(this)),"f"),nt(this,Re,new at(rt(this,Oe,"m",Fe).bind(this)),"f")}return(0,ee.Z)(e,[{key:"sendRrwebEvent",value:function(e){rt(this,De,"f").add(e)}},{key:"sendRrwebWidgetEvent",value:function(e){rt(this,Re,"f").add(e)}},{key:"handleRrwebEventAcks",value:function(e){for(var t=this,n=function(){var e=(0,a.Z)(o[r],2),n=e[0];e[1].forEach((function(e){return rt(t,Oe,"m",Ye).call(t,n,e)}))},r=0,o=Object.entries(e);r<o.length;r++)n()}},{key:"getAwaitedAcks",value:function(){return rt(this,Ne,"f")}}]),e}();xe=new WeakMap,Ae=new WeakMap,De=new WeakMap,Re=new WeakMap,Le=new WeakMap,Pe=new WeakMap,Me=new WeakMap,Ne=new WeakMap,je=new WeakMap,We=new WeakMap,Ue=new WeakMap,Ge=new WeakMap,Ke=new WeakMap,Oe=new WeakSet,Ve=function(){var e=(0,i.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=t.filter((function(e){return!(0,J.M)(e)}))).length){e.next=3;break}return e.abrupt("return");case 3:return n=rt(this,Ke,"f").call(this,t),rt(this,Oe,"m",qe).call(this,n.event.rid,rt(this,Le,"f")),e.next=7,rt(this,Oe,"m",Be).call(this,[n]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=(0,i.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=rt(this,Ke,"f").call(this,t,!0),rt(this,Oe,"m",qe).call(this,rt(this,Pe,"f"),n.event.rid),e.next=4,rt(this,Oe,"m",Be).call(this,[n]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=(0,i.Z)(c().mark((function e(t){var n,r,o,i,a,s,u,l,d,f,p=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=te.ZP.getState().realtime,r=n.helpedBySid,o=n.serverStatus,i=n.sid,a=n.sbid,r){e.next=4;break}return ot.debug("Tried to send rrweb event without associated agent",t),e.abrupt("return");case 4:if(i&&a){e.next=7;break}return ot.warn("Tried to send rrweb event without required sbid fields (sid=".concat(i,", sbid=").concat(a,")")),e.abrupt("return");case 7:if(t.forEach((function(e){rt(p,Oe,"m",ze).call(p,e.event.rid,e.nonce,e)})),s=JSON.stringify(t),!rt(this,Oe,"m",He).call(this,t)){e.next=16;break}return e.next=12,rt(this,Oe,"m",Ze).call(this,s,i,a);case 12:if(!e.sent){e.next=15;break}return e.abrupt("return");case 15:ot.warn("Could not upload snapshot, will try to send via ws/peer");case 16:u=I(s,15900),l=Ie(u);try{for(l.s();!(d=l.n()).done;)f=d.value,rt(this,Ae,"f")&&rt(this,Ae,"f").isDataChannelOpen()?rt(this,Ae,"f").sendChunk(f):"connected"===o&&rt(this,xe,"f")?rt(this,xe,"f").emit(ge.rrwebEvent,{agentSid:r,content:f},!0):ot.warn("No route to send rrweb event to agent ".concat(r,", envelopes ").concat(t,", chunk ").concat(f.chunk,"/").concat(f.chunks," (").concat(f.id,")"))}catch(e){l.e(e)}finally{l.f()}case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,i.Z)(c().mark((function e(t,n,r){var o,i,a,s,u,l,d,f,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=Date.now(),i=new Blob([t],{type:"text/plain"}),e.next=5,ce(i);case 5:return a=e.sent,s=Math.round((Date.now()-o)/100)/10,u=Math.round(i.size/100)/10,l=Math.round(a.size/100)/10,ot.info("Compressed ".concat(u,"KB snapshot to ").concat(l,"KB in ").concat(s," seconds")),d=Date.now(),e.next=13,(0,N.Oj)(n,r,a);case 13:if(f=e.sent,p=Math.round((Date.now()-d)/100)/10,200!=f.status){e.next=19;break}ot.info("Uploaded ".concat(l,"KB snapshot in ").concat(p," seconds")),e.next=21;break;case 19:return ot.warn("Failed to upload ".concat(l,"KB snapshot, (status=").concat(f.status,")")),e.abrupt("return",!1);case 21:e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(0),ot.error("There was an error attempting to upload a snapshot",e.t0),e.abrupt("return",!1);case 27:return e.abrupt("return",!0);case 28:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t,n,r){return e.apply(this,arguments)}}(),He=function(e){return e.reduce((function(e,t){return e||!("event"!=(n=t).type||"rrwebEvent"!=n.event.type||!n.event.events.length||!n.event.events.find((function(e){return e.type==L.tw.FullSnapshot})));var n}),!1)},qe=function(e,t){var n=rt(this,Pe,"f")!==e||rt(this,Le,"f")!=t;nt(this,Pe,e,"f"),nt(this,Le,t,"f"),n&&rt(this,Oe,"m",Je).call(this)},ze=function(e,t,n){rt(this,Oe,"m",Xe).call(this);var r=rt(this,Ne,"f").get(e);r||(r=new Map,rt(this,Ne,"f").set(e,r));var o=r.get(t);r.set(t,{ts:Date.now(),envelope:n,count:o&&o.count||0})},Ye=function(e,t){var n;null===(n=rt(this,Ne,"f").get(e))||void 0===n||n.delete(t)},Xe=function(){var e=this;rt(this,je,"f")||nt(this,je,window.setTimeout((function(){rt(e,Oe,"m",Je).call(e)}),1e3),"f")},Je=function(){var e=this;clearTimeout(rt(this,je,"f")),nt(this,je,0,"f");var t,n=[],r=Ie(rt(this,Ne,"f"));try{for(r.s();!(t=r.n()).done;){var o=(0,a.Z)(t.value,2),i=o[0];o[1],i!==rt(this,Pe,"f")&&i!==rt(this,Le,"f")&&n.push(i)}}catch(e){r.e(e)}finally{r.f()}if(n.length&&(ot.debug("Clearing old rid acks ".concat(n,", current rids (main=").concat(rt(this,Pe,"f"),", widget=").concat(rt(this,Le,"f"),")")),n.forEach((function(t){return rt(e,Ne,"f").delete(t)}))),!(Date.now()-rt(this,We,"f")<16e3)){var s=Date.now(),c=[],u=[];rt(this,Ne,"f").forEach((function(t,n){t.forEach((function(t,r){t.count>4?(nt(e,We,Date.now(),"f"),c.push([n,r]),Date.now()-rt(e,Ue,"f")>1e4&&(nt(e,Ue,Date.now(),"f"),ot.warn("Wanted to resend unacked event ".concat(n,":").concat(r,", but its been sent ").concat(t.count," times already ")))):s-t.ts>4e3&&(t.count=t.count+1,ot.debug("Resending (".concat(t.count,"x) event due to missing/late ACK ").concat(n,":").concat(r)),u.push(t.envelope))}))})),u.length&&rt(this,Oe,"m",Be).call(this,u),c.forEach((function(t){var n,r=(0,a.Z)(t,2),o=r[0],i=r[1];ot.debug("Removing failed resend event ".concat(o,":").concat(i)),null===(n=rt(e,Ne,"f").get(o))||void 0===n||n.delete(i)}))}};var at=function(){function e(t){(0,Q.Z)(this,e),$e.add(this),Qe.set(this,new Map),et.set(this,void 0),nt(this,et,t,"f")}return(0,ee.Z)(e,[{key:"add",value:function(t){var n=this,r=rt(this,Qe,"f").get(t.rid);r?r.push(t):(rt(this,Qe,"f").set(t.rid,[t]),setTimeout((function(){return rt(n,$e,"m",tt).bind(n)(t.rid)}),e.THROTTLE))}}]),e}();Qe=new WeakMap,et=new WeakMap,$e=new WeakSet,tt=function(e){var t=rt(this,Qe,"f").get(e);rt(this,Qe,"f").delete(e),t&&t.length&&rt(this,et,"f").call(this,function(e){var t={};e.forEach((function(e,n){e.type===L.tw.IncrementalSnapshot&&e.data.source===L.yh.Mutation&&e.data.attributes.length&&e.data.attributes.forEach((function(r){var o=t[r.id]||[],i=ke(r);o.push(Object.assign(Object.assign({},r),{eventIndex:n,eventTimestamp:e.timestamp,hash:i})),t[r.id]=o}))}));var n=[],r=[];Object.entries(t).forEach((function(e){for(var t=(0,a.Z)(e,2),o=(t[0],t[1]),i=[],s=[],c=(0,Se.Z)(o),u=function(){var e=c.pop();e&&!i.find((function(t){return t.hash===e.hash}))?i.push(e):e&&s.push(e)};c.length;)u();n=n.concat(i),r=r.concat(s)})),e.forEach((function(e,t){if(e.type===L.tw.IncrementalSnapshot&&e.data.source===L.yh.Mutation){var n=e.data.attributes,o=r.filter((function(e){return e.eventIndex===t}));o.length&&o.forEach((function(e){n.forEach((function(t){t.id===e.id&&e.hash===ke(t)&&(t.attributes={})}))}))}}));var o=0,i=e.filter((function(e){if(function(e){return e.type===L.tw.IncrementalSnapshot&&e.data.source===L.yh.Mutation&&!!e.data.attributes&&Array.isArray(e.data.attributes)}(e)){var t=e.data.attributes.length,n=e.data.attributes.filter((function(e){return!Object.keys(e.attributes).length})).length;if(t&&t===n&&!e.data.adds.length&&!e.data.removes.length&&!e.data.texts.length)return o++,!1}return!0}));return o&&Ce("Removed ".concat(o," empty mutation events.")),i}(t))},at.THROTTLE=200;var st=n(7187),ct=n.n(st),ut=n(6817),lt=n(7109);function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ft,pt,vt,ht,mt,gt,yt,bt,wt,_t,St,Et,Ct,kt,It,Tt,Ot=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},xt=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},At=(0,u.U)("sb-peer"),Dt=function(){var e=(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(619).then(n.bind(n,2374));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!function(e){e.connect="connect",e.data="data",e.disconnect="disconnect",e.streamout="streamout",e.streamin="streamin",e.status="status"}(It||(It={})),function(e){e.CLOSED="CLOSED",e.ERROR="ERROR"}(Tt||(Tt={}));var Rt=function(){function e(t){var n=this;(0,Q.Z)(this,e),ft.add(this),pt.set(this,new(ct().EventEmitter)),vt.set(this,"disconnected"),ht.set(this,null),mt.set(this,null),gt.set(this,0),yt.set(this,void 0),bt.set(this,"on"),Ot(this,yt,t,"f"),t.onStreamChange((function(e){var t=e.streamType,r=e.stream;return xt(n,ft,"m",Ct).call(n,t,r)}))}var t;return(0,ee.Z)(e,[{key:"connect",value:(t=(0,i.Z)(c().mark((function e(t,n){var r,o,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(At.info("Starting new WebRTC connection. token: ".concat(t?"<redacted>":t," room: ").concat(n)),xt(this,ht,"f")){e.next=8;break}return e.next=4,Dt();case 4:r=e.sent,o=r.TwilioVideoWebRtcClient,Ot(this,mt,o,"f"),Ot(this,ht,new o(xt(this,yt,"f"),At),"f");case 8:xt(this,ht,"f").connect({token:t,room:n}),xt(this,ht,"f").isConnected()?xt(this,ft,"m",wt).call(this,"connected"):(Ot(this,gt,Date.now(),"f"),xt(this,ft,"m",wt).call(this,"connecting")),xt(this,ht,"f").removeAllListeners(),xt(this,ht,"f").on(ut.VS.connect,(function(){var e=Date.now()-xt(i,gt,"f");At.info("Connected to peer in ".concat(e,"ms")),xt(i,pt,"f").emit(It.connect,{elapsed:e}),xt(i,ft,"m",wt).call(i,"connected"),xt(i,ft,"m",kt).call(i)})),xt(this,ht,"f").on(ut.VS.data,(function(e){var t=JSON.parse(e);xt(i,pt,"f").emit(It.data,t)})),xt(this,ht,"f").on(ut.VS.streamin,(function(e,t){var n;At.debug("New incoming stream ".concat(null==e?void 0:e.id));var r={type:t,stream:e,isReceivingAudio:!!(null==e?void 0:e.getAudioTracks().length),isReceivingVideo:!!(null==e?void 0:e.getVideoTracks().length)};At.log("Incoming stream change, video: ".concat(r.isReceivingVideo,", audio: ").concat(r.isReceivingAudio,", id: ").concat((null===(n=r.stream)||void 0===n?void 0:n.id)||"n/a")),xt(i,pt,"f").emit(It.streamin,r)})),xt(this,ht,"f").on(ut.VS.disconnect,(function(e){At.debug("Peer disconnected ".concat(e)),i.disconnect()}));case 15:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"disconnect",value:function(){var e;null===(e=xt(this,ht,"f"))||void 0===e||e.disconnect(),xt(this,pt,"f").emit(It.disconnect,Tt.CLOSED),xt(this,ft,"m",wt).call(this,"disconnected")}},{key:"sendWidgetState",value:function(e){Ot(this,bt,e.speakerStatus,"f"),xt(this,ft,"m",St).call(this)}},{key:"sendChunk",value:function(e){xt(this,ht,"f")?xt(this,ht,"f").sendData(JSON.stringify(e)):At.warn("Tried to send chunk over peer without peer")}},{key:"getIncomingCameraStream",value:function(){var e;return null===(e=xt(this,ht,"f"))||void 0===e?void 0:e.getIncomingCameraStream()}},{key:"getIncomingDisplayStream",value:function(){var e;return null===(e=xt(this,ht,"f"))||void 0===e?void 0:e.getIncomingDisplayStream()}},{key:"isDataChannelOpen",value:function(){return xt(this,ht,"f")&&xt(this,ht,"f").isDataChannelOpen()}},{key:"onConnect",value:function(e){xt(this,pt,"f").on(It.connect,e)}},{key:"onStatus",value:function(e){xt(this,pt,"f").on(It.status,e)}},{key:"onData",value:function(e){xt(this,pt,"f").on(It.data,e)}},{key:"onDisconnect",value:function(e){xt(this,pt,"f").on(It.disconnect,e)}},{key:"onStreamInChange",value:function(e){xt(this,pt,"f").on(It.streamin,e)}},{key:"runDiagnostics",value:function(e){var t;null===(t=xt(this,mt,"f"))||void 0===t||t.runDiagnostics(e,At)}}]),e}();pt=new WeakMap,vt=new WeakMap,ht=new WeakMap,mt=new WeakMap,gt=new WeakMap,yt=new WeakMap,bt=new WeakMap,ft=new WeakSet,wt=function(e){e!==xt(this,vt,"f")&&xt(this,pt,"f").emit(It.status,e),Ot(this,vt,e,"f")},_t=function(e){if(xt(this,ht,"f")&&xt(this,ht,"f").isDataChannelOpen())try{var t=I(JSON.stringify(e),15900);t.forEach(this.sendChunk.bind(this));var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;this.sendChunk(o)}}catch(e){r.e(e)}finally{r.f()}}catch(t){At.error("Error sending data to peer",e,t)}},St=function(){var e=xt(this,yt,"f").getCameraAudioTrack(),t=xt(this,yt,"f").getCameraVideoTrack();xt(this,ft,"m",_t).call(this,{type:lt.L0.widgetState,widgetState:{micStatus:e&&e.enabled?"on":"off",camStatus:t&&t.enabled?"on":"off",speakerStatus:xt(this,bt,"f")}})},Et=function(e,t){var n;t&&(null===(n=xt(this,ht,"f"))||void 0===n||n.addStream(t,e)),xt(this,ft,"m",St).call(this)},Ct=function(e,t){var n;if(xt(this,ht,"f")){var r=e===R._.camera?xt(this,ht,"f").getOutgoingCameraStream():xt(this,ht,"f").getOutgoingDisplayStream();if(r)try{null===(n=xt(this,ht,"f"))||void 0===n||n.removeStream(r)}catch(e){}xt(this,ft,"m",Et).call(this,e,t)}},kt=function(){var e=xt(this,yt,"f").getCameraStream();e&&(At.info("Reconnecting camera stream to reconnected peer"),xt(this,ft,"m",Et).call(this,R._.camera,e));var t=xt(this,yt,"f").getDisplayStream();t&&(At.info("Reconnecting display stream to reconnected peer"),xt(this,ft,"m",Et).call(this,R._.display,t))};var Lt,Pt,Mt=(0,u.U)("manager"),Nt=new we({logger:(0,u.U)("sb-socket-widget"),protocolVersion:(0,D.J)(),url:"wss://ws.servicebell.com/v1",reconnectWhenOffline:!1}),jt=new R.M(l.l),Wt=new Rt(jt),Ut=null,Vt=function(e){var t=e.children;Ft();var n=(0,z.Q)((function(e){return e.realtime})).serverConnectCount;return(0,x.az)(x.HY,null,n?t:null)},Ft=function(){Bt(),Zt(),Ht(),$.u.forEach((function(e){return e.useKitHook()}))},Bt=function(){var e=(0,A.oR)(),t=(0,x.eJ)(!1),n=(0,a.Z)(t,2),r=n[0],o=n[1];(0,x.d4)((function(){r||(vn(e),hn(e),Dn(e),Rn(e),Ln(e),o(!0))}),[e,r])},Zt=function(){var e=(0,A.oR)(),t=(0,z.Q)((function(e){return"loaded"===e.realtime.initialDataStatus})),n=(0,x.eJ)(!1),r=(0,a.Z)(n,2),o=r[0],i=r[1];(0,x.d4)((function(){t&&!o&&(Gt(e),i(!0))}),[e,t,o])},Ht=function(){var e=(0,A.I0)(),t=(0,z.Q)((function(e){return e.realtime})),n=t.isVisitorVideoAllowed,r=t.outgoingCameraStreamId;(0,x.d4)((function(){!n&&r&&e((0,Y.oU)({video:!1}))}),[n,r,e])},Gt=function(e){var t=e.getState().realtime.clientKey;t?(Mt.debug("Create socket"),Nt.setClientKey(t),Nt.on(ye.status,(function(t){e.dispatch((0,X.X$)(t))})),Nt.on(ye.init,(function(t){return e.dispatch((0,Y.Vo)(t))})),Nt.on(ye.widgetSettingsUpdate,(function(t){return e.dispatch((0,Y.cx)(t.obj))})),Nt.on(ye.webRtcConnection,(function(t){var n=t.token,r=t.room,o=t.agentId;Mt.info("Received WebRTC connection request for room ".concat(r));var i=e.getState();i.realtime.helpedBy===o?Wt.connect(n,r).catch((function(){return Mt.error("Failed to start new WebRtc connection")})):Mt.info("agentId in the token (".concat(o,") does not match current helpedBy (").concat(i.realtime.helpedBy,"). Ignoring connection request."))})),Nt.on(ye.update,(function(t){e.dispatch((0,X.T)(t))})),Nt.on(ye.availability,(function(t){var n=e.getState();e.dispatch((0,Y.mP)(Object.assign(Object.assign({},n.app.org),t)))})),Nt.on(ye.forceDial,(function(){e.dispatch((0,Y.FN)()),(0,P.e)()})),Nt.on(ye.rrwebEventAcks,(function(e){null==Ut||Ut.handleRrwebEventAcks(e.acks)})),Nt.on(ye.pubsubMessage,(function(t){var n=t.channelType,r=t.message;switch(n){case L.ZL["chat.widget.visitor"]:switch(r.type){case"UPDATE_CONVERSATION":var o=r.data;e.dispatch((0,f.i7)(o));break;case"NEW_MESSAGE":var i=r.data;"bot"===i.sourceType?e.dispatch((0,f.JC)(i)):e.dispatch((0,f.DQ)(i));break;case"UPDATE_MESSAGE":var a=r.data;e.dispatch((0,f.os)(a))}break;case L.ZL["availability.org"]:e.dispatch((0,Y.lh)(r))}})),Nt.on(ye.chatTyping,(function(t){e.dispatch((0,f.ij)(t))})),Nt.on(ye.visitorRelay,(function(t){"rrweb-reset"===t.type&&(Mt.debug("Received a rrweb reset from agent, will attempt to restart rrweb recording"),e.dispatch((0,X.a7)({isReady:!1})))})),mn(),(0,j.GD)({sbSocket:Nt})):Mt.warn("Tried to initialize socket without required realtime fields (clientKey=".concat(t,")"))},Kt=function(){Mt.debug("Connect socket"),Nt.connect()},qt=function(e){Nt.disconnect(e)},zt=function(){var e=(0,i.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mt.debug("Send introduction",t),e.next=3,Nt.emit(ge.introduction,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yt=function(){var e=(0,i.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nt.emit(ge.visitorUpdate,t,!0);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Mt.warn("Error sending visitor update: ".concat(e.t0));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),Xt=function(e){try{Nt.emit(ge.alert,e,!0)}catch(e){Mt.warn("Error sending alert: ".concat(e))}},Jt=!1,$t=function(){var e=(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Jt){e.next=2;break}return e.abrupt("return");case 2:return Jt=!0,e.prev=3,e.next=6,Nt.emit(ge.testToken);case 6:t=e.sent,Wt.runDiagnostics(t.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Mt.warn("Error while trying to run preflight tests: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),Qt=function(){var e=(0,i.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt.emit(ge.identity,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),en=function(e){var t=null==e?void 0:e.conversationId;t&&Nt.emit(ge.dial,{conversationId:t}),(0,M.Tm)("sb:dialstart")},tn=function(){Nt.emit(ge.visitorUpdate,{helpStatus:L.IB.IDLE}),(0,M.Tm)("sb:dialcancel")},nn=function(){try{Nt.emit(ge.dialAgentMissed,void 0,!0)}catch(e){Mt.warn("Error sending dial agent missed: ".concat(e))}(0,M.Tm)("sb:dialmiss")},rn=function(e){Nt.emit(ge.acceptedSpying,{isAccept:e},!0)},on=function(){Nt.emit(ge.acceptedTakeover,void 0,!0)},an=function(){Nt.emit(ge.acceptedCall,void 0,!0)},sn=function(){Nt.emit(ge.rejectedCall,void 0,!0)},cn=function(e){return Mt.debug("sendSocketChatMessage, conversation: ".concat(e.conversationId," visitor: ").concat(e.visitorId)),Nt.emit(ge.chatMessage,e)},un=function(e){Nt.emit(ge.chatTyping,e)},ln=(Lt={},Pt=O()((function(){var e;e=Object.keys(Lt),Nt.emit(ge.readChatMessages,{chatMessageIds:e}),Lt={}}),2e3),function(e){Lt=Object.assign(Object.assign({},Lt),e),Pt()}),dn=function(){Nt.emit(ge.startedBookMeeting)},fn=function(e){return Nt.emit(ge.subscribe,{channels:e})},pn=function(){var e=(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt.emit(ge.startJourney);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),vn=function(e){jt.onStreamChange((function(t){var n,r,o,i;if(t.streamType===R._.camera){var a=null===(n=t.stream)||void 0===n?void 0:n.getAudioTracks()[0],s=null===(r=t.stream)||void 0===r?void 0:r.getVideoTracks()[0];e.dispatch((0,X.JF)({outgoingCameraStreamId:(null===(o=t.stream)||void 0===o?void 0:o.id)||null,outgoingCameraAudioTrackId:(null==a?void 0:a.id)||null,outgoingCameraVideoTrackId:(null==s?void 0:s.id)||null}))}else t.streamType===R._.display&&(e.dispatch((0,X.z5)((null===(i=t.stream)||void 0===i?void 0:i.id)||null)),t.stream||e.dispatch((0,Y.MJ)()))}))},hn=function(e){Wt.onStatus((function(t){Mt.debug('Peer status "'.concat(t,'"')),e.dispatch((0,X.Fy)(t))})),Wt.onData((function(t){"event"===t.type?(0,J.f)(t.event):"draw"==t.type?function(e){if(e.stop)return clearTimeout(H),void G();if(!Z){if(V){var t=V.x,n=V.y,r=e.x,o=e.y,i=function(){if(!F){var e=(0,j.zb)();V=null,F=e.createElementNS(W,"svg");var t=function(){F&&(F.style.width="".concat(e.body.scrollWidth,"px"),F.style.height="".concat(e.body.scrollHeight,"px"))};new ResizeObserver(t).observe(e.body),F&&(F.style.position="absolute",F.style.zIndex="2147483647",F.style.top="0",F.style.left="0",t(),F.style.pointerEvents="none",F.id="__sb_drawing_layer__"),e.body.appendChild(F)}return F}();if(B){var a=B.getAttribute("d");B.setAttribute("d","".concat(a," L").concat(r,",").concat(o))}else B=function(e,t,n,r){var o=(0,j.zb)().createElementNS(W,"path");return o.setAttribute("d","M".concat(e,",").concat(t," L").concat(n,",").concat(r)),o.setAttribute("id","sbPath".concat(U)),o.setAttribute("stroke","red"),o.setAttribute("fill","none"),o.setAttribute("stroke-width","5"),o.setAttribute("stroke-linecap","round"),o.setAttribute("stroke-linejoin","round"),o.style.opacity="1",o.style.transition="opacity ".concat(3e3,"ms ease-in-out"),U++,o}(t,n,r,o),i.appendChild(B)}clearTimeout(H),H=window.setTimeout(G,3e3),V=e}}(t.event):"widgetExtent"==t.type?e.dispatch((0,Y.pU)(t.event.extent)):"chatExpanded"===t.type?(e.dispatch((0,Y.vo)(!t.event.expanded)),e.dispatch((0,d.XE)(t.event.expanded))):"feDashboardState"===t.type?e.dispatch((0,X.Ww)(t.feDashboardState)):"rrwebEventAcks"===t.type?null==Ut||Ut.handleRrwebEventAcks(t.acks):"endCall"===t.type?e.dispatch((0,X.Ve)()):Mt.debug('Unknown sbPeer.onData event "'.concat(t,'"'))})),Wt.onStreamInChange((function(t){var n,r=t.type,i=t.stream,a=t.isReceivingAudio,s=t.isReceivingVideo,c=(n={},(0,o.Z)(n,R._.camera,X.fH),(0,o.Z)(n,R._.display,X.p),n)[r];e.dispatch(c({streamId:(null==i?void 0:i.id)||null,isReceivingAudio:a,isReceivingVideo:s}))})),mn(),(0,j.GD)({sbPeer:Wt})},mn=function(){Ut||(Ut=new it(Nt,Wt))},gn=function(e){null==Ut||Ut.sendRrwebEvent(e)},yn=function(e){null==Ut||Ut.sendRrwebWidgetEvent(e)},bn=function(e){I(JSON.stringify({type:"trigger",trigger:e}),15900).forEach(Wt.sendChunk.bind(Wt))},wn=function(){return jt.getCameraStream()},_n=function(){return jt.getCameraVideoTrack()},Sn=function(){return jt.getCameraAudioTrack()},En=function(e){Wt.sendWidgetState({speakerStatus:e})},Cn=function(){return Wt.getIncomingCameraStream()||null},kn=function(){return Wt.getIncomingDisplayStream()||null},In=function(){var e=(0,i.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt.startCameraStream(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tn=function(){jt.stopCameraStream()},On=function(){var e=(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt.startDisplayStream();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xn=function(){jt.stopDisplayStream()},An=function(){var e=(0,i.Z)(c().mark((function e(t,n,r){var o,i,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.realtime,i=o.sbid,a=o.clientKey,i&&a){e.next=4;break}return Mt.error("clientKey and visitorId required to postVisitorEmail"),e.abrupt("return");case 4:return e.next=6,(0,N._F)(i,t,n,a);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Dn=function(e){var t=!0,n=function(n){t&&!n?(t=!1,e.dispatch((0,Y.DR)(!1))):!t&&n&&(t=!0,e.dispatch((0,Y.DR)(!0)))},r=function(){return document.hidden||"hidden"===document.visibilityState},o=function(){n(!r())},i=function(){n(!1)},a=function(){n(!0)},s=function(t){var n=t.detail,r=n.href,o=n.title;e.dispatch((0,X.Yk)({url:r,urlTitle:o}))};window.removeEventListener(K.tP,s),window.addEventListener(K.tP,s),window.removeEventListener("sblocationchanged",s),window.addEventListener("sblocationchanged",s),document.removeEventListener("visibilitychange",o),document.addEventListener("visibilitychange",o),window.removeEventListener("pageshow",a),window.addEventListener("pageshow",a),window.removeEventListener("pagehide",i),window.addEventListener("pagehide",i),window.addEventListener("beforeunload",(function(t){var n=e.getState().app.stage;if("ACTIVE_CALL"===n||"DIALING"===n)return t.returnValue="Are you sure you wish to leave? You have an active help session.",t.preventDefault(),t.returnValue})),$.u.forEach((function(t){return t.setupWindowListeners&&t.setupWindowListeners(e)})),e.dispatch((0,Y.DR)(!r()))},Rn=function(e){var t=!1,n=!1;setInterval((function(){var r=e.getState().realtime,o=r.isVideo,i=!!r.outgoingCameraAudioTrackId,a=!!r.outgoingCameraVideoTrackId,s=i&&o,c=a&&o,u={isSendingAudio:i,isSendingVideo:a,isVideo:o};Sn()&&!s&&(t?(Mt.warn("Unexpected outgoing audio track, will stop it",u),jt.stopCameraAudioTrack(),n=!1):t=!0),_n()&&!c&&(n?(Mt.warn("Unexpected outgoing video track, will stop it",u),jt.stopCameraVideoTrack(),n=!1):n=!0)}),1e3)},Ln=function(e){setInterval((function(){var t=e.getState().realtime,n=t.isRrwebRecordingContextual;if(t.isRrwebRecording&&!n){var r=(0,q.R6)();r&&gn(r)}}),3e3)}},4463:(e,t,n)=>{"use strict";n.d(t,{b:()=>R});var r=n(5861),o=n(4687),i=n.n(o),a=n(5776),s=n(8429),c=n(6403),u=n(9199),l=n(5164),d=n(2795),f=n(2355),p=n(5592),v=n(7887),h=n(8477),m=n(9046),g=n(2611),y=n(1088),b=n(6688),w=n(2982),_=n(1892),S=[],E=[],C=function(e){return e.mode,e.rid,e.synthetic,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["mode","rid","synthetic"])},k=function(e,t,n){var r=(0,w.Z)(e);if(n)for(var o=r.length-1;o>=0;o--)if(r[o].type===u.tw.Meta){r=[r[o]];break}return r.push(t),r},I=n(3668),T=n(8990),O=(0,d.U)("record-kit"),x={readyToRecord:(0,c.hg)("realtime/readyToRecord",(function(e,t){var n=e.isContextual,r=void 0!==n&&n,o=e.isReady,i=t.getState,a=i().app,s=a.rootElementId,c=a.isIframeFailed,u=a.options,l=i().realtime,d=l.isRrwebRecording,f=l.isRrwebRecordingContextual,p=l.iframeLoadCount,m=l.helpedBySid,g="loaded"===i().realtime.initialDataStatus,w=(0,v.aE)(i());c&&(O.info("Will try to record in retrigger mode since iframe failed"),w="retrigger");var I=!!(null==w?void 0:w.includes("iframe"));if(g&&o&&s&&!d){O.debug("Ready to record, will start recording");try{(0,h.Sy)(i(),(function(e,t){return r?function(e,t){(0,_.M)(e)||(S=k(S,C(e),t))}(e,t):(0,b.if)(e)}),I?function(e,t){return r?function(e,t){E=k(E,C(e),t)}(e,t):(0,b.tD)(e)}:void 0,r)}catch(e){throw O.error("Error trying to start recording",e),e}I||(u.skipBlankifyExternalLinks?O.debug("Skipping blankification of external links due to app.options setting"):(0,y.a)(!1))}else{if(o||!d&&!f){var T="Cannot ".concat(o?"record":"stop recording");throw O.warn(T),Error(T)}var x=!!m&&I&&p>1;O.debug("Ready to stop recording, will stop recording".concat(x?" (skip widget)":"")),(0,h.kJ)(x)}return{isContextual:r,isReady:o}})),restartIframedRecording:(0,c.hg)("realtime/restartIframedRecording",(function(e,t){var n=t.getState,r=n().app.rootElementId,o=n().realtime.isRrwebRecording,i=(0,v.aE)(n()),a=!!(null==i?void 0:i.includes("iframe"));r&&o&&a?(O.debug("Restarting iframe recording"),(0,h.kJ)(!0),(0,h.Sy)(n(),(function(e){return(0,b.if)(e)}),(function(e){return(0,b.tD)(e)}))):O.warn("Tried to restart recording but state does not jive",{rootElementId:r,isRrwebRecording:o,isIframeMode:a})})),saveContextualRecording:(0,c.hg)("realtime/saveContextualRecording",function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a,s,c,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,o=r().realtime,a=o.clientKey,s=o.isRrwebRecordingContextual,c=o.sbid,l=r().conversation.contextualConversationId,c&&a){e.next=6;break}return O.error("clientKey and visitorId required to saveContextualRecording"),e.abrupt("return");case 6:if(!s){e.next=21;break}return void 0,i={data:{payload:{sentChatMessage:!0},tag:"sb-custom-state"},type:u.tw.Custom},k(S,i,!1),e.prev=8,e.next=11,(0,I._3)(a,c,l);case 11:return d=e.sent,e.next=14,(0,T.r)((void 0,t=JSON.stringify({page:S,widget:E}),new Blob([t])),d.data.signedPost);case 14:return e.next=16,(0,I.en)(a,d.data.id,u.dD.COMPLETE,c);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(8),O.info("Error creating/uploading/updating contextual recording:",e.t0);case 21:case"end":return e.stop()}var t,i}),e,null,[[8,18]])})));return function(t,n){return e.apply(this,arguments)}}())},A={rrwebInjectedIntoIframe:function(e,t){e.isRrwebInjectedIntoIframe=t.payload}},D=(0,f.M)({reducers:A}),R=(0,f.j)({thunks:x,thunkReducers:{readyToRecord:{fulfilled:function(e,t){e.isRrwebRecording=t.payload.isReady,e.isRrwebRecordingContextual=t.payload.isReady&&!!t.payload.isContextual}}},reducers:A,useKitHook:function(){var e=(0,s.I0)(),t=(0,p.Q)((function(e){return e.app})),n=t.isStreamEvents,r=t.isIframeFailed,o=(0,p.Q)((function(e){return!!e.app.org.gateways.CONTEXTUAL_RECORDING})),i=(0,p.Q)((function(e){return e.realtime})),c=i.initialDataStatus,u=i.isRrwebRecording,l=i.isRrwebRecordingContextual,d=i.isRrwebInjectedIntoIframe,f=i.iframeLoadCount,h=i.helpedBySid,y=i.isSpying,b=i.peerStatus,w=i.serverStatus,_=i.isIntroducedToServer,S=(0,p.Q)((function(e){return e.conversation})).hasSentChatMessage,E="loaded"===c,C=(0,p.Q)(v.aE),k=!(null==C?void 0:C.includes("iframe"))||d,I=(0,m.D9)(h),T="connected"===b||"connected"===w&&_;(0,a.d4)((function(){if(T&&h&&y&&!n)O.debug("Set isStreamEvents true"),e((0,g.HK)(!0));else if((!T||!h||!y)&&n){var t=T?h?"not in share mode":"no associated agent socket":"not connected to agent";O.debug("Stop streaming rrweb events [".concat(t,"]")),e((0,g.HK)(!1))}}),[T,h,y,n,e]),(0,a.d4)((function(){I&&h&&I!==h&&(O.debug('Sbid data "helpedBySid" has changed, restart event stream'),e((0,g.HK)(!1)))}),[I,h,e]),(0,a.d4)((function(){E&&!u&&!l&&n&&k&&(O.debug("Will start recording"),e(x.readyToRecord({isReady:!0})))}),[E,u,l,n,k,e]),(0,a.d4)((function(){!u||l||n||(O.debug("Will stop recording"),e(x.readyToRecord({isReady:!1})))}),[u,l,n,e]),(0,a.d4)((function(){!o||!E||u||l||S||n||(O.debug("Will start contextual recording"),e(x.readyToRecord({isContextual:!0,isReady:!0})))}),[o,E,u,l,S,n,e]),(0,a.d4)((function(){o&&l&&(S||n)&&(O.debug("Will stop contextual recording"),e(x.readyToRecord({isReady:!1})),S&&e(x.saveContextualRecording()))}),[o,l,S,n,e]),(0,a.d4)((function(){n&&k&&f>1&&(O.debug("Restarting recording for iframe load"),e(x.restartIframedRecording()))}),[n,k,f,e]),(0,a.d4)((function(){E&&!u&&!l&&n&&r&&(O.debug("Fallback to record events on top frame b/c iframe failed"),e(x.readyToRecord({isReady:!0})))}),[E,u,l,n,r,e])},setupWindowListeners:function(e){window.addEventListener("sbiframerrwebinjected",(function(){e.dispatch(D.rrwebInjectedIntoIframe(!0))})),window.addEventListener("sbiframeloaded",(function(){(0,h.YW)()||e.dispatch(D.rrwebInjectedIntoIframe(!1)),e.dispatch((0,l.SI)())}))}})},8477:(e,t,n)=>{"use strict";n.d(t,{lz:()=>Xe,R6:()=>Ye,YW:()=>Ke,_Y:()=>Ge,Sy:()=>qe,kJ:()=>ze});var r,o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)};function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-->0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function s(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function c(e){var t,n=null===(t=e)||void 0===t?void 0:t.host;return Boolean(n&&n.shadowRoot&&n.shadowRoot===e)}function u(e){var t=e.maskInputOptions,n=e.tagName,r=e.type,o=e.value,i=e.maskInputFn,a=o||"";return(t[n.toLowerCase()]||t[r])&&(a=i?i(a):"*".repeat(a.length)),a}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(r||(r={}));var l,d,f=1,p=new RegExp("[^a-z0-9-_:]");function v(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(h).join(""):null}catch(e){return null}}function h(e){var t=e.cssText;if(function(e){return"styleSheet"in e}(e))try{t=v(e.styleSheet)||t}catch(e){}return t}var m=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,g=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,y=/^(data:)([^,]*),(.*)/i;function b(e,t){return(e||"").replace(m,(function(e,n,r,o,i,a){var s,c=r||i||a,u=n||o||"";if(!c)return e;if(!g.test(c))return"url("+u+c+u+")";if(y.test(c))return"url("+u+c+u+")";if("/"===c[0])return"url("+u+(((s=t).indexOf("//")>-1?s.split("/").slice(0,3).join("/"):s.split("/")[0]).split("?")[0]+c)+u+")";var l=t.split("/"),d=c.split("/");l.pop();for(var f=0,p=d;f<p.length;f++){var v=p[f];"."!==v&&(".."===v?l.pop():l.push(v))}return"url("+u+l.join("/")+u+")"}))}var w=/^[^ \t\n\r\u000c]+/,_=/^[, \t\n\r\u000c]+/;function S(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function E(){var e=document.createElement("a");return e.href="",e.href}function C(e,t,n,r){return"src"===n||"href"===n&&r&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&r&&"#"!==r[0]?S(e,r):"background"!==n||!r||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n&&r?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}for(var o=[];r(_),!(n>=t.length);){var i=r(w);if(","===i.slice(-1))i=S(e,i.substring(0,i.length-1)),o.push(i);else{var a="";i=S(e,i);for(var s=!1;;){var c=t.charAt(n);if(""===c){o.push((i+a).trim());break}if(s)")"===c&&(s=!1);else{if(","===c){n+=1,o.push((i+a).trim());break}"("===c&&(s=!0)}a+=c,n+=1}}}return o.join(", ")}(e,r):"style"===n&&r?b(r,E()):"object"===t&&"data"===n&&r?S(e,r):r:S(e,r)}function k(e,t,n){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=0;r<e.classList.length;r++){var o=e.classList[r];if(t.test(o))return!0}return!(!n||!e.matches(n))||k(e.parentNode,t,n)}return e.nodeType,e.TEXT_NODE,k(e.parentNode,t,n)}function I(e){return void 0===e?"":e.toLowerCase()}function T(e,t){var n,o=t.doc,i=t.map,a=t.blockClass,s=t.blockSelector,h=t.maskTextClass,m=t.maskTextSelector,g=t.skipChild,y=void 0!==g&&g,w=t.inlineStylesheet,_=void 0===w||w,S=t.maskInputOptions,O=void 0===S?{}:S,x=t.maskTextFn,A=t.maskInputFn,D=t.slimDOMOptions,R=t.dataURLOptions,L=void 0===R?{}:R,P=t.inlineImages,M=void 0!==P&&P,N=t.recordCanvas,j=void 0!==N&&N,W=t.onSerialize,U=t.onIframeLoad,V=t.iframeLoadTimeout,F=void 0===V?5e3:V,B=t.keepIframeSrcFn,Z=void 0===B?function(){return!1}:B,H=t.preserveWhiteSpace,G=void 0===H||H,K=function(e,t){var n,o,i,a,s=t.doc,c=t.blockClass,f=t.blockSelector,h=t.maskTextClass,m=t.maskTextSelector,g=t.inlineStylesheet,y=t.maskInputOptions,w=void 0===y?{}:y,_=t.maskTextFn,S=t.maskInputFn,I=t.dataURLOptions,T=void 0===I?{}:I,O=t.inlineImages,x=t.recordCanvas,A=t.keepIframeSrcFn;if(s.__sn){var D=s.__sn.id;o=1===D?void 0:D}switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:r.Document,childNodes:[],compatMode:e.compatMode,rootId:o}:{type:r.Document,childNodes:[],rootId:o};case e.DOCUMENT_TYPE_NODE:return{type:r.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:o};case e.ELEMENT_NODE:for(var R=function(e,t,n){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=0;r<e.classList.length;r++){var o=e.classList[r];if(t.test(o))return!0}return!!n&&e.matches(n)}(e,c,f),L=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return p.test(t)?"div":t}(e),P={},M=0,N=Array.from(e.attributes);M<N.length;M++){var j=N[M],W=j.name,U=j.value;P[W]=C(s,L,W,U)}if("link"===L&&g){var V=Array.from(s.styleSheets).find((function(t){return t.href===e.href})),F=null;V&&(F=v(V)),F&&(delete P.rel,delete P.href,P._cssText=b(F,V.href))}if("style"===L&&e.sheet&&!(e.innerText||e.textContent||"").trim().length&&(F=v(e.sheet))&&(P._cssText=b(F,E())),"input"!==L&&"textarea"!==L&&"select"!==L||(U=e.value,"radio"!==P.type&&"checkbox"!==P.type&&"submit"!==P.type&&"button"!==P.type&&U?P.value=u({type:P.type,tagName:L,value:U,maskInputOptions:w,maskInputFn:S}):e.checked&&(P.checked=e.checked)),"option"===L&&(e.selected&&!w.select?P.selected=!0:delete P.selected),"canvas"===L&&x)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var o=t.getImageData,i="__rrweb_original__"in o?o.__rrweb_original__:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(P.rr_dataURL=e.toDataURL(T.type,T.quality));else if(!("__context"in e)){var B=e.toDataURL(T.type,T.quality),Z=document.createElement("canvas");Z.width=e.width,Z.height=e.height,B!==Z.toDataURL(T.type,T.quality)&&(P.rr_dataURL=B)}if("img"===L&&O){l||(l=s.createElement("canvas"),d=l.getContext("2d"));var H=e,G=H.crossOrigin;H.crossOrigin="anonymous";var K=function(){try{l.width=H.naturalWidth,l.height=H.naturalHeight,d.drawImage(H,0,0),P.rr_dataURL=l.toDataURL(T.type,T.quality)}catch(e){console.warn("Cannot inline img src="+H.currentSrc+"! Error: "+e)}G?P.crossOrigin=G:delete P.crossOrigin};H.complete&&0!==H.naturalWidth?K():H.onload=K}if("audio"!==L&&"video"!==L||(P.rr_mediaState=e.paused?"paused":"played",P.rr_mediaCurrentTime=e.currentTime),e.scrollLeft&&(P.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(P.rr_scrollTop=e.scrollTop),R){var q=e.getBoundingClientRect(),z=q.width,Y=q.height;P={class:P.class,rr_width:z+"px",rr_height:Y+"px"}}return"iframe"!==L||A(P.src)||(e.contentDocument||(P.rr_src=P.src),delete P.src),{type:r.Element,tagName:L,attributes:P,childNodes:[],isSVG:(a=e,Boolean("svg"===a.tagName||a.ownerSVGElement)||void 0),needBlock:R,rootId:o};case e.TEXT_NODE:var X=e.parentNode&&e.parentNode.tagName,J=e.textContent,$="STYLE"===X||void 0,Q="SCRIPT"===X||void 0;if($&&J){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(J=(i=e.parentNode.sheet).cssRules?Array.from(i.cssRules).map((function(e){return e.cssText||""})).join(""):"")}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: "+t,e)}J=b(J,E())}return Q&&(J="SCRIPT_PLACEHOLDER"),!$&&!Q&&k(e,h,m)&&J&&(J=_?_(J):J.replace(/[\S]/g,"*")),{type:r.Text,textContent:J||"",isStyle:$,rootId:o};case e.CDATA_SECTION_NODE:return{type:r.CDATA,textContent:"",rootId:o};case e.COMMENT_NODE:return{type:r.Comment,textContent:e.textContent||"",rootId:o};default:return!1}}(e,{doc:o,blockClass:a,blockSelector:s,maskTextClass:h,maskTextSelector:m,inlineStylesheet:_,maskInputOptions:O,maskTextFn:x,maskInputFn:A,dataURLOptions:L,inlineImages:M,recordCanvas:j,keepIframeSrcFn:Z});if(!K)return console.warn(e,"not serialized"),null;n="__sn"in e?e.__sn.id:!function(e,t){if(t.comment&&e.type===r.Comment)return!0;if(e.type===r.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(I(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===I(e.attributes.name)||"icon"===I(e.attributes.rel)||"apple-touch-icon"===I(e.attributes.rel)||"shortcut icon"===I(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&I(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(I(e.attributes.property).match(/^(og|twitter|fb):/)||I(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===I(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===I(e.attributes.name)||"googlebot"===I(e.attributes.name)||"bingbot"===I(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===I(e.attributes.name)||"generator"===I(e.attributes.name)||"framework"===I(e.attributes.name)||"publisher"===I(e.attributes.name)||"progid"===I(e.attributes.name)||I(e.attributes.property).match(/^article:/)||I(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===I(e.attributes.name)||"yandex-verification"===I(e.attributes.name)||"csrf-token"===I(e.attributes.name)||"p:domain_verify"===I(e.attributes.name)||"verify-v1"===I(e.attributes.name)||"verification"===I(e.attributes.name)||"shopify-checkout-api-token"===I(e.attributes.name)))return!0}}return!1}(K,D)&&(G||K.type!==r.Text||K.isStyle||K.textContent.replace(/^\s+|\s+$/gm,"").length)?f++:-2;var q=Object.assign(K,{id:n});if(e.__sn=q,-2===n)return null;i[n]=e,W&&W(e);var z=!y;if(q.type===r.Element&&(z=z&&!q.needBlock,delete q.needBlock,e.shadowRoot&&(q.isShadowHost=!0)),(q.type===r.Document||q.type===r.Element)&&z){D.headWhitespace&&K.type===r.Element&&"head"===K.tagName&&(G=!1);for(var Y={doc:o,map:i,blockClass:a,blockSelector:s,maskTextClass:h,maskTextSelector:m,skipChild:y,inlineStylesheet:_,maskInputOptions:O,maskTextFn:x,maskInputFn:A,slimDOMOptions:D,dataURLOptions:L,inlineImages:M,recordCanvas:j,preserveWhiteSpace:G,onSerialize:W,onIframeLoad:U,iframeLoadTimeout:F,keepIframeSrcFn:Z},X=0,J=Array.from(e.childNodes);X<J.length;X++)(ee=T(J[X],Y))&&q.childNodes.push(ee);if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(var $=0,Q=Array.from(e.shadowRoot.childNodes);$<Q.length;$++){var ee;(ee=T(Q[$],Y))&&(ee.isShadow=!0,q.childNodes.push(ee))}}return e.parentNode&&c(e.parentNode)&&(q.isShadow=!0),q.type===r.Element&&"iframe"===q.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var o,i=!1;try{o=r.document.readyState}catch(e){return}if("complete"===o){var a="about:blank";r.location.href===a&&e.src!==a&&""!==e.src?e.addEventListener("load",t):setTimeout(t,0)}else{var s=setTimeout((function(){i||(t(),i=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),i=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&U){var n=T(t,{doc:t,map:i,blockClass:a,blockSelector:s,maskTextClass:h,maskTextSelector:m,skipChild:!1,inlineStylesheet:_,maskInputOptions:O,maskTextFn:x,maskInputFn:A,slimDOMOptions:D,dataURLOptions:L,inlineImages:M,recordCanvas:j,preserveWhiteSpace:G,onSerialize:W,onIframeLoad:U,iframeLoadTimeout:F,keepIframeSrcFn:Z});n&&U(e,n)}}),F),q}new RegExp(/([^\\]):hover/.source,"g");var O=n(3528);function x(e,t,n){void 0===n&&(n=document);var r={capture:!0,passive:!0};return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}var A="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",D={map:{},getId:function(){return console.error(A),-1},getNode:function(){return console.error(A),null},removeNodeFromMap:function(){console.error(A)},has:function(){return console.error(A),!1},reset:function(){console.error(A)}};function R(e,t,n){void 0===n&&(n={});var r=null,o=0;return function(i){var a=Date.now();o||!1!==n.leading||(o=a);var s=t-(a-o),c=this,u=arguments;s<=0||s>t?(r&&(clearTimeout(r),r=null),o=a,e.apply(c,u)):r||!1===n.trailing||(r=setTimeout((function(){o=!1===n.leading?0:Date.now(),r=null,e.apply(c,u)}),s))}}function L(e,t,n,r,o){void 0===o&&(o=window);var i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set:function(e){var t=this;setTimeout((function(){n.set.call(t,e)}),0),i&&i.set&&i.set.call(this,e)}}),function(){return L(e,t,i||{},!0)}}function P(e,t,n){try{if(!(t in e))return function(){};var r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,function(){e[t]=r}}catch(e){return function(){}}}function M(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function N(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function j(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var n=!1;if("string"==typeof t){if(void 0!==e.closest)return null!==e.closest("."+t);n=e.classList.contains(t)}else e.classList.forEach((function(e){t.test(e)&&(n=!0)}));return n||j(e.parentNode,t)}return e.nodeType,e.TEXT_NODE,j(e.parentNode,t)}function W(e){return"__sn"in e&&-2===e.__sn.id}function U(e,t){if(c(e))return!1;var n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||U(e.parentNode,t))}function V(e){return Boolean(e.changedTouches)}function F(e){return"__sn"in e&&e.__sn.type===r.Element&&"iframe"===e.__sn.tagName}function B(e){return Boolean(null==e?void 0:e.shadowRoot)}function Z(e){return"__ln"in e}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(D=new Proxy(D,{get:function(e,t,n){return"map"===t&&console.error(A),Reflect.get(e,t,n)}})),function(){function e(){this.reset()}e.prototype.add=function(e){var t=this.indexes.get(e.parentId),n={id:e.node.id,mutation:e,children:[],texts:[],attributes:[]};t?(n.parent=t,t.children[n.id]=n):this.tree[n.id]=n,this.indexes.set(n.id,n)},e.prototype.remove=function(e,t){var n=this,r=this.indexes.get(e.parentId),o=this.indexes.get(e.id),i=function(e){n.removeIdSet.add(e);var r=t.getNode(e);null==r||r.childNodes.forEach((function(e){"__sn"in e&&i(e.__sn.id)}))},a=function(t){n.removeIdSet.add(t.id),Object.values(t.children).forEach((function(e){return a(e)}));var r=n.indexes.get(t.id);if(r){var o=r.parent;o&&(delete r.parent,delete o.children[r.id],n.indexes.delete(e.id))}};o?r?(delete o.parent,delete r.children[o.id],this.indexes.delete(e.id),a(o)):(delete this.tree[o.id],this.indexes.delete(o.id),a(o)):(this.removeNodeMutations.push(e),i(e.id))},e.prototype.text=function(e){var t=this.indexes.get(e.id);t?t.texts.push(e):this.textMutations.push(e)},e.prototype.attribute=function(e){var t=this.indexes.get(e.id);t?t.attributes.push(e):this.attributeMutations.push(e)},e.prototype.scroll=function(e){this.scrollMap.set(e.id,e)},e.prototype.input=function(e){this.inputMap.set(e.id,e)},e.prototype.flush=function(){var e,t,n,r,o=this,a=this,s=a.tree,c=a.removeNodeMutations,u=a.textMutations,l=a.attributeMutations,d={source:O.yh.Mutation,removes:c,texts:u,attributes:l,adds:[]},f=function(e,t){t&&o.removeIdSet.add(e.id),d.texts=d.texts.concat(t?[]:e.texts).filter((function(e){return!o.removeIdSet.has(e.id)})),d.attributes=d.attributes.concat(t?[]:e.attributes).filter((function(e){return!o.removeIdSet.has(e.id)})),o.removeIdSet.has(e.id)||o.removeIdSet.has(e.mutation.parentId)||t?Object.values(e.children).forEach((function(e){return f(e,!0)})):(d.adds.push(e.mutation),e.children&&Object.values(e.children).forEach((function(e){return f(e,!1)})))};Object.values(s).forEach((function(e){return f(e,!1)}));try{for(var p=i(this.scrollMap.keys()),v=p.next();!v.done;v=p.next()){var h=v.value;this.removeIdSet.has(h)&&this.scrollMap.delete(h)}}catch(t){e={error:t}}finally{try{v&&!v.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}try{for(var m=i(this.inputMap.keys()),g=m.next();!g.done;g=m.next())h=g.value,this.removeIdSet.has(h)&&this.inputMap.delete(h)}catch(e){n={error:e}}finally{try{g&&!g.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}var y=new Map(this.scrollMap),b=new Map(this.inputMap);return this.reset(),{mutationData:d,scrollMap:y,inputMap:b}},e.prototype.reset=function(){this.tree=[],this.indexes=new Map,this.removeNodeMutations=[],this.textMutations=[],this.attributeMutations=[],this.removeIdSet=new Set,this.scrollMap=new Map,this.inputMap=new Map},e.prototype.idRemoved=function(e){return this.removeIdSet.has(e)}}();var H=function(){function e(){this.length=0,this.head=null}return e.prototype.get=function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t},e.prototype.addNode=function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Z(e.previousSibling)){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else e.nextSibling&&Z(e.nextSibling)&&e.nextSibling.__ln.previous?(n=e.nextSibling.__ln.previous,t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)):(this.head&&(this.head.previous=t),t.next=this.head,this.head=t);this.length++},e.prototype.removeNode=function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)},e}(),G=function(e,t){return"".concat(e,"@").concat(t)};function K(e){return"__sn"in e}function q(e,t){e.delete(t),t.childNodes.forEach((function(t){return q(e,t)}))}function z(e,t,n){var r=t.parentNode;if(!r)return!1;var o=n.getId(r);return!!e.some((function(e){return e.id===o}))||z(e,r,n)}function Y(e,t){var n=t.parentNode;return!!n&&(!!e.has(n)||Y(e,n))}const X=function(){function e(){var e=this;this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(t){t.forEach(e.processMutation),e.emit()},this.emit=function(){var t,n,r,o;if(!e.frozen&&!e.locked){for(var a=[],s=new H,u=function(t){for(var n=t,r=-2;-2===r;)r=(n=n&&n.nextSibling)&&e.mirror.getId(n);return r},l=function(t){for(var n,r,o,i,l,d=t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null,f=d;null===(o=null===(r=null==f?void 0:f.getRootNode)||void 0===r?void 0:r.call(f))||void 0===o?void 0:o.host;)f=(null===(l=null===(i=null==f?void 0:f.getRootNode)||void 0===i?void 0:i.call(f))||void 0===l?void 0:l.host)||null;var p=!(e.doc.contains(t)||null!==f&&e.doc.contains(f));if(t.parentNode&&!p){var v=c(t.parentNode)?e.mirror.getId(d):e.mirror.getId(t.parentNode),h=u(t);if(-1===v||-1===h)return s.addNode(t);var m=T(t,{doc:e.doc,map:e.mirror.map,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,recordCanvas:e.recordCanvas,inlineImages:e.inlineImages,onSerialize:function(n){F(n)&&e.iframeManager.addIframe(n),B(t)&&e.shadowDomManager.addShadowRoot(t.shadowRoot,document)},onIframeLoad:function(t,n){e.iframeManager.attachIframe(t,n),e.shadowDomManager.observeAttachShadow(t)}});m&&a.push({parentId:v,nextId:h,node:m})}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());try{for(var d=i(e.movedSet),f=d.next();!f.done;f=d.next()){var p=f.value;z(e.removes,p,e.mirror)&&!e.movedSet.has(p.parentNode)||l(p)}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}try{for(var v=i(e.addedSet),h=v.next();!h.done;h=v.next())p=h.value,Y(e.droppedSet,p)||z(e.removes,p,e.mirror)?Y(e.movedSet,p)?l(p):e.droppedSet.add(p):l(p)}catch(e){r={error:e}}finally{try{h&&!h.done&&(o=v.return)&&o.call(v)}finally{if(r)throw r.error}}for(var m=null;s.length;){var g=null;if(m){var y=e.mirror.getId(m.value.parentNode),b=u(m.value);-1!==y&&-1!==b&&(g=m)}if(!g)for(var w=s.length-1;w>=0;w--){var _=s.get(w);if(_&&(y=e.mirror.getId(_.value.parentNode),b=u(_.value),-1!==y&&-1!==b)){g=_;break}}if(!g){for(;s.head;)s.removeNode(s.head.value);break}m=g.previous,s.removeNode(g.value),l(g.value)}var S={texts:e.texts.map((function(t){return{id:e.mirror.getId(t.node),value:t.value}})).filter((function(t){return e.mirror.has(t.id)})),attributes:e.attributes.map((function(t){return{id:e.mirror.getId(t.node),attributes:t.attributes}})).filter((function(t){return e.mirror.has(t.id)})),removes:e.removes,adds:a};(S.texts.length||S.attributes.length||S.removes.length||S.adds.length)&&(e.texts=[],e.attributes=[],e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.mutationCb(S))}},this.processMutation=function(t){var n,r,o,a;if(!W(t.target))switch(t.type){case"characterData":var s=t.target.textContent;j(t.target,e.blockClass)||s===t.oldValue||e.texts.push({value:k(t.target,e.maskTextClass,e.maskTextSelector)&&s?e.maskTextFn?e.maskTextFn(s):s.replace(/[\S]/g,"*"):s,node:t.target});break;case"attributes":var l=t.target;if(s=t.target.getAttribute(t.attributeName),"value"===t.attributeName&&(s=u({maskInputOptions:e.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:s,maskInputFn:e.maskInputFn})),j(t.target,e.blockClass)||s===t.oldValue)return;var d=e.attributes.find((function(e){return e.node===t.target}));if(d||(d={node:t.target,attributes:{}},e.attributes.push(d)),"style"===t.attributeName){var f=e.doc.createElement("span");t.oldValue&&f.setAttribute("style",t.oldValue),void 0!==d.attributes.style&&null!==d.attributes.style||(d.attributes.style={});var p=d.attributes.style;try{for(var v=i(Array.from(l.style)),h=v.next();!h.done;h=v.next()){var m=h.value,g=l.style.getPropertyValue(m),y=l.style.getPropertyPriority(m);g===f.style.getPropertyValue(m)&&y===f.style.getPropertyPriority(m)||(p[m]=""===y?g:[g,y])}}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}try{for(var b=i(Array.from(f.style)),w=b.next();!w.done;w=b.next())m=w.value,""===l.style.getPropertyValue(m)&&(p[m]=!1)}catch(e){o={error:e}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(o)throw o.error}}}else d.attributes[t.attributeName]=C(e.doc,t.target.tagName,t.attributeName,s);break;case"childList":t.addedNodes.forEach((function(n){return e.genAdds(n,t.target)})),t.removedNodes.forEach((function(n){var r=e.mirror.getId(n),o=c(t.target)?e.mirror.getId(t.target.host):e.mirror.getId(t.target);j(t.target,e.blockClass)||W(n)||(e.addedSet.has(n)?(q(e.addedSet,n),e.droppedSet.add(n)):e.addedSet.has(t.target)&&-1===r||U(t.target,e.mirror)||(e.movedSet.has(n)&&e.movedMap[G(r,o)]?q(e.movedSet,n):e.removes.push({parentId:o,id:r,isShadow:!!c(t.target)||void 0})),e.mapRemoves.push(n))}))}},this.genAdds=function(t,n){if(!n||!j(n,e.blockClass)){if(K(t)){if(W(t))return;e.movedSet.add(t);var r=null;n&&K(n)&&(r=n.__sn.id),r&&(e.movedMap[G(t.__sn.id,r)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);j(t,e.blockClass)||t.childNodes.forEach((function(t){return e.genAdds(t)}))}}}return e.prototype.init=function(e){var t=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach((function(n){t[n]=e[n]}))},e.prototype.freeze=function(){this.frozen=!0,this.canvasManager.freeze()},e.prototype.unfreeze=function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()},e.prototype.isFrozen=function(){return this.frozen},e.prototype.lock=function(){this.locked=!0,this.canvasManager.lock()},e.prototype.unlock=function(){this.locked=!1,this.canvasManager.unlock(),this.emit()},e.prototype.reset=function(){this.shadowDomManager.reset(),this.canvasManager.reset()},e}();var J=[],$="undefined"!=typeof CSSGroupingRule,Q="undefined"!=typeof CSSMediaRule,ee="undefined"!=typeof CSSSupportsRule,te="undefined"!=typeof CSSConditionRule;function ne(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(t){return e.target}}function re(e,t){var n,r,o=new X;J.push(o),o.init(e);var i=window.MutationObserver||window.__rrMutationObserver,a=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");a&&window[a]&&(i=window[a]);var s=new i(o.processMutations.bind(o));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function oe(e){var t=e.scrollCb,n=e.doc,r=e.mirror,o=e.blockClass;return x("scroll",R((function(e){var i=ne(e);if(i&&!j(i,o)){var a=r.getId(i);if(i===n){var s=n.scrollingElement||n.documentElement;t({id:a,x:s.scrollLeft,y:s.scrollTop})}else t({id:a,x:i.scrollLeft,y:i.scrollTop})}}),e.sampling.scroll||100),n)}function ie(e,t){var n=o({},e);return t||delete n.userTriggered,n}var ae=["INPUT","TEXTAREA","SELECT"],se=new WeakMap;function ce(e){return function(e,t){if($&&e.parentRule instanceof CSSGroupingRule||Q&&e.parentRule instanceof CSSMediaRule||ee&&e.parentRule instanceof CSSSupportsRule||te&&e.parentRule instanceof CSSConditionRule){var n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else n=Array.from(e.parentStyleSheet.cssRules).indexOf(e),t.unshift(n);return t}(e,[])}function ue(e,t){var n,r;void 0===t&&(t={});var c=e.doc.defaultView;if(!c)return function(){};!function(e,t){var n=e.mutationCb,r=e.mousemoveCb,o=e.mouseInteractionCb,i=e.scrollCb,c=e.viewportResizeCb,u=e.inputCb,l=e.mediaInteractionCb,d=e.styleSheetRuleCb,f=e.styleDeclarationCb,p=e.canvasMutationCb,v=e.fontCb;e.mutationCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.mutation&&t.mutation.apply(t,s([],a(e),!1)),n.apply(void 0,s([],a(e),!1))},e.mousemoveCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mousemove&&t.mousemove.apply(t,s([],a(e),!1)),r.apply(void 0,s([],a(e),!1))},e.mouseInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mouseInteraction&&t.mouseInteraction.apply(t,s([],a(e),!1)),o.apply(void 0,s([],a(e),!1))},e.scrollCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.scroll&&t.scroll.apply(t,s([],a(e),!1)),i.apply(void 0,s([],a(e),!1))},e.viewportResizeCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.viewportResize&&t.viewportResize.apply(t,s([],a(e),!1)),c.apply(void 0,s([],a(e),!1))},e.inputCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.input&&t.input.apply(t,s([],a(e),!1)),u.apply(void 0,s([],a(e),!1))},e.mediaInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mediaInteaction&&t.mediaInteaction.apply(t,s([],a(e),!1)),l.apply(void 0,s([],a(e),!1))},e.styleSheetRuleCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleSheetRule&&t.styleSheetRule.apply(t,s([],a(e),!1)),d.apply(void 0,s([],a(e),!1))},e.styleDeclarationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleDeclaration&&t.styleDeclaration.apply(t,s([],a(e),!1)),f.apply(void 0,s([],a(e),!1))},e.canvasMutationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.canvasMutation&&t.canvasMutation.apply(t,s([],a(e),!1)),p.apply(void 0,s([],a(e),!1))},e.fontCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.font&&t.font.apply(t,s([],a(e),!1)),v.apply(void 0,s([],a(e),!1))}}(e,t);var l=re(e,e.doc),d=function(e){var t=e.mousemoveCb,n=e.sampling,r=e.doc,o=e.mirror;if(!1===n.mousemove)return function(){};var i,a="number"==typeof n.mousemove?n.mousemove:50,s="number"==typeof n.mousemoveCallback?n.mousemoveCallback:500,c=[],u=R((function(e){var n=Date.now()-i;t(c.map((function(e){return e.timeOffset-=n,e})),e),c=[],i=null}),s),l=R((function(e){var t=ne(e),n=V(e)?e.changedTouches[0]:e,r=n.clientX,a=n.clientY;i||(i=Date.now()),c.push({x:r,y:a,id:o.getId(t),timeOffset:Date.now()-i}),u("undefined"!=typeof DragEvent&&e instanceof DragEvent?O.yh.Drag:e instanceof MouseEvent?O.yh.MouseMove:O.yh.TouchMove)}),a,{trailing:!1}),d=[x("mousemove",l,r),x("touchmove",l,r),x("drag",l,r)];return function(){d.forEach((function(e){return e()}))}}(e),f=function(e){var t=e.mouseInteractionCb,n=e.doc,r=e.mirror,o=e.blockClass,i=e.sampling;if(!1===i.mouseInteraction)return function(){};var a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,s=[];return Object.keys(O.Y2).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]})).forEach((function(e){var i=e.toLowerCase(),a=function(e){return function(n){var i=ne(n);if(!j(i,o)){var a=V(n)?n.changedTouches[0]:n;if(a){var s=r.getId(i),c=a.clientX,u=a.clientY;t({type:O.Y2[e],id:s,x:c,y:u})}}}}(e);s.push(x(i,a,n))})),function(){s.forEach((function(e){return e()}))}}(e),p=oe(e),v=function(e){var t=e.viewportResizeCb,n=-1,r=-1;return x("resize",R((function(){var e=M(),o=N();n===e&&r===o||(t({width:Number(o),height:Number(e)}),n=e,r=o)}),200),window)}(e),h=function(e){var t=e.inputCb,n=e.doc,r=e.mirror,i=e.blockClass,c=e.ignoreClass,l=e.maskInputOptions,d=e.maskInputFn,f=e.sampling,p=e.userTriggeredOnInput;function v(e){var t=ne(e),r=e.isTrusted;if(t&&"OPTION"===t.tagName&&(t=t.parentElement),t&&t.tagName&&!(ae.indexOf(t.tagName)<0)&&!j(t,i)){var o=t.type;if(!t.classList.contains(c)){var a=t.value,s=!1;"radio"===o||"checkbox"===o?s=t.checked:(l[t.tagName.toLowerCase()]||l[o])&&(a=u({maskInputOptions:l,tagName:t.tagName,type:o,value:a,maskInputFn:d})),h(t,ie({text:a,isChecked:s,userTriggered:r},p));var f=t.name;"radio"===o&&f&&s&&n.querySelectorAll('input[type="radio"][name="'.concat(f,'"]')).forEach((function(e){e!==t&&h(e,ie({text:e.value,isChecked:!s,userTriggered:!1},p))}))}}}function h(e,n){var i=se.get(e);if(!i||i.text!==n.text||i.isChecked!==n.isChecked){se.set(e,n);var a=r.getId(e);t(o(o({},n),{id:a}))}}var m=("last"===f.input?["change"]:["input","change"]).map((function(e){return x(e,v,n)})),g=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),y=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return g&&g.set&&m.push.apply(m,s([],a(y.map((function(e){return L(e[0],e[1],{set:function(){v({target:this})}})}))),!1)),function(){m.forEach((function(e){return e()}))}}(e),m=function(e){var t=e.mediaInteractionCb,n=e.blockClass,r=e.mirror,o=e.sampling,i=function(e){return R((function(o){var i=ne(o);if(i&&!j(i,n)){var a=i,s=a.currentTime,c=a.volume,u=a.muted;t({type:e,id:r.getId(i),currentTime:s,volume:c,muted:u})}}),o.media||500)},a=[x("play",i(0)),x("pause",i(1)),x("seeked",i(2)),x("volumechange",i(3))];return function(){a.forEach((function(e){return e()}))}}(e),g=function(e,t){var n=e.styleSheetRuleCb,r=e.mirror,o=t.win,i=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=function(e,t){var o=r.getId(this.ownerNode);return-1!==o&&n({id:o,adds:[{rule:e,index:t}]}),i.apply(this,arguments)};var c=o.CSSStyleSheet.prototype.deleteRule;o.CSSStyleSheet.prototype.deleteRule=function(e){var t=r.getId(this.ownerNode);return-1!==t&&n({id:t,removes:[{index:e}]}),c.apply(this,arguments)};var u={};$?u.CSSGroupingRule=o.CSSGroupingRule:(Q&&(u.CSSMediaRule=o.CSSMediaRule),te&&(u.CSSConditionRule=o.CSSConditionRule),ee&&(u.CSSSupportsRule=o.CSSSupportsRule));var l={};return Object.entries(u).forEach((function(e){var t=a(e,2),o=t[0],i=t[1];l[o]={insertRule:i.prototype.insertRule,deleteRule:i.prototype.deleteRule},i.prototype.insertRule=function(e,t){var i=r.getId(this.parentStyleSheet.ownerNode);return-1!==i&&n({id:i,adds:[{rule:e,index:s(s([],a(ce(this)),!1),[t||0],!1)}]}),l[o].insertRule.apply(this,arguments)},i.prototype.deleteRule=function(e){var t=r.getId(this.parentStyleSheet.ownerNode);return-1!==t&&n({id:t,removes:[{index:s(s([],a(ce(this)),!1),[e],!1)}]}),l[o].deleteRule.apply(this,arguments)}})),function(){o.CSSStyleSheet.prototype.insertRule=i,o.CSSStyleSheet.prototype.deleteRule=c,Object.entries(u).forEach((function(e){var t=a(e,2),n=t[0],r=t[1];r.prototype.insertRule=l[n].insertRule,r.prototype.deleteRule=l[n].deleteRule}))}}(e,{win:c}),y=function(e,t){var n=e.styleDeclarationCb,r=e.mirror,o=t.win,i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(e,t,o){var a,s,c=r.getId(null===(s=null===(a=this.parentRule)||void 0===a?void 0:a.parentStyleSheet)||void 0===s?void 0:s.ownerNode);return-1!==c&&n({id:c,set:{property:e,value:t,priority:o},index:ce(this.parentRule)}),i.apply(this,arguments)};var a=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(e){var t,o,i=r.getId(null===(o=null===(t=this.parentRule)||void 0===t?void 0:t.parentStyleSheet)||void 0===o?void 0:o.ownerNode);return-1!==i&&n({id:i,remove:{property:e},index:ce(this.parentRule)}),a.apply(this,arguments)},function(){o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=a}}(e,{win:c}),b=e.collectFonts?function(e){var t=e.fontCb,n=e.doc,r=n.defaultView;if(!r)return function(){};var o=[],i=new WeakMap,a=r.FontFace;r.FontFace=function(e,t,n){var r=new a(e,t,n);return i.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};var s=P(n.fonts,"add",(function(e){return function(n){return setTimeout((function(){var e=i.get(n);e&&(t(e),i.delete(n))}),0),e.apply(this,[n])}}));return o.push((function(){r.FontFace=a})),o.push(s),function(){o.forEach((function(e){return e()}))}}(e):function(){},w=[];try{for(var _=i(e.plugins),S=_.next();!S.done;S=_.next()){var E=S.value;w.push(E.observer(E.callback,c,E.options))}}catch(e){n={error:e}}finally{try{S&&!S.done&&(r=_.return)&&r.call(_)}finally{if(n)throw n.error}}return function(){J.forEach((function(e){return e.reset()})),l.disconnect(),d(),f(),p(),v(),h(),m(),g(),y(),b(),w.forEach((function(e){return e()}))}}var le=function(){function e(e){this.iframes=new WeakMap,this.mutationCb=e.mutationCb}return e.prototype.addIframe=function(e){this.iframes.set(e,!0)},e.prototype.addLoadListener=function(e){this.loadListener=e},e.prototype.attachIframe=function(e,t){var n;this.mutationCb({adds:[{parentId:e.__sn.id,nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e)},e}(),de=function(){function e(e){this.restorePatches=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror;var t=this;this.restorePatches.push(P(HTMLElement.prototype,"attachShadow",(function(e){return function(){var n=e.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,this.ownerDocument),n}})))}return e.prototype.addShadowRoot=function(e,t){re(o(o({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e),oe(o(o({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))},e.prototype.observeAttachShadow=function(e){if(e.contentWindow){var t=this;this.restorePatches.push(P(e.contentWindow.HTMLElement.prototype,"attachShadow",(function(n){return function(){var r=n.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,e.contentDocument),r}})))}},e.prototype.reset=function(){this.restorePatches.forEach((function(e){return e()}))},e}();for(var fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pe="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ve=0;ve<fe.length;ve++)pe[fe.charCodeAt(ve)]=ve;var he=new Map,me=function(e,t,n){if(e&&(be(e,t)||"object"==typeof e)){var r=function(e,t){var n=he.get(e);return n||(n=new Map,he.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name),o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o}};function ge(e,t,n){if(e instanceof Array)return e.map((function(e){return ge(e,t,n)}));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){var r=e.constructor.name,o=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=fe[n[t]>>2],o+=fe[(3&n[t])<<4|n[t+1]>>4],o+=fe[(15&n[t+1])<<2|n[t+2]>>6],o+=fe[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:r,base64:o}}return e instanceof DataView?{rr_type:e.constructor.name,args:[ge(e.buffer,t,n),e.byteOffset,e.byteLength]}:e instanceof HTMLImageElement?{rr_type:e.constructor.name,src:e.src}:e instanceof ImageData?{rr_type:e.constructor.name,args:[ge(e.data,t,n),e.width,e.height]}:be(e,t)||"object"==typeof e?{rr_type:e.constructor.name,index:me(e,t,n)}:e}var ye=function(e,t,n){return s([],a(e),!1).map((function(e){return ge(e,t,n)}))},be=function(e,t){var n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((function(e){return"function"==typeof t[e]}));return Boolean(n.find((function(n){return e instanceof t[n]})))};function we(e,t,n,r,o,c){var u,l,d=[],f=Object.getOwnPropertyNames(e),p=function(i){try{if("function"!=typeof e[i])return"continue";var u=P(e,i,(function(u){return function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];var f=u.apply(this,l);if(me(f,c,e),!j(this.canvas,r)){o.getId(this.canvas);var p=ye(s([],a(l),!1),c,e),v={type:t,property:i,args:p};n(this.canvas,v)}return f}}));d.push(u)}catch(r){var l=L(e,i,{set:function(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});d.push(l)}};try{for(var v=i(f),h=v.next();!h.done;h=v.next())p(h.value)}catch(e){u={error:e}}finally{try{h&&!h.done&&(l=v.return)&&l.call(v)}finally{if(u)throw u.error}}return d}var _e,Se,Ee=function(){function e(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(e,t){!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)},this.mutationCb=e.mutationCb,this.mirror=e.mirror,!0===e.recordCanvas&&this.initCanvasMutationObserver(e.win,e.blockClass)}return e.prototype.reset=function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()},e.prototype.freeze=function(){this.frozen=!0},e.prototype.unfreeze=function(){this.frozen=!1},e.prototype.lock=function(){this.locked=!0},e.prototype.unlock=function(){this.locked=!1},e.prototype.initCanvasMutationObserver=function(e,t){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var n=function(e,t){var n=[];try{var r=P(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return j(this,t)||"__context"in this||(this.__context=n),e.apply(this,s([n],a(r),!1))}}));n.push(r)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){n.forEach((function(e){return e()}))}}(e,t),r=function(e,t,n,r){var o,c,u=[],l=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype),d=function(r){try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[r])return"continue";var o=P(t.CanvasRenderingContext2D.prototype,r,(function(t){return function(){for(var o=this,i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return j(this.canvas,n)||setTimeout((function(){var t=s([],a(i),!1);if("drawImage"===r&&t[0]&&t[0]instanceof HTMLCanvasElement){var n=t[0],c=n.getContext("2d"),u=null==c?void 0:c.getImageData(0,0,n.width,n.height),l=null==u?void 0:u.data;t[0]=JSON.stringify(l)}e(o.canvas,{type:O.FX["2D"],property:r,args:t})}),0),t.apply(this,i)}}));u.push(o)}catch(n){var i=L(t.CanvasRenderingContext2D.prototype,r,{set:function(t){e(this.canvas,{type:O.FX["2D"],property:r,args:[t],setter:!0})}});u.push(i)}};try{for(var f=i(l),p=f.next();!p.done;p=f.next())d(p.value)}catch(e){o={error:e}}finally{try{p&&!p.done&&(c=f.return)&&c.call(f)}finally{if(o)throw o.error}}return function(){u.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,this.mirror),o=function(e,t,n,r){var o=[];return o.push.apply(o,s([],a(we(t.WebGLRenderingContext.prototype,O.FX.WebGL,e,n,r,t)),!1)),void 0!==t.WebGL2RenderingContext&&o.push.apply(o,s([],a(we(t.WebGL2RenderingContext.prototype,O.FX.WebGL2,e,n,r,t)),!1)),function(){o.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,this.mirror);this.resetObservers=function(){n(),r(),o()}},e.prototype.startPendingCanvasMutationFlusher=function(){var e=this;requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))},e.prototype.startRAFTimestamping=function(){var e=this,t=function(n){e.rafStamps.latestId=n,requestAnimationFrame(t)};requestAnimationFrame(t)},e.prototype.flushPendingCanvasMutations=function(){var e=this;this.pendingCanvasMutations.forEach((function(t,n){var r=e.mirror.getId(n);e.flushPendingCanvasMutationFor(n,r)})),requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))},e.prototype.flushPendingCanvasMutationFor=function(e,t){if(!this.frozen&&!this.locked){var n=this.pendingCanvasMutations.get(e);if(n&&-1!==t){var r=n.map((function(e){e.type;var t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["type"]);return t})),o=n[0].type;this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}},e}();function Ce(e){return o(o({},e),{timestamp:Date.now()})}var ke={map:{},getId:function(e){return e&&e.__sn?e.__sn.id:-1},getNode:function(e){return this.map[e]||null},removeNodeFromMap:function(e){var t=this,n=e.__sn&&e.__sn.id;delete this.map[n],e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},has:function(e){return this.map.hasOwnProperty(e)},reset:function(){this.map={}}};function Ie(e){void 0===e&&(e={});var t=e.emit,n=e.checkoutEveryNms,r=e.checkoutEveryNth,s=e.blockClass,c=void 0===s?"rr-block":s,u=e.blockSelector,l=void 0===u?null:u,d=e.ignoreClass,f=void 0===d?"rr-ignore":d,p=e.maskTextClass,v=void 0===p?"rr-mask":p,h=e.maskTextSelector,m=void 0===h?null:h,g=e.inlineStylesheet,y=void 0===g||g,b=e.maskAllInputs,w=e.maskInputOptions,_=e.slimDOMOptions,S=e.maskInputFn,E=e.maskTextFn,C=e.hooks,k=e.packFn,I=e.sampling,A=void 0===I?{}:I,D=e.mousemoveWait,R=e.recordCanvas,L=void 0!==R&&R,P=e.userTriggeredOnInput,j=void 0!==P&&P,W=e.collectFonts,U=void 0!==W&&W,V=e.inlineImages,Z=void 0!==V&&V,H=e.plugins,G=e.keepIframeSrcFn,K=void 0===G?function(){return!1}:G;if(!t)throw new Error("emit function is required");void 0!==D&&void 0===A.mousemove&&(A.mousemove=D);var q,z,Y=!0===b?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==w?w:{password:!0},X=!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===_,headMetaDescKeywords:"all"===_}:_||{};void 0===q&&(q=window),"NodeList"in q&&!q.NodeList.prototype.forEach&&(q.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in q&&!q.DOMTokenList.prototype.forEach&&(q.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(e){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1});var $=0;_e=function(e,o){var a;if(!(null===(a=J[0])||void 0===a?void 0:a.isFrozen())||e.type===O.tw.FullSnapshot||e.type===O.tw.IncrementalSnapshot&&e.data.source===O.yh.Mutation||J.forEach((function(e){return e.unfreeze()})),t(function(e){var t,n;try{for(var r=i(H||[]),o=r.next();!o.done;o=r.next()){var a=o.value;a.eventProcessor&&(e=a.eventProcessor(e))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return k&&(e=k(e)),e}(e),o),e.type===O.tw.FullSnapshot)z=e,$=0;else if(e.type===O.tw.IncrementalSnapshot){if(e.data.source===O.yh.Mutation&&e.data.isAttachIframe)return;$++;var s=r&&$>=r,c=n&&e.timestamp-z.timestamp>n;(s||c)&&Se(!0)}};var Q=function(e){_e(Ce({type:O.tw.IncrementalSnapshot,data:o({source:O.yh.Mutation},e)}))},ee=function(e){return _e(Ce({type:O.tw.IncrementalSnapshot,data:o({source:O.yh.Scroll},e)}))},te=function(e){return _e(Ce({type:O.tw.IncrementalSnapshot,data:o({source:O.yh.CanvasMutation},e)}))},ne=new le({mutationCb:Q}),re=new Ee({recordCanvas:L,mutationCb:te,win:window,blockClass:c,mirror:ke}),oe=new de({mutationCb:Q,scrollCb:ee,bypassOptions:{blockClass:c,blockSelector:l,maskTextClass:v,maskTextSelector:m,inlineStylesheet:y,maskInputOptions:Y,maskTextFn:E,maskInputFn:S,recordCanvas:L,inlineImages:Z,sampling:A,slimDOMOptions:X,iframeManager:ne,canvasManager:re},mirror:ke});Se=function(e){var t,n,r,o;void 0===e&&(e=!1),_e(Ce({type:O.tw.Meta,data:{href:window.location.href,width:N(),height:M()}}),e),J.forEach((function(e){return e.lock()}));var i=a(function(e,t){var n=t||{},r=n.blockClass,o=n.blockSelector,i=n.maskTextClass,a=n.maskTextSelector,s=n.inlineStylesheet,c=n.inlineImages,u=n.recordCanvas,l=n.maskAllInputs,d=void 0!==l&&l,f=n.slimDOM,p=void 0!==f&&f,v=n.keepIframeSrcFn,h={};return[T(e,{doc:e,map:h,blockClass:void 0===r?"rr-block":r,blockSelector:void 0===o?null:o,maskTextClass:void 0===i?"rr-mask":i,maskTextSelector:void 0===a?null:a,skipChild:!1,inlineStylesheet:void 0===s||s,maskInputOptions:!0===d?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===d?{password:!0}:d,maskTextFn:n.maskTextFn,maskInputFn:n.maskInputFn,slimDOMOptions:!0===p||"all"===p?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===p,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===p?{}:p,dataURLOptions:n.dataURLOptions,inlineImages:void 0!==c&&c,recordCanvas:void 0!==u&&u,preserveWhiteSpace:n.preserveWhiteSpace,onSerialize:n.onSerialize,onIframeLoad:n.onIframeLoad,iframeLoadTimeout:n.iframeLoadTimeout,keepIframeSrcFn:void 0===v?function(){return!1}:v}),h]}(document,{blockClass:c,blockSelector:l,maskTextClass:v,maskTextSelector:m,inlineStylesheet:y,maskAllInputs:Y,maskTextFn:E,slimDOM:X,recordCanvas:L,inlineImages:Z,onSerialize:function(e){F(e)&&ne.addIframe(e),B(e)&&oe.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(e,t){ne.attachIframe(e,t),oe.observeAttachShadow(e)},keepIframeSrcFn:K}),2),s=i[0],u=i[1];if(!s)return console.warn("Failed to snapshot the document");ke.map=u,_e(Ce({type:O.tw.FullSnapshot,data:{node:s,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(n=null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(o=null===(r=null===document||void 0===document?void 0:document.body)||void 0===r?void 0:r.parentElement)||void 0===o?void 0:o.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),J.forEach((function(e){return e.unlock()}))};try{var ie=[];ie.push(x("DOMContentLoaded",(function(){_e(Ce({type:O.tw.DomContentLoaded,data:{}}))})));var ae=function(e){var t;return ue({mutationCb:Q,mousemoveCb:function(e,t){return _e(Ce({type:O.tw.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return _e(Ce({type:O.tw.IncrementalSnapshot,data:o({source:O.yh.MouseInteraction},e)}))},scrollCb:ee,viewportResizeCb:function(e){return _e(Ce({type:O.tw.IncrementalSnapshot,data:o({source:O.yh.ViewportResize},e)}))},inputCb:function(e){return _e(Ce({type:O.tw.IncrementalSnapshot,data:o({source:O.yh.Input},e)}))},mediaInteractionCb:function(e){return _e(Ce({type:O.tw.IncrementalSnapshot,data:o({source:O.yh.MediaInteraction},e)}))},styleSheetRuleCb:function(e){return _e(Ce({type:O.tw.IncrementalSnapshot,data:o({source:O.yh.StyleSheetRule},e)}))},styleDeclarationCb:function(e){return _e(Ce({type:O.tw.IncrementalSnapshot,data:o({source:O.yh.StyleDeclaration},e)}))},canvasMutationCb:te,fontCb:function(e){return _e(Ce({type:O.tw.IncrementalSnapshot,data:o({source:O.yh.Font},e)}))},blockClass:c,ignoreClass:f,maskTextClass:v,maskTextSelector:m,maskInputOptions:Y,inlineStylesheet:y,sampling:A,recordCanvas:L,inlineImages:Z,userTriggeredOnInput:j,collectFonts:U,doc:e,maskInputFn:S,maskTextFn:E,blockSelector:l,slimDOMOptions:X,mirror:ke,iframeManager:ne,shadowDomManager:oe,canvasManager:re,plugins:(null===(t=null==H?void 0:H.filter((function(e){return e.observer})))||void 0===t?void 0:t.map((function(e){return{observer:e.observer,options:e.options,callback:function(t){return _e(Ce({type:O.tw.Plugin,data:{plugin:e.name,payload:t}}))}}})))||[]},C)};ne.addLoadListener((function(e){ie.push(ae(e.contentDocument))}));var se=function(){Se(),ie.push(ae(document))};return"interactive"===document.readyState||"complete"===document.readyState?se():ie.push(x("load",(function(){_e(Ce({type:O.tw.Load,data:{}})),se()}),window)),function(){ie.forEach((function(e){return e()}))}}catch(e){console.warn(e)}}Ie.addCustomEvent=function(e,t){if(!_e)throw new Error("please add custom event after start recording");_e(Ce({type:O.tw.Custom,data:{tag:e,payload:t}}))},Ie.freezePage=function(){J.forEach((function(e){return e.freeze()}))},Ie.takeFullSnapshot=function(e){if(!Se)throw new Error("please take full snapshot after start recording");Se(e)},Ie.mirror=ke;const Te=Ie;var Oe,xe,Ae=n(9199),De=n(9046),Re=n(2795),Le=n(3593),Pe=n(7887),Me=(0,Re.U)("rrweb".concat((0,De.yL)()?" (iframe)":"")),Ne={rid:"",mode:"single",synthetic:!0},je=18e4,We=["intercom-namespace","intercom-lightweight-app"],Ue=["guru-container"],Ve=function(e){return[].concat(We,[e]).filter(Boolean).map((function(e){return".".concat(e)})).join(", ")},Fe=function(e){return new RegExp(function(e){return[].concat(We,[e]).filter(Boolean).join("|")}(e))},Be=Math.random().toString(36).substr(2,5),Ze=0,He=function(){return Ze++,"".concat(Be,".").concat(Ze)},Ge=function(){var e;if(!(0,De.yL)())throw new Error("Tried to set rrweb record on iframe but not in iframe");window.rrwebRecord?Me.debug("Tried to inject rrweb into iframe, but already injected, will ignore"):(window.rrwebRecord=Te,null===(e=window.top)||void 0===e||e.dispatchEvent(new CustomEvent("sbiframerrwebinjected")))},Ke=function(){var e=(0,De.jU)();return!(!e||!e.rrwebRecord)};function qe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.app.rootElementId,i=e.app.isIframeFailed?"retrigger":(0,Pe.aE)(e),a="inline"===e.app.org.widgetSettings.assetLinking,s=e.app.options.blockClass||"",c=!!(null==i?void 0:i.includes("iframe"))&&!r,u=c?"iframe":"single";if(!c||n)if(Oe)Me.warn("Tried to start recording but already recording");else{!c&&n&&Me.warn('Tried to start recording with widgetCb, but mode is "'.concat(i,'"'));var l=function(e){var t=He();return{rid:t,cb:function(n,r){return e(Object.assign(Object.assign({},n),{rid:t,mode:u}),r)}}},d=l(t),f={blockClass:Fe(s),blockSelector:Ve(s)+(c?", #".concat(o):"")+", ".concat(Ue.join(", ")),inlineStylesheet:a,emit:d.cb,sampling:{mousemoveCallback:250}};if(r&&(f.checkoutEveryNms=je),c){var p=(0,De.jU)(),v=!!p&&p.rrwebRecord;if(!p)throw new Error("Tried to start rrweb recording in iframe mode, but not in iframe");if(!n)throw new Error("Iframe mode requires that a widget callback be provided to startRecording");if(!v)return void Me.warn("Tried to start rrweb recording in iframe mode, but no record fn injected");if(Me.debug("[iframe] rrweb.startRecording (main), rid ".concat(d.rid)),Oe=v(f),xe)Me.debug("[top/widget] rrweb.startRecording - widget recorder already running");else{var h=l(n);Me.debug("[top/widget] rrweb.startRecording, rid ".concat(h.rid));var m={blockClass:s,blockSelector:["#".concat(Le.Hb),s].filter(Boolean).join(","),inlineStylesheet:a,emit:h.cb,sampling:f.sampling};r&&(m.checkoutEveryNms=je),xe=Te(m)}}else Me.debug("[top] rrweb.startRecording (main), rid ".concat(d.rid)),Oe=Te(f);Ne.rid=d.rid,Ne.mode=u}else Me.error('Tried to start recording without widgetCb with "iframe-*" mode')}function ze(e){if((0,De.yL)())throw Error("Tried to stop recording from within iframe");if(Oe){Me.debug("[top] rrweb.stopRecording ".concat(e?"(skip widget)":""));try{Oe()}catch(e){Me.error("[top] There was an error in the rrweb stop recording function, logging and continuing",void 0,e)}Oe=void 0}if(xe&&!e){Me.debug("[top/widget] rrweb.stopRecordingWidget");try{xe()}catch(e){Me.error("[top/widget] There was an error in the rrweb stop recording function, logging and continuing",void 0,e)}xe=void 0}}var Ye=function(){if(Ne.rid)return Object.assign({type:Ae.tw.IncrementalSnapshot,timestamp:Date.now(),data:{source:Ae.yh.Scroll,id:1,x:(0,De.zb)().documentElement.scrollLeft,y:(0,De.zb)().documentElement.scrollTop}},Ne);Me.info("Attempted to generate synthetic scroll event before recording started.")},Xe=function(){if(Ne.rid)return Object.assign({type:Ae.tw.Custom,timestamp:Date.now(),data:{tag:Ae.Bu.IFRAME_LOADING_EVENT_TAG,payload:void 0}},Ne);Me.info("Attempted to generate custom iframe loading event before recording started.")}},8990:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i,r:()=>o});var r=n(885),o=function(e,t){var n=new FormData;return Object.entries(t.fields).forEach((function(e){var t=(0,r.Z)(e,2),o=t[0],i=t[1];return n.append(o,i)})),n.append("file",e),fetch(t.url,{method:"POST",body:n})},i=function(e,t,n){return new Promise((function(o,i){var a=0,s=new XMLHttpRequest;s.upload.addEventListener("progress",(function(e){var t;(1==(t=e.loaded/e.total)||Date.now()-a>100)&&(a=Date.now(),n(t))})),s.addEventListener("load",(function(){return o({status:s.status,body:s.responseText})})),s.addEventListener("error",(function(){return i(new Error("File upload failed"))})),s.addEventListener("abort",(function(){return i(new Error("File upload aborted"))})),s.open("POST",t.url,!0);var c=new FormData;Object.entries(t.fields).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],o=t[1];return c.append(n,o)})),c.append("file",e),s.send(c)}))}},2611:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>fe,B6:()=>he,CD:()=>G,DR:()=>A,E3:()=>y,FN:()=>I,Gs:()=>V,H7:()=>we,HK:()=>B,Hk:()=>z,I4:()=>de,MJ:()=>x,Ov:()=>ae,Px:()=>ce,Tr:()=>be,U8:()=>C,Vo:()=>K,WW:()=>Z,ZP:()=>Ee,Zt:()=>E,ah:()=>te,bn:()=>ie,c:()=>j,cp:()=>O,cx:()=>re,fv:()=>ne,gB:()=>me,gS:()=>k,hR:()=>ge,iP:()=>$,jD:()=>U,kX:()=>ve,kf:()=>Q,ld:()=>T,lh:()=>_e,mD:()=>M,mP:()=>W,me:()=>oe,o2:()=>q,oU:()=>w,pU:()=>ue,rv:()=>le,uZ:()=>Se,vo:()=>ye,y2:()=>se,yO:()=>_,zQ:()=>pe,zS:()=>F,zV:()=>S});var r=n(1002),o=n(5861),i=n(4687),a=n.n(i),s=n(6403),c=n(2222),u=n(7109),l=n(3668),d=n(2795),f=n(7780),p=n(8998),v=n(6688),h=n(5164),m=n(4578),g=(0,d.U)("app-slice"),y={org:{id:-1,name:"",available:!1,busy:!1,isWorkingHours:!0,callLimited:!1,widgetSettings:{connect:[],launcher:"video",hidden:!0,position:"right",answer:"ask",mode:"api",branding:"default",copy:{},afkTime:12e4,color:null,bgColor:null,orgLogoUrl:null,takeover:"no-ask",viewing:"no-ask",visitorVideo:"no-ask",assetLinking:"inline",showBookingAlways:!1,showChatAlways:!1,disableMobile:!1,requireEmailOnChat:"never",requireEmailOnChatExcludePersonal:!0,hasLogo:!0,hasAvatar:!0,hasDarkText:!1,backgroundType:"audio-video",launcherBottomSpacing:20,launcherSideSpacing:20,links:[],buttons:{elements:[],fullWidth:!1},sections:{elements:[]},clientRules:[],setByRules:[]},integrations:{calendly:{enabled:!1},acuity:{enabled:!1},chilipiper:{enabled:!1},hubspot:{enabled:!1,portalId:0}},pageRules:[],gateways:{},optinRecording:!1,feedbackForm:{feedbackQuestions:[]}},pageWidgetSettings:{},options:Object.assign({},p.W),proactiveVideo:null,hasReceivedOrg:!1,top:null,left:null,stage:u.Hf.NEED_HELP,widgetExtent:"collapsed",helpCenterExtent:"expanded",isSkeletalQuestionVisible:!1,isSkeletalQuestionDismissed:!1,showSkeletalConversationId:0,showSkeletalConversationIdChangedTs:0,agents:[],allAgents:[],darkMode:!1,isStreamEvents:!1,isMicrophoneWanted:!1,isCameraWanted:!1,isMicrophonePermissionGranted:!1,isCameraPermissionGranted:!1,isMicrophonePermissionDenied:!1,isCameraPermissionDenied:!1,isAutoplayAudioAllowed:!0,isRejectedIncomingVideoPlay:!1,audioDevices:[],videoDevices:[],preferredAudioDeviceId:void 0,preferredVideoDeviceId:void 0,mediaDeviceError:"",isVideoPlaying:!1,screenTakeoverOn:!1,showPermissionOverlay:!1,isAgentCamMuted:!1,isAgentMicMuted:!1,isMissedCall:!1,calendlyData:null,calendlyDataError:null,calendlySelectedMeetingType:"",hasNoAudioDevice:!1,hasNoVideoDevice:!1,wasPrematureDial:!1,isManuallyPromptingAudio:!1,showTakeoverOptin:!1,showSpyingOptin:!1,hasOptedIntoTakeover:!1,showRecordOptin:!1,isAfkDisconnected:!1,isPageVisible:!0,startCallOnPageVisible:!1,isIframeFailed:!1,rootElementId:null,isRequestingDisplayshare:!1,videoRenderer:"widget",showCallOptions:!1,journeyVideoState:null,uiPanel:"idle",uiIsHideChat:!1,uiIsMicCamSettings:!1,uiIsShowDebug:!1},b=(0,s.hg)("app/updateMediaPermissions",function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,c,u,l,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState().app,o=r.isMicrophonePermissionGranted,i=r.isMicrophonePermissionDenied,s=r.isCameraPermissionGranted,c=r.isCameraPermissionDenied,u=r.isAutoplayAudioAllowed,!("permissions"in navigator)){e.next=28;break}if(o){e.next=14;break}return e.prev=3,e.next=6,navigator.permissions.query({name:"microphone"});case 6:l=e.sent,o="granted"===l.state,i="denied"===l.state,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),g.debug("Microphone permission check failed",e.t0);case 14:if(s){e.next=26;break}return e.prev=15,e.next=18,navigator.permissions.query({name:"camera"});case 18:d=e.sent,s="granted"===d.state,c="denied"===d.state,e.next=26;break;case 23:e.prev=23,e.t1=e.catch(15),g.debug("Camera permission check failed",e.t1);case 26:e.next=29;break;case 28:g.info("Browser does not support navigator permissions");case 29:return!u&&(null==t?void 0:t.isFromClick)&&(g.debug("Update media permissions from click event set isAutoplayAudioAllowed true"),u=!0),e.abrupt("return",{isMicrophonePermissionGranted:o,isMicrophonePermissionDenied:i,isCameraPermissionGranted:s,isCameraPermissionDenied:c,isAutoplayAudioAllowed:u});case 31:case"end":return e.stop()}}),e,null,[[3,11],[15,23]])})));return function(t,n){return e.apply(this,arguments)}}()),w=(0,s.hg)("app/enableMediaDevices",function(){var e=(0,o.Z)(a().mark((function e(t,n){var o,i,s,c,u,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.dispatch,i=n.getState,s=void 0!==t.audio?t.audio:i().app.isMicrophoneWanted,c=void 0!==t.video?t.video:i().app.isCameraWanted,!s&&!c){e.next=27;break}return u=setTimeout((function(){o(Y(!0))}),200),e.prev=5,e.next=8,(0,v.VU)({audio:s,video:c});case 8:s&&o(Z("granted")),c&&o(H("granted")),e.next=20;break;case 12:throw e.prev=12,e.t0=e.catch(5),g.warn("".concat(s||c?"Enable":"Disable"," devices failed"),{err:e.t0,audio:s,video:c}),"NotAllowedError"!==(l="object"===(0,r.Z)(e.t0)&&e.t0.name||"")&&"SecurityError"!==l||(s&&o(Z("denied")),c&&o(H("denied"))),s&&"NotFoundError"===l&&o(X(!0)),c&&"NotFoundError"===l&&o(J(!0)),e.t0;case 20:return e.prev=20,o(b()),clearTimeout(u),o(Y(!1)),e.finish(20);case 25:e.next=28;break;case 27:(0,v.jQ)();case 28:case"end":return e.stop()}}),e,null,[[5,12,20,25]])})));return function(t,n){return e.apply(this,arguments)}}()),_=(0,s.hg)("app/setPreferredMediaDevices",function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,c,u,l,d,p,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.audioDeviceId,o=t.videoDeviceId,i=n.dispatch,s=n.getState,c=s().app,u=c.preferredAudioDeviceId,l=c.preferredVideoDeviceId,d=s().realtime,p=d.outgoingCameraAudioTrackId,v=d.outgoingCameraVideoTrackId,f.l.setPreferredMediaDevices(r,o),r!==u&&p&&g.debug("New mic, will change outgoing audio track"),o!==l&&v&&g.debug("New cam, will change outgoing video track"),e.next=9,i(w({audio:r,video:o}));case 9:return e.abrupt("return",{audioDeviceId:r,videoDeviceId:o});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),S=(0,s.hg)("app/populateMediaDevices",function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,c,u,l,d,p,v,h,m,y;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,o=n.getState,i=o().app,s=i.preferredAudioDeviceId,c=i.preferredVideoDeviceId,u=o().realtime,l=u.outgoingCameraAudioTrackId,d=u.outgoingCameraVideoTrackId,e.next=5,f.l.getMediaDevices();case 5:return p=e.sent,e.next=8,f.l.getPreferredMediaDevices();case 8:if(v=e.sent,h=v.audio,m=v.video,0===p.audioInputDevices.length&&(g.warn("Populate media devices found no device",p),r(X(!0))),0===p.videoInputDevices.length&&r(J(!0)),y={},h&&s!==h&&l&&(y.audio=h),m&&c!==m&&d&&(y.video=m),!y.audio&&!y.video){e.next=19;break}return e.next=19,r(w(y));case 19:return e.abrupt("return",Object.assign(Object.assign({},p),{preferredAudioDeviceId:h,preferredVideoDeviceId:m}));case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),E=(0,s.hg)("app/getCalendlyData",function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,o=r().realtime.clientKey,i=r().realtime.sbid,e.next=5,(0,l.Zt)(o,i);case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),C=(0,s.hg)("app/acceptViewing",(function(e){return(0,v.zO)(e),e})),k=(0,s.hg)("app/acceptTakeover",(function(e,t){var n=t.dispatch;return e?((0,v.Ew)(),n(F(!0))):(0,v.d2)(u.xz.REJECT_TAKEOVER),e})),I=(0,s.hg)("app/attemptDial",function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,c,d,f,p,h,y,b,w,_,S,E,C,k,I,T,O;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.dispatch,o=n.getState,i=!!(null==t?void 0:t.wantsChat),s=null==t?void 0:t.agentId,c=o(),d=c.app,f=d.stage,p=d.org,h=p.available,y=p.busy,b=c.realtime,w=b.serverStatus,_=b.clientKey,S=b.sbid,E=c.conversation,C=E.activeConversationId,k=E.conversations,"connected"===w&&_&&S){e.next=8;break}return g.debug("Tried to dial, but not connected, will flag premature dial"),r(ee()),e.abrupt("return",!1);case 8:if(f===u.Hf.ACTIVE_CALL||!h||y){e.next=27;break}if(I=C){e.next=22;break}if(!(T=k.find((function(e){return e.messages&&0===e.messages.items.length&&(!s||e.assigneeId===s)})))){e.next=17;break}I=T.id,r((0,m.K4)(I)),e.next=22;break;case 17:return e.next=19,(0,l.Xw)(_,S,s);case 19:O=e.sent,I=O.data.id,r((0,m.K4)(I));case 22:return r(U(u.Hf.DIALING)),(0,v.yQ)({wantsChat:i,conversationId:I}),e.abrupt("return",!0);case 27:r(q({missed:h&&y}));case 28:return e.abrupt("return",!1);case 29:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),T=(0,s.hg)("app/expandRestingWidget",(function(e,t){var n=t.dispatch,r=(0,t.getState)().app;if(r.stage===u.Hf.NEED_HELP){var o=r.org,i=o.available,a=o.busy,s=o.callLimited;i&&!a&&!s||n(q({missed:!1}))}n(ue("normal"))})),O=(0,s.hg)("app/collapseExpandedWidget",(function(e,t){var n=t.dispatch,r=(0,t.getState)(),o=r.app,i=r.chat,a=r.realtime;(o.stage===u.Hf.ANSWER_CALL||o.stage===u.Hf.ACTIVE_CALL&&i.isChatExpanded&&!a.hasAcceptedCall)&&n((0,h.M0)()),[u.Hf.ACTIVE_CALL,u.Hf.NEED_HELP].includes(o.stage)||(n(U(u.Hf.NEED_HELP)),o.stage===u.Hf.DIALING&&(0,v.bW)())})),x=(0,s.hg)("app/stopDisplayshare",(function(){(0,v.sn)()})),A=(0,s.hg)("app/pageVisibilityChanged",(function(e,t){var n=t.dispatch;return g.debug("Page visibility changed to ".concat(e)),e&&n((0,h.jG)()),e})),D=function(e,t){R(e,t.widgetSettings);var n=Object.assign(Object.assign({},e.org),t);n.widgetSettings=Object.assign(Object.assign({},e.org.widgetSettings),n.widgetSettings),n.widgetSettings.copy=Object.assign(Object.assign({},e.org.widgetSettings.copy),n.widgetSettings.copy),e.org=n},R=function(e,t){t.setByRules.forEach((function(t){var n=t.attribute;"hidden"===n?delete e.options.hidden:"position"===n?delete e.options.position:"launcher"===n&&delete e.options.launcher}))},L=function(e){e.stage=u.Hf.ACTIVE_CALL},P=(0,s.oM)({name:"app",initialState:y,reducers:{iframeFailed:function(e){e.isIframeFailed=!0},setOrg:function(e,t){e.hasReceivedOrg=!0,D(e,t.payload)},setStage:function(e,t){e.stage===u.Hf.ACTIVE_CALL&&[u.Hf.DIALING,u.Hf.BOOK_MEETING,u.Hf.PROACTIVE_VIDEO].includes(t.payload)?g.warn("Cannot set stage to ".concat(t.payload," when stage is ").concat(e.stage)):([u.Hf.ACTIVE_CALL,u.Hf.ANSWER_CALL].includes(t.payload)&&(e.startCallOnPageVisible=!1),e.stage=t.payload)},setMousePosition:function(e,t){e.top=t.payload.top,e.left=t.payload.left},setScreenTakeover:function(e,t){e.screenTakeoverOn=t.payload},setIsStreamEvents:function(e,t){e.isStreamEvents=t.payload},setMicrophonePermission:function(e,t){e.isMicrophonePermissionGranted="granted"===t.payload,e.isMicrophonePermissionDenied="denied"===t.payload,(e.isMicrophonePermissionGranted||e.isMicrophonePermissionDenied)&&(e.showPermissionOverlay=!1)},setCameraPermission:function(e,t){e.isCameraPermissionGranted="granted"===t.payload,e.isCameraPermissionDenied="denied"===t.payload,(e.isCameraPermissionGranted||e.isCameraPermissionDenied)&&(e.showPermissionOverlay=!1)},setIsRejectedIncomingVideoPlay:function(e,t){e.isRejectedIncomingVideoPlay=t.payload,t.payload&&(e.isAutoplayAudioAllowed=!1)},setServerInitData:function(e,t){e.agents=t.payload.agents,e.allAgents=t.payload.allAgents,e.hasReceivedOrg=!0,D(e,t.payload.org)},agentNotAvailable:function(e,t){[u.Hf.ACTIVE_CALL,u.Hf.ANSWER_CALL].includes(e.stage)||(e.stage=u.Hf.BOOK_MEETING,e.isMissedCall=t.payload.missed)},setCalendlySelectedMeetingType:function(e,t){e.calendlySelectedMeetingType=t.payload},setAgentMuteStates:function(e,t){e.isAgentCamMuted=t.payload.isAgentCamMuted,e.isAgentMicMuted=t.payload.isAgentMicMuted},setShowPermissionOverlay:function(e,t){e.showPermissionOverlay=t.payload},setHasNoAudioDevice:function(e,t){e.hasNoAudioDevice=t.payload},setHasNoVideoDevice:function(e,t){e.hasNoVideoDevice=t.payload},callReady:function(e,t){var n;e.stage===u.Hf.DIALING?(g.debug("Setting stage to ACTIVE_CALL from DIALING on callReady"),L(e)):(null===(n=t.payload)||void 0===n?void 0:n.accepted)?(g.debug("Setting stage to ACTIVE_CALL on callReady since call was already accepted"),L(e)):e.stage!==u.Hf.ACTIVE_CALL&&(e.isPageVisible?(g.debug("Setting stage to ANSWER_CALL on callReady"),e.stage=u.Hf.ANSWER_CALL):(g.debug("Setting startCallOnPageVisible true on callReady"),e.startCallOnPageVisible=!0))},clearMediaDeviceError:function(e){e.mediaDeviceError=""},setIsPlayingVideo:function(e,t){e.isVideoPlaying=t.payload},prematureDial:function(e){e.wasPrematureDial=!0},setIsManuallyPromptingAudio:function(e,t){e.isManuallyPromptingAudio=t.payload},showSpyingOptInModal:function(e,t){e.showSpyingOptin=t.payload},showTakeoverModal:function(e,t){e.showTakeoverOptin=t.payload},showRecordingOptinModal:function(e,t){e.showRecordOptin=t.payload},setIsAfkDisconnected:function(e,t){e.isAfkDisconnected=t.payload},setWidgetSettings:function(e,t){R(e,t.payload),e.org.widgetSettings=t.payload},setPageWidgetSettings:function(e,t){e.pageWidgetSettings=t.payload},setProactiveVideo:function(e,t){e.proactiveVideo=t.payload;var n=[u.Hf.ANSWER_CALL,u.Hf.ACTIVE_CALL,u.Hf.BOOK_MEETING];e.proactiveVideo&&e.org.available&&!e.org.busy&&!n.includes(e.stage)?e.stage=u.Hf.PROACTIVE_VIDEO:e.proactiveVideo||e.stage!==u.Hf.PROACTIVE_VIDEO||(e.stage=u.Hf.NEED_HELP)},setOptions:function(e,t){e.options=Object.assign(Object.assign(Object.assign({},p.W),e.options),t.payload),"boolean"==typeof t.payload.expanded&&("collapsed"===e.widgetExtent&&t.payload.expanded?e.widgetExtent="normal":"collapsed"===e.widgetExtent||t.payload.expanded||(e.widgetExtent="collapsed"))},rootElementCreated:function(e,t){e.rootElementId=t.payload},setIsRequestingDisplayshare:function(e,t){e.isRequestingDisplayshare=t.payload},setVideoRenderer:function(e,t){e.videoRenderer=t.payload},setWidgetExtent:function(e,t){e.stage===u.Hf.CALL_ENDED&&"collapsed"===t.payload&&(e.stage=u.Hf.NEED_HELP),e.widgetExtent=t.payload},setHelpCenterExtent:function(e,t){e.helpCenterExtent=t.payload},setSkeletalQuestionVisible:function(e,t){e.isSkeletalQuestionVisible=t.payload},setSkeletalQuestionDismissed:function(e,t){e.isSkeletalQuestionDismissed=t.payload},showSkeletalConversationIdChanged:function(e,t){e.showSkeletalConversationId=t.payload,e.showSkeletalConversationIdChangedTs=Date.now()},callOptionsShown:function(e,t){e.showCallOptions=t.payload},setOrgPropertiesFromError:function(e,t){var n=void 0===t.payload.available?e.org.available:t.payload.available,r=void 0===t.payload.hidden?e.org.widgetSettings.hidden:t.payload.hidden;D(e,Object.assign(Object.assign({},e.org),{available:n,widgetSettings:Object.assign(Object.assign({},e.org.widgetSettings),{hidden:r})}))},uiPanelChanged:function(e,t){"chat"===t.payload&&(e.uiIsHideChat=!1),e.uiPanel=t.payload},uiHideChat:function(e,t){e.uiIsHideChat=t.payload},uiToggleMicCamSettings:function(e,t){e.uiIsMicCamSettings=t.payload},journeyVideoStateChanged:function(e,t){e.journeyVideoState=t.payload},receivedAgentUpdate:function(e,t){var n=t.payload,r=n.userId,o=n.available,i=e.allAgents.findIndex((function(e){return e.id===r}));i>-1&&(e.allAgents[i].available=o)},uiShowDebuggerChanged:function(e,t){e.uiIsShowDebug=t.payload}},extraReducers:function(e){e.addCase(w.pending,(function(e,t){void 0!==t.meta.arg.audio&&(e.isMicrophoneWanted=!!t.meta.arg.audio),void 0!==t.meta.arg.video&&(e.isCameraWanted=!!t.meta.arg.video)})),e.addCase(b.fulfilled,(function(e,t){var n=t.payload;e.isMicrophonePermissionGranted=n.isMicrophonePermissionGranted,e.isMicrophonePermissionDenied=n.isMicrophonePermissionDenied,e.isCameraPermissionGranted=n.isCameraPermissionGranted,e.isCameraPermissionDenied=n.isCameraPermissionDenied,e.isAutoplayAudioAllowed=n.isAutoplayAudioAllowed,(e.isMicrophonePermissionGranted||e.isMicrophonePermissionDenied||e.isCameraPermissionGranted||e.isCameraPermissionDenied)&&(e.showPermissionOverlay=!1)})),e.addCase(E.fulfilled,(function(e,t){e.calendlyData=t.payload,e.calendlyDataError=null})),e.addCase(E.rejected,(function(e,t){g.error(t.error.message||"Failed to fetch calendly data"),e.calendlyDataError=t.error.message||"Failed to fetch calendly data"})),e.addCase(w.rejected,(function(e,t){e.mediaDeviceError=t.error.message||"Could not enable media devices for unknown reason"})),e.addCase(_.pending,(function(e){e.mediaDeviceError=""})),e.addCase(_.fulfilled,(function(e,t){var n=t.payload,r=n.audioDeviceId,o=n.videoDeviceId;e.preferredAudioDeviceId=r,e.preferredVideoDeviceId=o})),e.addCase(_.rejected,(function(e,t){e.mediaDeviceError=t.error.message||"Unknown reason"})),e.addCase(S.fulfilled,(function(e,t){var n=t.payload,r=n.preferredAudioDeviceId,o=n.preferredVideoDeviceId;e.audioDevices=t.payload.audioInputDevices,e.videoDevices=t.payload.videoInputDevices,e.preferredAudioDeviceId=r,e.preferredVideoDeviceId=o})),e.addCase(k.fulfilled,(function(e,t){e.hasOptedIntoTakeover=t.payload})),e.addCase(h.Qh.pending,(function(e){e.stage!==u.Hf.ACTIVE_CALL&&(g.debug("Setting stage to ACTIVE_CALL from [".concat(e.stage,"] on callAccepted")),L(e))})),e.addCase(h.M0.pending,(function(e){e.stage=u.Hf.NEED_HELP})),e.addCase(h.Ve.pending,(function(e){u.Hf.ACTIVE_CALL===e.stage&&(e.stage=u.Hf.CALL_ENDED,e.showPermissionOverlay=!1,e.uiIsHideChat=!1),u.Hf.ANSWER_CALL===e.stage&&(e.stage=u.Hf.NEED_HELP),e.startCallOnPageVisible=!1,e.isMicrophoneWanted=!1,e.isCameraWanted=!1})),e.addCase(A.pending,(function(e,t){e.isPageVisible=t.meta.arg})),e.addCase(I.pending,(function(e){e.wasPrematureDial=!1})),e.addCase(x.fulfilled,(function(e){e.isRequestingDisplayshare=!1}))}}),M=(0,c.P1)((function(e){return e.app.allAgents}),(function(e){return e.filter((function(e){return e.onCall}))})),N=P.actions,j=N.iframeFailed,W=N.setOrg,U=N.setStage,V=N.setMousePosition,F=N.setScreenTakeover,B=N.setIsStreamEvents,Z=N.setMicrophonePermission,H=N.setCameraPermission,G=N.setIsRejectedIncomingVideoPlay,K=N.setServerInitData,q=N.agentNotAvailable,z=(N.setCalendlySelectedMeetingType,N.setAgentMuteStates),Y=N.setShowPermissionOverlay,X=N.setHasNoAudioDevice,J=N.setHasNoVideoDevice,$=N.callReady,Q=(N.clearMediaDeviceError,N.setIsPlayingVideo),ee=N.prematureDial,te=(N.setIsManuallyPromptingAudio,N.showTakeoverModal),ne=N.showRecordingOptinModal,re=(N.setIsAfkDisconnected,N.setWidgetSettings),oe=N.setPageWidgetSettings,ie=N.setProactiveVideo,ae=N.setOptions,se=N.rootElementCreated,ce=N.setIsRequestingDisplayshare,ue=(N.setVideoRenderer,N.setWidgetExtent),le=N.setHelpCenterExtent,de=N.setSkeletalQuestionVisible,fe=N.setSkeletalQuestionDismissed,pe=N.showSkeletalConversationIdChanged,ve=N.showSpyingOptInModal,he=N.callOptionsShown,me=N.setOrgPropertiesFromError,ge=N.uiPanelChanged,ye=N.uiHideChat,be=N.uiToggleMicCamSettings,we=N.journeyVideoStateChanged,_e=N.receivedAgentUpdate,Se=N.uiShowDebuggerChanged;const Ee=P.reducer},9513:(e,t,n)=>{"use strict";n.d(t,{Ns:()=>d,TX:()=>f,XE:()=>m,ZP:()=>g,ZS:()=>p});var r=n(2982),o=n(5861),i=n(4687),a=n.n(i),s=n(6403),c=n(3668),u=n(7660),l=(0,n(2795).U)("chat-slice"),d=(0,s.hg)("realtime/fetchMoreChatMessages",(0,o.Z)(a().mark((function e(){var t,n,r,o,i,s,u,l,d,f,p=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:{reset:!1},n=t.reset,r=p.length>1?p[1]:void 0,o=r.getState,i=o(),s=i.chat.chatMessagesCursor,u=i.realtime,l=u.sbid,d=u.clientKey){e.next=5;break}throw new Error("Cannot fetch messages until clientKey is set");case 5:if(l){e.next=7;break}throw new Error("Cannot fetch messages until sbid is set");case 7:return e.next=9,(0,c.b6)(l,d,n?null:s);case 9:return f=e.sent,e.abrupt("return",f.data);case 11:case"end":return e.stop()}}),e)})))),f=(0,s.hg)("chat/submitVisitorContact",function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,d,f,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,o=n.dispatch,i=r().realtime.clientKey,d=r().realtime.sbid,f=r(),p=!(0,u.mG)(t.email||"",f),e.next=7,(0,c.LL)(Object.assign({visitorId:d,clientKey:i,createHubspotContact:p},t));case 7:if(!t.email){e.next=14;break}return e.t0=s.SI,e.next=11,o((0,u.lf)({email:t.email,state:f}));case 11:e.t1=e.sent,(0,e.t0)(e.t1)&&l.info("Sent identity to hubspot");case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),p=(0,s.hg)("chat/submitVisitorFeedback",function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.feedbackAnswers,o=n.getState,i=o().realtime.clientKey,s=o().realtime.sbid,u=o().conversation.activeConversationId){e.next=7;break}throw new Error("Cannot submit visitor feedback without conversation id");case 7:return e.next=9,(0,c.fA)(s,i,r,u);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),v=(0,s.oM)({name:"chat",initialState:{activeConversationId:null,isChatExpanded:!1,isAgentTyping:!1,hasFetchedChat:!1,chatMessages:[],chatMessagesCursor:null,unreadMessages:0},reducers:{setIsChatExpanded:function(e,t){e.isChatExpanded=t.payload},setUnreadMessages:function(e,t){e.unreadMessages=t.payload},addPendingChatMessage:function(e,t){var n,o=t.payload.args.content,i=(null===(n=o.blocks[0])||void 0===n?void 0:n.text)||"";e.chatMessages=[].concat((0,r.Z)(e.chatMessages),[{id:"pending-msg-".concat(t.payload.requestId),conversationId:0,pending:!0,timestamp:Date.now(),from:t.payload.sbid,visitorId:t.payload.sbid,agent:t.payload.agent,text:i,content:o,imageIds:t.payload.args.imageIds,sourceType:"visitor",dateRead:null}])}},extraReducers:function(e){e.addCase(d.fulfilled,(function(e,t){var n;e.hasFetchedChat=!0,e.chatMessages=(null===(n=t.meta.arg)||void 0===n?void 0:n.reset)?t.payload.items:e.chatMessages.concat(t.payload.items),e.chatMessagesCursor=t.payload.cursor})).addCase(d.rejected,(function(e){e.hasFetchedChat=!0}))}}),h=v.actions,m=h.setIsChatExpanded;h.setUnreadMessages,h.addPendingChatMessage;const g=v.reducer},4578:(e,t,n)=>{"use strict";n.d(t,{fq:()=>L,Qt:()=>Y,HF:()=>F,Kq:()=>H,Vv:()=>B,xC:()=>Z,ij:()=>T,ZP:()=>X,ku:()=>y,RN:()=>_,db:()=>V,JC:()=>E,DQ:()=>C,os:()=>K,i7:()=>G,iL:()=>k,_w:()=>M,C3:()=>N,FS:()=>P,sy:()=>j,NJ:()=>W,Ug:()=>w,K4:()=>q,bJ:()=>S,Ys:()=>z,KH:()=>b,oY:()=>D,yS:()=>x});var r=n(4942),o=n(2982),i=n(5861),a=n(4687),s=n.n(a),c=n(6403),u=n(2222),l=n(3668),d=n(6688),f=n(8990),p=n(864),v=n(9199),h=n(5164),m=n(7887),g=(0,n(2795).U)("src/app/store/conversation-slice"),y=(0,c.hg)("conversation/fetchConversations",function(){var e=(0,i.Z)(s().mark((function e(t,n){var r,o,i,a,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,o=r(),i=o.realtime,a=i.clientKey,c=i.sbid,a){e.next=4;break}throw new Error("Cannot fetch messages until clientKey is set");case 4:if(c){e.next=6;break}throw new Error("Cannot fetch messages until sbid is set");case 6:return e.next=8,(0,l.uv)(a,c);case 8:return u=e.sent,e.abrupt("return",u.data);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),b=(0,c.hg)("conversation/startNewConversation",function(){var e=(0,i.Z)(s().mark((function e(t,n){var r,o,i,a,c,u,d,f,v,h,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.agentId,o=n.getState,i=n.dispatch,a=o(),c=a.conversation.conversations,u=a.realtime,d=u.clientKey,f=u.sbid,d){e.next=5;break}throw new Error("Cannot fetch messages until clientKey is set");case 5:if(f){e.next=7;break}throw new Error("Cannot fetch messages until sbid is set");case 7:if(v=(0,p.Id)(c),r&&(v=v.filter((function(e){return e.assigneeId===r}))),!(h=!!v.length&&v[0])){e.next=14;break}i(q(h.id)),e.next=18;break;case 14:return e.next=16,(0,l.Xw)(d,f,r);case 16:m=e.sent,i(q(m.data.id));case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),w=(0,c.hg)("conversation/sendConversationMessage",function(){var e=(0,i.Z)(s().mark((function e(t,n){var r,o,i,a,c,u,l,p,v,h,m,g,y,b;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,o=n.dispatch,i=n.requestId,a=r().realtime,c=a.sbid,u=a.helpedBy,l=a.helpedByAvatar,p=a.helpedByName,v=a.helpedByTitle,h=t.registeredImg?{conversationId:t.conversationId,content:t.content,imageIds:[t.registeredImg.id]}:t,o(A({args:h,agent:{id:u,name:p,avatar:l,title:v},sbid:c||"",requestId:i})),!t.registeredImg||!t.file){e.next=21;break}return e.prev=5,e.next=8,(0,f.Z)(t.file,t.registeredImg.uploadUrl,(function(e){o(Z(e))}));case 8:if(204===(m=e.sent).status){e.next=13;break}throw g="Failed to upload image (".concat(m.status,")"),o(H(g)),new Error(g);case 13:e.next=21;break;case 15:throw e.prev=15,e.t0=e.catch(5),y="unknown reason","message"in e.t0&&(y=e.t0.message),o(H("Image upload failed: ".concat(y))),new Error("Image upload failed: ".concat(y));case 21:return e.next=23,(0,d.fD)(h);case 23:if(b=e.sent){e.next=26;break}throw new Error("No connection to server");case 26:if(!("error"in b)){e.next=28;break}throw new Error(b.error);case 28:return e.abrupt("return",b.data);case 29:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t,n){return e.apply(this,arguments)}}()),_=(0,c.hg)("conversation/fetchMoreConversationMessages",function(){var e=(0,i.Z)(s().mark((function e(t,n){var r,o,i,a,c,u,d,f,p,v;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.conversationId,o=n.getState,i=o(),a=i.conversation.conversations,c=i.realtime,u=c.clientKey,d=c.sbid,u){e.next=5;break}throw new Error("Cannot fetch messages until clientKey is set");case 5:if(d){e.next=7;break}throw new Error("Cannot fetch messages until sbid is set");case 7:if(f=a.find((function(e){return e.id===r}))){e.next=10;break}throw new Error("Conversation does not exist");case 10:if(f.messages){e.next=12;break}throw new Error("Conversation has no messages");case 12:if(p=f.messages.cursor){e.next=15;break}throw new Error("All messages have been fetched for that conversation");case 15:return e.next=17,(0,l.Ug)(u,d,r,p);case 17:return v=e.sent,e.abrupt("return",v.data);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),S=(0,c.hg)("conversation/setConversationRead",function(){var e=(0,i.Z)(s().mark((function e(t,n){var r,o,i,a,c,u,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.conversationId,o=n.getState,i=o(),a=i.realtime,c=a.clientKey,u=a.sbid,c){e.next=5;break}throw new Error("Cannot read messages until clientKey is set");case 5:if(u){e.next=7;break}throw new Error("Cannot fetch messages until sbid is set");case 7:return(0,l.aS)(c,u,r),e.next=10,I({conversationId:r,getState:o});case 10:return d=e.sent,e.abrupt("return",Object.assign(Object.assign({},d),{unreadMessageCounts:Object.assign(Object.assign({},d.unreadMessageCounts),{agent:0})}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),E=(0,c.hg)("conversation/receivedBotConversationMessage",(function(e,t){var n=t.getState,r=t.dispatch,o=n().conversation.activeInboundCallState,i=(0,p.KU)(e);i&&r(Y(Object.assign(Object.assign(Object.assign({},o),i),{receivedTime:Date.now(),dialTime:0}))),r(C(e))})),C=(0,c.hg)("conversation/receivedConversationMessage",function(){var e=(0,i.Z)(s().mark((function e(t,n){var r,i,a,c,u,l,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,i=t.conversationId,g.debug("conversation/receivedConversationMessage ".concat(i)),e.next=5,I({conversationId:i,getState:r});case 5:return a=e.sent,c=a.messages||{items:[],cursor:null},u=c.items.filter((function(e){return e.id!==t.id})),l=Object.assign({},a.unreadMessageCounts),u.length===c.items.length&&l[t.sourceType]++,d=Object.assign(Object.assign({},a),{typingState:void 0,messages:Object.assign(Object.assign({},c),{items:[t].concat((0,o.Z)(u))}),unreadMessageCounts:l}),e.abrupt("return",d);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),k=(0,c.hg)("conversation/registerImage",function(){var e=(0,i.Z)(s().mark((function e(t,n){var r,o,i,a,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,o=r(),i=o.realtime,a=i.sbid,c=i.clientKey){e.next=4;break}throw new Error("Cannot fetch messages until clientKey is set");case 4:if(a){e.next=6;break}throw new Error("Cannot fetch messages until sbid is set");case 6:return e.next=8,(0,l.iL)(a,c,t);case 8:return u=e.sent,e.abrupt("return",u.data);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),I=function(){var e=(0,i.Z)(s().mark((function e(t){var n,r,o,i,a,c,u,d,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.conversationId,r=t.getState,o=r(),i=o.conversation.conversations,a=o.realtime,c=a.clientKey,u=a.sbid,!(d=i.find((function(e){return e.id===n})))){e.next=5;break}return e.abrupt("return",d);case 5:if(c){e.next=7;break}throw new Error("Cannot fetch messages until clientKey is set");case 7:if(u){e.next=9;break}throw new Error("Cannot fetch messages until sbid is set");case 9:return e.next=11,(0,l.cc)(c,u,n);case 11:return f=e.sent,e.abrupt("return",f.data);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=(0,c.hg)("conversation/conversationTypingStateChanged",function(){var e=(0,i.Z)(s().mark((function e(t,n){var r,o,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,o=t.conversationId,e.next=4,I({conversationId:o,getState:r});case 4:return i=e.sent,a=Object.assign(Object.assign({},i),{typingState:t}),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),O=0,x=(0,c.hg)("conversation/visitorIsTyping",(function(e,t){var n=t.getState,r=t.dispatch,o=n().conversation,i=o.lastSentVisitorTypingTime,a=o.visitorIsTypingConversationId,s=e.conversationId,c=s,u=i;if(e.isCancel)Date.now()-i>=3e3&&((0,d.Yi)({conversationId:s,isTyping:!1}),c=null);else if(s){clearTimeout(O),O=window.setTimeout((function(){r(x(Object.assign(Object.assign({},e),{isCancel:!0})))}),3001);var l=s!==a;(Date.now()-i>1e4||l)&&(u=Date.now(),(0,d.Yi)({conversationId:s,isTyping:!0}))}return{visitorIsTypingConversationId:c,lastSentVisitorTypingTime:u}})),A=(0,c.hg)("conversation/addPendingConversationMessage",function(){var e=(0,i.Z)(s().mark((function e(t,n){var r,i,a,c,u,l,d,f,p,v,h,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.args,i=t.requestId,a=t.sbid,c=t.agent,u=n.getState,d=r.conversationId,f=r.content,p=r.imageIds,e.next=5,I({conversationId:d,getState:u});case 5:return v=e.sent,h=(null===(l=f.blocks[0])||void 0===l?void 0:l.text)||"",m=v.messages||{items:[],cursor:null},e.abrupt("return",Object.assign(Object.assign({},v),{messages:Object.assign(Object.assign({},m),{items:[{id:"pending-msg-".concat(i),conversationId:d,pending:!0,timestamp:Date.now(),from:a,visitorId:a,agent:c,text:h,content:f,imageIds:p,sourceType:"visitor",dateRead:null}].concat((0,o.Z)(m.items))})}));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),D=(0,c.hg)("chat/submitChatChoice",function(){var e=(0,i.Z)(s().mark((function e(t,n){var r,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,o=r().realtime.clientKey,i=r().realtime.sbid,e.next=5,(0,l.O3)(Object.assign({clientKey:o,visitorId:i},t));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),R=(0,c.oM)({name:"conversation",initialState:{conversations:[],conversationsLoaded:!1,activeConversationId:null,conversationImageUploadDataUrl:null,conversationImageUploadDataUrlDimensions:null,conversationImageUploadId:null,conversationImageUploadProgress:0,conversationImageUploadError:null,hasSentChatMessage:!1,contextualConversationId:null,isShowFeedbackInput:!1,activeInboundCallState:null,visitorIsTypingConversationId:null,lastSentVisitorTypingTime:0},reducers:{markChatMessageRead:function(e,t){(0,d.G7)((0,r.Z)({},t.payload.messageId,!0))},conversationImageUploadDataUrlChanged:function(e,t){e.conversationImageUploadDataUrl=t.payload.conversationImageUploadDataUrl,e.conversationImageUploadDataUrlDimensions=t.payload.conversationImageUploadDataUrlDimensions},conversationImageUploadIdChanged:function(e,t){e.conversationImageUploadId=t.payload},conversationImageUploadProgressChanged:function(e,t){e.conversationImageUploadProgress=t.payload},conversationImageUploadErrorChanged:function(e,t){e.conversationImageUploadError=t.payload},receivedConversationUpdate:function(e,t){var n,r=t.payload,o=null===(n=e.conversations)||void 0===n?void 0:n.findIndex((function(e){return e.id===r.id}));if(-1===o)e.conversations.unshift(Object.assign(Object.assign({},r),{messages:{cursor:null,items:[]}}));else{var i=e.conversations[o];e.conversations.splice(o,1,Object.assign(Object.assign(Object.assign({},i),r),{messages:i.messages}))}},receivedConversationMessageUpdate:function(e,t){var n,r=t.payload,o=r.id,i=r.conversationId;if(e.activeInboundCallState){var a=(0,p.KU)(t.payload);a&&a.journeyStepStatus!==v.Gj.IN_PROGRESS&&a.journeyStepId===e.activeInboundCallState.journeyStepId&&(e.activeInboundCallState=null)}var s=null===(n=e.conversations)||void 0===n?void 0:n.find((function(e){return e.id===i}));if(s&&s.messages){var c=s.messages.items.findIndex((function(e){return e.id===o}));c>-1&&(s.messages.items[c]=t.payload)}},setActiveConversation:function(e,t){e.activeConversationId=t.payload},showFeedbackInput:function(e,t){e.isShowFeedbackInput=t.payload},activeInboundCallStateUpdated:function(e,t){t.payload?e.activeInboundCallState=t.payload:e.activeInboundCallState=null}},extraReducers:function(e){!function(e,t,n){t.forEach((function(t){return e.addCase(t,n)}))}(e,[T.fulfilled,S.fulfilled,A.fulfilled,C.fulfilled],(function(e,t){var n=t.payload,r=e.conversations.findIndex((function(e){return e.id===n.id}));-1===r?e.conversations.unshift(Object.assign(Object.assign({},n),{messages:{cursor:null,items:[]}})):e.conversations[r]=n})),e.addCase(h.T.fulfilled,(function(e,t){var n=t.payload,r=n.callStartTime,o=n.callConversationId;r&&o&&(e.activeConversationId=o)})),e.addCase(y.fulfilled,(function(e,t){e.conversations=t.payload.items,e.conversationsLoaded=!0})),e.addCase(_.fulfilled,(function(e,t){var n=t.meta.arg.conversationId,r=e.conversations.findIndex((function(e){return e.id===n}));if(-1===r)throw new Error("Conversation does not exist");var i=e.conversations[r].messages;if(!i)throw new Error("Conversation has no messages");e.conversations[r]=Object.assign(Object.assign({},e.conversations[r]),{messages:{cursor:t.payload.cursor,items:[].concat((0,o.Z)(i.items),(0,o.Z)(t.payload.items))}})})),e.addCase(w.fulfilled,(function(e,t){var n=t.payload.conversationId,r=e.conversations.findIndex((function(e){return e.id===n}));if(-1===r)throw new Error("Conversation does not exist");var i=e.conversations[r].messages;if(!i)throw new Error("Conversation has no messages");e.conversations[r]=Object.assign(Object.assign({},e.conversations[r]),{messages:Object.assign(Object.assign({},i),{items:[t.payload].concat((0,o.Z)(i.items.filter((function(e){return e.id!=="pending-msg-".concat(t.meta.requestId)}))))})}),e.visitorIsTypingConversationId=null,e.lastSentVisitorTypingTime=0,e.hasSentChatMessage=!0,!e.contextualConversationId&&t.payload.conversationId&&(e.contextualConversationId=t.payload.conversationId)})).addCase(w.rejected,(function(e,t){var n=t.meta.arg.conversationId,r=e.conversations.findIndex((function(e){return e.id===n}));if(-1===r)throw new Error("Conversation does not exist");var i=e.conversations[r].messages;if(!i)throw new Error("Conversation has no messages");e.conversations[r]=Object.assign(Object.assign({},e.conversations[r]),{messages:Object.assign(Object.assign({},i),{items:(0,o.Z)(i.items.filter((function(e){return e.id!=="pending-msg-".concat(t.meta.requestId)})))})})})),e.addCase(D.fulfilled,(function(e,t){var n=t.meta.arg,r=n.conversationId,o=n.choice,i=n.messageId,a=e.conversations.findIndex((function(e){return e.id===r}));if(-1===a)throw new Error("Conversation does not exist");var s=e.conversations[a].messages;if(!s)throw new Error("Conversation has no messages");e.conversations[a]=Object.assign(Object.assign({},e.conversations[a]),{messages:Object.assign(Object.assign({},s),{items:s.items.map((function(e){return e.id===i&&e.content.blocks&&e.content.blocks[1]&&e.content.blocks[1].type===v._y.CHOICES&&(e.content.blocks[1].choice=o),e}))})})})),e.addCase(x.fulfilled,(function(e,t){var n=t.payload,r=n.lastSentVisitorTypingTime,o=n.visitorIsTypingConversationId;e.lastSentVisitorTypingTime=r,e.visitorIsTypingConversationId=o}))}}),L="agent-typing",P=(0,u.P1)((function(e){return e.conversation.conversations}),(function(e){return(0,o.Z)(e).filter((function(e){var t=e.messages;return t&&t.items.length}))})),M=(0,u.P1)(m.xX,(function(e){return e.app.allAgents}),(function(e){return e.app.org}),(function(e,t,n){var r={id:0,name:n.name,title:""};return e?e.assigneeId?t.find((function(t){return t.id===e.assigneeId}))||r:e.lastAgentId&&t.find((function(t){return t.id===e.lastAgentId}))||r:r})),N=(0,u.P1)((function(e){return e.conversation.activeConversationId}),(function(e){return e.conversation.conversations}),(function(e){return e.realtime.sbid}),(function(e){return e.conversation.isShowFeedbackInput}),(function(e){return e.app.org.feedbackForm.feedbackQuestions}),(function(e,t,n,i,a){if(!e)return[];var s=t.find((function(t){return t.id===e}));if(!s)return[];var c=s.messages;if(!c)return[];var u=(0,o.Z)(c.items).sort((function(e,t){return e.pending!==t.pending?e.pending?-1:1:t.timestamp-e.timestamp}));if(n&&i){var l=a.reduce((function(e,t){return Object.assign(Object.assign({},e),(0,r.Z)({},t.id,t))}),{}),d=u.find(p.CY),f=!!d&&Date.now()-d.timestamp<3e4;d&&f||u.unshift((0,p.TD)(n,e,"feedback-input","feedback","system",l))}else n&&s.typingState&&s.typingState.isTyping&&u.unshift((0,p.TD)(n,e,L,"typing","system",{},s.typingState.agent));return u})),j=(0,u.P1)((function(e){return e.conversation.activeConversationId}),(function(e){return e.conversation.conversations}),(function(e,t){if(!e)return!1;var n=t.find((function(t){return t.id===e}));if(!n)return!1;var r=n.messages;return!!r&&!!r.cursor})),W=(0,u.P1)((function(e){return e.conversation.conversations}),(function(e){return e.reduce((function(e,t){return e+(t.unreadMessageCounts.agent||0)}),0)})),U=R.actions,V=U.markChatMessageRead,F=U.conversationImageUploadDataUrlChanged,B=U.conversationImageUploadIdChanged,Z=U.conversationImageUploadProgressChanged,H=U.conversationImageUploadErrorChanged,G=U.receivedConversationUpdate,K=U.receivedConversationMessageUpdate,q=U.setActiveConversation,z=U.showFeedbackInput,Y=U.activeInboundCallStateUpdated;const X=R.reducer},7736:(e,t,n)=>{"use strict";n.d(t,{B2:()=>o,ZP:()=>c,aq:()=>s,rn:()=>a});var r=(0,n(6403).oM)({name:"demo",initialState:{isDemoing:!1,isFakingVideo:!1},reducers:{setIsDemoing:function(e,t){e.isDemoing=t.payload},setIsFakingVideo:function(e,t){e.isFakingVideo=t.payload}}}),o=function(e){return e.demo.isDemoing},i=r.actions,a=i.setIsDemoing,s=i.setIsFakingVideo;const c=r.reducer},18:(e,t,n)=>{"use strict";n.d(t,{A7:()=>p,Jb:()=>m,LY:()=>c,Ox:()=>d,V8:()=>f,XK:()=>u,Z2:()=>h,ZP:()=>_,dC:()=>l,qP:()=>w});var r=n(5861),o=n(4687),i=n.n(o),a=n(6403),s=n(3668),c=(0,a.hg)("helpCenter/fetcgHelpCenterSettings",function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,o=r(),a=o.app.org.id,e.next=4,(0,s.bZ)(a);case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),u=(0,a.hg)("helpCenter/fetchCollections",function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,o=r(),a=o.app.org.id,e.next=4,(0,s.bG)(a);case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),l=(0,a.hg)("helpCenter/getArticlesBySearch",function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query,o=n.getState,a=o(),c=a.app.org.id,e.next=5,(0,s.Ni)(c,r);case 5:return u=e.sent,e.abrupt("return",u.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),d=(0,a.hg)("helpCenter/getArticlesByCategory",function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a,c,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.categoryId,o=n.getState,a=n.dispatch,c=o(),u=c.app.org.id,a(y(r)),e.next=6,(0,s.Zd)(u,r);case 6:return l=e.sent,e.abrupt("return",l.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),f=(0,a.hg)("helpCenter/getArticle",function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.articleId,o=n.getState,a=o(),c=a.app.org.id,e.next=5,(0,s.fq)(c,r);case 5:return u=e.sent,e.abrupt("return",u.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),p=(0,a.hg)("helpCenter/resetActiveCollection",(function(e,t){var n=t.dispatch;n(y(null)),n(b([]))})),v=(0,a.oM)({name:"helpCenter",initialState:{helpCenterSettings:null,selectedCollectionId:null,collections:[],articles:[],article:null,loading:!1,search:"",searchResults:[],searchLoading:!1},reducers:{setActiveCollection:function(e,t){e.selectedCollectionId=t.payload},setArticles:function(e,t){e.articles=t.payload},setSearch:function(e,t){e.search=t.payload}},extraReducers:function(e){e.addCase(c.fulfilled,(function(e,t){e.loading=!1,e.helpCenterSettings=t.payload})),e.addCase(u.fulfilled,(function(e,t){e.loading=!1,e.collections=t.payload})),e.addCase(l.fulfilled,(function(e,t){e.loading=!1,e.searchResults=t.payload})),e.addCase(d.fulfilled,(function(e,t){e.loading=!1,e.articles=t.payload})),e.addCase(f.fulfilled,(function(e,t){e.loading=!1,e.article=t.payload}))}}),h=function(e){return e.helpCenter.collections},m=function(e){return e.helpCenter.collections.find((function(t){return t.id===e.helpCenter.selectedCollectionId}))},g=v.actions,y=g.setActiveCollection,b=g.setArticles,w=g.setSearch;const _=v.reducer},5592:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r.Q});var r=n(3078)},5164:(e,t,n)=>{"use strict";n.d(t,{sJ:()=>N,xn:()=>W,Kq:()=>D,Ie:()=>X,yn:()=>J,Ax:()=>A,Eq:()=>L,Qh:()=>ee,Ve:()=>re,M0:()=>te,tq:()=>ue,jv:()=>ae,ZP:()=>ke,li:()=>ne,Ww:()=>ve,XC:()=>$,SI:()=>pe,fH:()=>we,p:()=>Se,E3:()=>x,JF:()=>he,z5:()=>me,Fy:()=>be,m7:()=>ye,a7:()=>oe,er:()=>j,mr:()=>se,kt:()=>K,f9:()=>q,mg:()=>z,lk:()=>G,s4:()=>Z,Rn:()=>H,LY:()=>Ee,X$:()=>P,Yk:()=>_e,jG:()=>de,LI:()=>le,IA:()=>V,_i:()=>F,T:()=>U});var r,o=n(5861),i=n(4687),a=n.n(i),s=n(6403),c=n(2222),u=n(7856),l=n(7109),d=n(6688),f=n(2795),p=n(9046),v=n(4049),h=n(8743),m=n(8273),g=n(6369),y=n(4463),b=n(6436);function w(){if(!r){var e=document.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("2d");t.fillStyle="#1E2749",t.fillRect(0,0,1,1),r=e.captureStream(1)}return r}var _=n(9199),S=n(2611),E=n(5713),C=n(7937),k=n(3668),I=n(7660),T=(0,f.U)("realtime-slice"),O=v.u.reduce((function(e,t){return Object.assign(Object.assign({},e),t.reducers)}),{}),x={clientKey:null,initialDataStatus:"none",connectTriggers:null,raisedConnectTriggers:[],lastRaisedConnectTrigger:null,lastServerDisconnectTime:0,serverStatus:"disconnected",serverConnectCount:0,serverCommitHash:null,serverProtocolVersion:null,serverTimeDelta:null,sid:null,flagReconnectAfterOtherBrowserContextsDisconnected:!1,isIntroducedToServer:!1,serverErrorCode:null,peerStatus:"disconnected",peerProtocolVersion:null,hasAcceptedCall:!1,hasAcceptedAnyCall:!1,isAwaitingDisplayshare:!1,outgoingCameraStreamId:null,outgoingCameraVideoTrackId:null,outgoingCameraAudioTrackId:null,outgoingDisplayStreamId:null,incomingCameraStreamId:null,incomingDisplayStreamId:null,isReceivingAudio:!1,isReceivingVideo:!1,isSpyingChangedTime:0,lastVisitorActiveTime:0,isVisitorAway:!1,isInIframe:(0,p.yL)(),iframeLoadCount:0,isRrwebInjectedIntoIframe:!1,isRrwebRecording:!1,isRrwebRecordingContextual:!1,feDashboardState:null,apiIdentifyArg:null,apiAlertArg:null,apiStartJourneyArg:null,startJourneyResponse:null,sbid:null,url:window.location.href,urlTitle:document.title,userAgent:navigator.userAgent,isVisitorRequestingVideo:!1,pageLoadTimestamp:(new Date).getTime(),trackVisitorTicks:!1,helpedBy:0,helpedBySid:"",helpedByName:"",helpedByTitle:"",helpedByAvatar:"",isSpying:!1,isSpyingAccepted:!1,isSpyingRejected:!1,isTakeover:!1,isTakeoverAccepted:!1,isDisplayshare:!1,isDisplayshareAccepted:!1,isRecording:!1,isRecordingAccepted:!1,isRecordingRejected:!1,isDisplaydemo:!1,isDisplaydemoAccepted:!1,isVideo:!1,isVideoAccepted:!1,orgId:0,customId:"",customMetadata:{},isVisitorVideoAllowed:!0,callStartTime:0,isPageVisible:!0,email:""},A=(0,s.hg)("realtime/apiIdentify",function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,c,u,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.dispatch,o=n.getState,i=n.rejectWithValue,o().realtime.isIntroducedToServer){e.next=5;break}return T.debug("Tried to identify visitor before connection ready"),e.abrupt("return",i(t));case 5:return c=o().realtime.sbid,u=Object.assign(Object.assign({},t),{createHubspotContact:!1}),e.next=9,(0,d.zA)(u);case 9:if(!(null==(l=e.sent)?void 0:l.sbid)||l.sbid===c){e.next=16;break}return T.info("Updating sbid from identity response (".concat(t.customId,"): ").concat(c," -> ").concat(l.sbid)),(0,p.O9)(l.sbid,o().app.org.id),r(se(l.sbid)),e.next=16,r(M());case 16:return e.t0=s.SI,e.next=19,r((0,I.lf)(u));case 19:return e.t1=e.sent,(0,e.t0)(e.t1)&&T.info("Sent identity to hubspot"),e.abrupt("return",u);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),D=(0,s.hg)("realtime/apiAlert",(function(e,t){var n=t.getState,r=t.rejectWithValue;if(!n().realtime.isIntroducedToServer)return T.debug("Tried to send api alert before connection ready"),r(e);(0,b.O1)(e)})),R=null,L=(0,s.hg)("app/apiStartJourney",function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,c,u,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.journeyId,o=t.promiseResolver,i=n.getState,s=i().realtime,c=s.sbid,u=s.clientKey,"connected"===s.serverStatus&&u&&c){e.next=6;break}return o&&(T.debug("Early call to apiStartJourney, will delay until widget connected"),R=o),e.abrupt("return",{arg:r});case 6:return l=null,e.prev=7,e.next=10,(0,k.nv)({clientKey:u,journeyId:r,visitorId:c});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),l="".concat(e.t0);case 15:return R?(T.debug("Resolving apiStartJourney promise"),R(l),R=null):o&&o(l),e.abrupt("return",{arg:null});case 17:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t,n){return e.apply(this,arguments)}}()),P=(0,s.hg)("realtime/socketStatusChanged",function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,c,l,f,v,h,m,g,y,w,_,k,I,O;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.status,o=t.disconnectCode,i=n.dispatch,s=n.getState,c="connecting"===s().realtime.serverStatus,l=s().realtime,f=l.sid,v=l.sbid,h=l.url,m=l.urlTitle,g=l.userAgent,!c||"connected"!==r){e.next=38;break}if(e.prev=5,v){e.next=8;break}throw new Error("No sbid, cannot introduce");case 8:return y={sbid:v,url:h,urlTitle:m,userAgent:g,referrer:document.referrer||"",networkStats:(0,p.mj)(),isPageVisible:!(0,p.nC)(),commitHash:(0,C.i)()},e.next=11,(0,b.S)(y);case 11:return w=e.sent,_=w.sid,k=w.initData,I=w.update,i(ce({sid:_,status:r,disconnectCode:o})),i(ge(!0)),i((0,S.Vo)(k)),e.next=20,i(U(I));case 20:return(0,E.Tm)("sb:initialized"),e.next=23,i(M());case 23:return e.next=25,(0,b.q8)();case 25:return(O=e.sent)&&(T.debug("Post introduction startEligibleJourney result: ".concat(JSON.stringify(O))),i(Ce(O)),i(fe(!!O.orgHasTimeOnPageEntryConditions))),e.next=29,(0,d.ES)();case 29:e.next=36;break;case 31:e.prev=31,e.t0=e.catch(5),T.debug("Introduction failed ".concat(e.t0)),(0,E.sA)(e.t0),Object.values(u.jc).includes(e.t0)&&(T.debug("Disconnecting socket because introduction failed (code=".concat(e.t0,")")),(0,b.lt)(e.t0));case 36:e.next=39;break;case 38:i(ce({sid:f,status:r,disconnectCode:o}));case 39:case"end":return e.stop()}}),e,null,[[5,31]])})));return function(t,n){return e.apply(this,arguments)}}()),M=(0,s.hg)("realtime/subscribeToAllChannels",function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,o=r().realtime.sbid,i=r().app.org,e.prev=3,!i.id||!o){e.next=7;break}return e.next=7,(0,b.wh)([{channelType:_.ZL["availability.org"],channelIdentifier:i.id.toString()},{channelType:_.ZL["chat.widget.visitor"],channelIdentifier:o}]);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),T.warn("Unable to subscribe to agents availability/chat: ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,n){return e.apply(this,arguments)}}()),N=(0,s.hg)("realtime/acceptDisplayshare",function(){var e=(0,o.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}return e.prev=1,e.next=4,(0,b.M)();case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),T.warn("Failed to get display stream",{error:e.t0}),(0,b.d2)(l.xz.STOP_DISPLAYSHARE),e.abrupt("return",!1);case 11:e.next=14;break;case 13:(0,b.d2)(l.xz.REJECT_DISPLAYSHARE);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),j=(0,s.hg)("realtime/requestAllowVideo",(function(e){return(0,b.nJ)({isVisitorRequestingVideo:e}),e})),W=(0,s.hg)("realtime/acceptRecording",(function(e){return(0,b.nJ)({isRecordingAccepted:e,isRecordingRejected:!e}),e})),U=(0,s.hg)("realtime/visitorUpdated",(function(e){return e})),V=(0,s.hg)("realtime/visitorScrolled",function(){var e=(0,o.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.scrollYPercent,e.next=3,(0,b.nJ)({scrollYPercent:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=(0,s.hg)("realtime/visitorTicked",function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,o=r().realtime,i=o.pageLoadTimestamp,o.trackVisitorTicks){e.next=4;break}return e.abrupt("return");case 4:return s=(new Date).getTime()-i,e.next=7,(0,b.nJ)({timeOnPage:s});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),B=(0,s.oM)({name:"realtime",initialState:x,reducers:Object.assign({clientKeyReady:function(e,t){e.clientKey=t.payload},sbidChanged:function(e,t){e.sbid=t.payload},serverStatusChanged:function(e,t){var n=t.payload,r=n.sid,o=n.status,i=n.disconnectCode;"connected"===e.serverStatus&&"disconnected"===o&&(e.lastServerDisconnectTime=Date.now()),"connected"===o&&e.serverStatus!==o&&e.serverConnectCount++,e.serverStatus=o,e.sid=r,e.serverErrorCode=i,"disconnected"!==o&&(e.serverErrorCode=null)},clearServerErrorCode:function(e){e.serverErrorCode=null},iframeLoaded:function(e){e.iframeLoadCount++},feDashboardStateUpdated:function(e,t){e.feDashboardState=t.payload},outgoingCameraStreamChanged:function(e,t){var n=t.payload;e.outgoingCameraAudioTrackId=n.outgoingCameraAudioTrackId,e.outgoingCameraVideoTrackId=n.outgoingCameraVideoTrackId,e.outgoingCameraStreamId=n.outgoingCameraStreamId},outgoingDisplayStreamChanged:function(e,t){e.outgoingDisplayStreamId=t.payload},visitorAway:function(e,t){var n=t.payload;e.isVisitorAway!==n&&(T.debug("Visitor ".concat(n?"is away from":"has returned to"," page")),e.isVisitorAway=n)},visitorActive:function(e){e.lastVisitorActiveTime=Date.now(),e.isVisitorAway=!1},setTrackVisitorTicks:function(e,t){e.trackVisitorTicks=t.payload},urlChanged:function(e,t){e.url=t.payload.url,e.urlTitle=t.payload.urlTitle,e.pageLoadTimestamp=(new Date).getTime()},shouldReconnectAfterOtherBrowserContextsDisconnected:function(e,t){e.flagReconnectAfterOtherBrowserContextsDisconnected=t.payload},startJourneyResponseChanged:function(e,t){e.startJourneyResponse=t.payload}},O),extraReducers:function(e){e.addCase(U.fulfilled,(function(e,t){var n=Object.assign(Object.assign({},e),t.payload);return e.isSpying!==t.payload.isSpying&&(n.isSpyingChangedTime=Date.now()),n})),e.addCase(A.fulfilled,(function(e,t){e.apiIdentifyArg=null,t.payload.customId&&(e.customId=t.payload.customId)})),e.addCase(A.rejected,(function(e,t){t.payload?e.apiIdentifyArg=t.payload:T.warn("Got unexpected rejection on apiIdentify",t.error)})),e.addCase(D.fulfilled,(function(e){e.apiAlertArg=null})),e.addCase(D.rejected,(function(e,t){t.payload?e.apiAlertArg=t.payload:T.warn("Got unexpected rejection on apiAlert",t.error)})),e.addCase(L.fulfilled,(function(e,t){e.apiStartJourneyArg=t.payload.arg})),e.addCase(j.fulfilled,(function(e,t){e.isVisitorRequestingVideo=t.payload})),e.addCase(N.pending,(function(e){e.isAwaitingDisplayshare=!0})),e.addCase(N.fulfilled,(function(e){e.isAwaitingDisplayshare=!1})),e.addCase(N.rejected,(function(e){e.isAwaitingDisplayshare=!1})),v.u.forEach((function(t){Object.keys(t.thunks).forEach((function(n){Object.keys(t.thunkReducers[n]||{}).forEach((function(r){e.addCase(t.thunks[n][r],t.thunkReducers[n][r])}))}))}))}}),Z=(0,c.P1)((function(e){return e.realtime.outgoingCameraStreamId}),(function(e){return e.realtime.peerStatus}),(function(e,t){return e&&"connected"===t?(0,b.Ho)():null})),H=(0,c.P1)((function(e){return e.realtime.outgoingCameraVideoTrackId}),(function(e){return e.demo.isFakingVideo}),(function(e,t){var n;return t?(null===(n=w())||void 0===n?void 0:n.getVideoTracks()[0])||null:e?(0,b.DZ)():null})),G=(0,c.P1)((function(e){return e.realtime.outgoingCameraAudioTrackId}),(function(e){return e?(0,b.iD)():null})),K=(0,c.P1)((function(e){return e.realtime.incomingCameraStreamId}),(function(e){return e.realtime.peerStatus}),(function(e){return e.demo.isDemoing}),(function(e,t,n){return n?w():e&&"connected"===t?(0,b.NM)():null})),q=(0,c.P1)((function(e){return e.realtime.incomingDisplayStreamId}),(function(e){return e.realtime.isDisplaydemo}),(function(e){return e.realtime.peerStatus}),(function(e,t,n){return e&&t&&"connected"===n?(0,b.S9)():null})),z=(0,c.P1)((function(e){return e.realtime.isRecording}),(function(e){return e.realtime.isRecordingAccepted}),(function(e){return e.app.org.optinRecording}),(function(e,t,n){return e&&(!n||n&&t)})),Y=m.S.thunks,X=Y.apiConnect,J=Y.apiDisconnect,$=g.r.thunks.fetchInitialData,Q=h.H.thunks,ee=Q.callAccepted,te=Q.callRejected,ne=Q.endCallWanted,re=Q.callEnded,oe=y.b.thunks.readyToRecord,ie=B.actions,ae=ie.clientKeyReady,se=ie.sbidChanged,ce=(ie.connectTriggersChanged,ie.serverStatusChanged),ue=ie.clearServerErrorCode,le=ie.visitorAway,de=ie.visitorActive,fe=ie.setTrackVisitorTicks,pe=ie.iframeLoaded,ve=ie.feDashboardStateUpdated,he=ie.outgoingCameraStreamChanged,me=ie.outgoingDisplayStreamChanged,ge=ie.introducedToServer,ye=ie.raiseConnectTrigger,be=(ie.rrwebInjectedIntoIframe,ie.peerStatusUpdated),we=ie.incomingCameraStreamChanged,_e=ie.urlChanged,Se=ie.incomingDisplayStreamChanged,Ee=ie.shouldReconnectAfterOtherBrowserContextsDisconnected,Ce=ie.startJourneyResponseChanged;const ke=B.reducer},3078:(e,t,n)=>{"use strict";n.d(t,{Q:()=>f,Z:()=>p});var r=n(8429),o=n(4890),i=n(2611),a=n(5164),s=n(7736),c=n(9513),u=n(4578),l=n(18),d=(0,o.UY)({app:i.ZP,realtime:a.ZP,demo:s.ZP,chat:c.ZP,conversation:u.ZP,helpCenter:l.ZP}),f=r.v9;const p=d},7887:(e,t,n)=>{"use strict";n.d(t,{Dg:()=>s,EI:()=>f,JO:()=>l,QU:()=>c,aE:()=>a,pU:()=>d,xX:()=>u});var r=n(2222),o=n(8998),i=1e3*(parseInt(void 0,10)||30),a=(0,r.P1)((function(e){return e.app.org.widgetSettings.mode}),(function(e){return e.app.options.mode}),(function(e,t){return"api"===e?t||o.W.mode:e})),s=(0,r.P1)((function(e){var t=e.realtime;return{id:t.helpedBy,name:t.helpedByName,title:t.helpedByTitle,avatar:t.helpedByAvatar,sid:t.helpedBySid}}),(function(e){return e})),c=(0,r.P1)((function(e){return e.app.org.integrations.acuity}),(function(e){return e.app.org.integrations.calendly}),(function(e){return e.app.org.integrations.chilipiper}),(function(e,t,n){return e.enabled||t.enabled||n.enabled})),u=((0,r.P1)((function(e){return e.app.org}),(function(e){return e.app.calendlyData}),(function(e,t){var n=e.integrations.calendly.defaultEventTypeUrl||"",r=!!(null==t?void 0:t.eventTypes.find((function(e){return e.schedulingUrl===n}))),o=1===(null==t?void 0:t.eventTypes.length)?t.eventTypes[0].schedulingUrl:"";return r?n:o})),(0,r.P1)((function(e){return e.app.org}),(function(e){return e.app.calendlyData}),(function(e,t){var n=e.integrations.calendly.defaultEventTypeSlug||"",r=!!(null==t?void 0:t.eventTypes.find((function(e){return e.slug===n}))),o=1===(null==t?void 0:t.eventTypes.length)?t.eventTypes[0].slug:"",i=r?n:o;return i?"https://calendly.com/".concat(null==t?void 0:t.userSlug,"/").concat(i):""})),(0,r.P1)((function(e){return e.conversation.activeConversationId}),(function(e){return e.conversation.conversations}),(function(e,t){return e&&t.find((function(t){return t.id===e}))||null}))),l=(0,r.P1)((function(e){return e.app.allAgents}),(function(e){return e.filter((function(e){return e.available}))})),d=(0,r.P1)((function(e){return e.app.org.widgetSettings.requireEmailOnChat}),(function(e){return e.app.org.widgetSettings.requireEmailOnChatExcludePersonal}),(function(e){return e.realtime.email}),(function(e){return e.realtime.isVideo}),l,u,(function(e,t,n,r,o,i){var a,s="always"===e||"away"===e&&!o.length,c=!(null==i?void 0:i.messages)||!((null===(a=null==i?void 0:i.messages)||void 0===a?void 0:a.items)||[]).length;return{isEmailNeeded:s&&c&&!n&&!r,storedEmail:n,excludePersonal:t}})),f=(0,r.P1)((function(e){var t;return null===(t=e.conversation.activeInboundCallState)||void 0===t?void 0:t.waitTimeSeconds}),(function(e){var t;return null===(t=e.conversation.activeInboundCallState)||void 0===t?void 0:t.dialTime}),(function(e,t){return e&&t?Math.round(1e3*e):i}))},7220:(e,t,n)=>{"use strict";n.d(t,{TL:()=>s,ZP:()=>c});var r=n(6403),o=n(8429),i=n(3078),a=(0,r.xC)({reducer:i.Z,middleware:function(e){return e()},devTools:!1}),s=function(){return(0,o.I0)()};const c=a},1892:(e,t,n)=>{"use strict";n.d(t,{M:()=>C,f:()=>S});var r=n(9199),o=n(7220),i=n(9046),a=n(32),s=n(2611),c=n(885),u=n(2982),l=n(5671),d=n(3144),f=n(136),p=n(2963),v=n(1120);var h=function(e){(0,f.Z)(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,v.Z)(t);if(n){var o=(0,v.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,p.Z)(this,e)});function o(){return(0,l.Z)(this,o),r.apply(this,arguments)}return(0,d.Z)(o,[{key:"purge",value:function(){var e=this;(0,u.Z)(this.entries()).map((function(e){var t=(0,c.Z)(e,2),n=t[0],r=t[1];return!!o.isStale(r)&&n})).filter((function(e){return!!e})).forEach((function(t){return t&&e.delete(t)}))}},{key:"track",value:function(){var e=o.makeKey.apply(o,arguments);if(e){var t=this.get(e);t?(t.time=Date.now(),t.count=t.count+1):this.set(e,{time:Date.now(),count:1})}}},{key:"untrack",value:function(){var e=o.makeKey.apply(o,arguments),t=this.get(e);return t&&(t.count=t.count-1,this.purge()),!!t}}],[{key:"isStale",value:function(e){return 0===e.count||Date.now()-e.time>o.EXPIRE_AFTER}},{key:"makeKey",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return String(t)}}]),o}((0,n(2407).Z)(Map));h.EXPIRE_AFTER=5e3;var m=new h,g=new h,y=["mouseup","mousedown","click","input","change","focusin","focus","blur","focusin","focusout"],b=-2,w=-2,_=0,S=function(e){if(o.ZP.getState().app.screenTakeoverOn)if("mousemove"!==e.type){var t=(0,i.zb)();if("scroll"!==e.type)if("input"!==e.type)if(y.includes(e.type)){var n=e.selector,r=e.type,c=e.bubbles,u=e.cancelable,l=e.detail,d=e.screenX,f=e.screenY,p=e.clientX,v=e.clientY;a.Z.debug("Takeover event received [".concat(r,"] [").concat(n,"]").concat("number"==typeof l?" detail="+String(l):""));var h=t.querySelector(n);if(h){p&&v&&g.track(p,v);var S=h,C=new(E(r))(r,{bubbles:c,cancelable:u,detail:l,screenY:f,screenX:d,clientX:p,clientY:v});S.dispatchEvent(C)}else a.Z.warn("Could not find takeover event target [".concat(r,"] [").concat(n,"]"))}else a.Z.warn("Takeover event unhandled [".concat(e.type,"]"));else{var I=e.selector,T=e.value,O=e.bubbles,x=e.cancelable,A=e.checked;if("boolean"==typeof A)return void a.Z.debug("Input checkbox event ignored [".concat(I,"] [").concat(A?"checked":"unchecked","]"));if("string"==typeof T){a.Z.debug("Input event received ".concat(I,": ").concat(T));var D=t.querySelector(I);if(D){m.track(T);var R=new Event("input",{bubbles:O,cancelable:x});k(D,T,R)}else a.Z.warn("Could not find input element ".concat(I," to place text ").concat(T))}}else{var L=e.selector,P=e.scrollTop,M=e.scrollLeft,N="document"===L?t.scrollingElement:t.querySelector(L);if(N&&"number"==typeof P&&"number"==typeof M){var j=N.scrollWidth-N.clientWidth,W=N.scrollHeight-N.clientHeight,U=M>j?j:M,V=P>W?W:P;w=U,b=V,_=Date.now(),N.scrollLeft=U,N.scrollTop=V}else a.Z.warn('Could not find scroll-element "'.concat(L,'"'))}}else{var F=e.clientX,B=e.clientY;"number"==typeof F&&"number"==typeof B&&o.ZP.dispatch((0,s.Gs)({top:B,left:F}))}},E=function(e){return["mousedown","mouseup","click"].includes(e)?MouseEvent:["focus","blur","focusin","focusout"].includes(e)?FocusEvent:["change"].includes(e)?Event:"input"===e?InputEvent:UIEvent},C=function(e){var t=function(e,t){return Math.abs(e-t)<=1};if(e.type===r.tw.IncrementalSnapshot){if(e.data.source===r.yh.Scroll){var n=t(e.data.y,b),o=t(e.data.x,w),i=Date.now()-_<300;if(n&&o)return w=-2,b=-2,!0;if(i)return!0}if(e.data.source===r.yh.Input&&m.untrack(e.data.text))return!0;if(e.data.source===r.yh.MouseInteraction&&g.untrack(e.data.x,e.data.y))return!0}return!1},k=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,o=e.ownerDocument.defaultView,i=[null==o?void 0:o.HTMLInputElement,null==o?void 0:o.HTMLSelectElement,null==o?void 0:o.HTMLTextAreaElement],a=Object.getPrototypeOf(e);if(i.indexOf(a.constructor)>-1&&Object){var s=null===(t=Object.getOwnPropertyDescriptor(a,"value"))||void 0===t?void 0:t.set;s&&s.call(e,n),e.dispatchEvent(r)}}},7109:(e,t,n)=>{"use strict";n.d(t,{AP:()=>a,EL:()=>u.E,Hf:()=>r,L0:()=>i,Oi:()=>u.O,QO:()=>c.QO,_y:()=>s._y,r4:()=>c.r4,xz:()=>o});var r,o,i,a,s=n(1151),c=n(2024),u=n(8931);!function(e){e.NEED_HELP="NEED_HELP",e.DIALING="DIALING",e.ANSWER_CALL="ANSWER_CALL",e.ACTIVE_CALL="ACTIVE_CALL",e.CALL_ENDED="CALL_ENDED",e.BOOK_MEETING="BOOK_MEETING",e.MEETING_CALENDAR="MEETING_CALENDAR",e.PROACTIVE_VIDEO="PROACTIVE_VIDEO"}(r||(r={})),function(e){e.STREAM_EVENTS="STREAM_EVENTS",e.START_VIDEO="START_VIDEO",e.STOP_VIDEO="STOP_VIDEO",e.STOP_VIDEO_DECLINE="STOP_VIDEO_DECLINE_CALL",e.STOP_VIDEO_MISSED="STOP_VIDEO_MISSED_CALL",e.STOP_TAKEOVER="STOP_SCREENSHARE",e.STOP_DISPLAYSHARE="STOP_DISPLAYSHARE",e.RESTART="RESTART",e.REJECT_CALL="REJECT_CALL",e.REJECT_TAKEOVER="REJECT_TAKEOVER",e.REJECT_DISPLAYSHARE="REJECT_DISPLAYSHARE"}(o||(o={})),function(e){e.event="event",e.trigger="trigger",e.widgetState="widgetState",e.buildInformation="buildInformation"}(i||(i={})),function(e){e.immediate="immediate",e.skipped="skipped",e.watched="watched"}(a||(a={}))},6242:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getBadBrowserReason:()=>y,isBrowserChrome:()=>p,isBrowserEdge:()=>v,isBrowserFirefox:()=>d,isBrowserIE:()=>h,isBrowserOpera:()=>l,isBrowserSafari:()=>f,isMobileDevice:()=>m,osName:()=>c,osVersion:()=>u});var r=n(885),o=n(4942),i=n(32);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=function(){var e,t,n,i,a=function(){var e=navigator.appVersion,t=navigator.userAgent,n="-";[{s:"Chrome OS",r:/CrOS/},{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}].forEach((function(e){e.r.test(t)&&(n=e.s)}));var r="-";if(/Windows/.test(n)){if(/Windows (.*)/.test(n)){var o=/Windows (.*)/.exec(n);r=o&&o.length>1?o[1]:r}n="Windows"}switch(n){case"Mac OS X":if(/Mac OS X (10[._\d]+)/.test(t)){var i=/Mac OS X (10[._\d]+)/.exec(t);r=i&&i.length>1?i[1]:r}break;case"Android":if(/Android ([._\d]+)/.test(t)){var a=/Android ([._\d]+)/.exec(t);r=a&&a.length>1?a[1]:r}break;case"iOS":if(/OS (\d+)_(\d+)_?(\d+)?/.test(t)){var s=/OS (\d+)_(\d+)_?(\d+)?/.exec(e);s&&s.length>3&&(r="".concat(s[1],".").concat(s[2],".").concat(s[3]||0))}}return{osName:n,osVersion:r}}(),s=(e={},(0,o.Z)(e,"Android",!!navigator.userAgent.match(/Android/i)),(0,o.Z)(e,"BlackBerry",!!navigator.userAgent.match(/BlackBerry|BB10/i)),(0,o.Z)(e,"iOS",!!navigator.userAgent.match(/iPhone|iPad|iPod/i)),(0,o.Z)(e,"Opera Mini",!!navigator.userAgent.match(/Opera Mini/i)),(0,o.Z)(e,"Windows",!!navigator.userAgent.match(/IEMobile/i)),t=e,n=Object.values(t).reduce((function(e,t){return e||t}),!1),{osName:Object.entries(t).reduce((function(e,t){var n=(0,r.Z)(t,2),o=n[0];return n[1]&&o||e}),"Unknown OS"),isAny:n}),c="Unknown OS",u="Unknown OS Version";return a&&a.osName&&"-"!=a.osName?(c=a.osName,u=a.osVersion):s.isAny&&"Android"==(c=s.osName)&&(u=!!(i=navigator.userAgent.toLowerCase().match(/android\s([0-9.]*)/))&&i[1]||u),{osName:c,osVersion:u}}(),c=s.osName,u=s.osVersion,l=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,d=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),f=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),p=!!window.chrome&&!l,v=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveOrOpenBlob&&!navigator.msSaveBlob),h="undefined"!=typeof document&&!!document.documentMode&&!v,m=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(navigator.userAgent||""),g=["HeadlessChrome"];function y(){if(function(){var e="_sbbrowseroverride_",t=document.location.search.substring(1),n=new URLSearchParams(t),r=n.get("sbbrowseroverride");if(r&&(["0","off","false"].includes(r)?localStorage.removeItem(e):localStorage.setItem(e,"true")),r){n.delete("sbbrowseroverride");var o=n.toString(),i="".concat(window.location.pathname).concat(o?"?".concat(o):"");history.replaceState(null,"",i)}return!!localStorage.getItem(e)}())return i.Z.info("Overriding bad browser check, widget will show no matter what!"),"";if(!("WebSocket"in window)||2!==window.WebSocket.CLOSING)return"websocket support required";if(e=!1,["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach((function(t){e||t in window&&(e=!0)})),!e)return"WebRTC support required";var e,t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}(g);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(navigator.userAgent.includes(r))return"User agent contains disqualifier '".concat(r,"'")}}catch(e){n.e(e)}finally{n.f()}}},864:(e,t,n)=>{"use strict";n.d(t,{B7:()=>F,CY:()=>W,F$:()=>p,I_:()=>T,Id:()=>X,J:()=>w,KU:()=>g,Lc:()=>z,ON:()=>C,TD:()=>V,WD:()=>I,XH:()=>h,XT:()=>m,Xg:()=>P,Yg:()=>J,Yh:()=>U,Yt:()=>_,_u:()=>H,e$:()=>k,fE:()=>S,ir:()=>b,kY:()=>N,nv:()=>Y,rP:()=>Z});var r=n(885),o=n(5776),i=n(6010),a=n(9199),s=n(2212);function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,d=/<br\s?\/?>/g,f=/@\((\d+)\)/,p=function(e,t){var n=(0,s.fr)(e);if(!n)return o.ZP.createElement(o.ZP.Fragment,null);var a=n.split(d).map((function(e,n){return o.ZP.createElement(o.ZP.Fragment,{key:n},0!==n&&o.ZP.createElement("br",null),function(e,t,n){return e.split(" ").map((function(e,n){if(l.test(e))return o.ZP.createElement(o.ZP.Fragment,{key:n},o.ZP.createElement("a",{href:e,target:"_blank",rel:"noreferrer"},e)," ");if(f.test(e)){var a=e.match(f)||[],s=(0,r.Z)(a,2),c=(s[0],s[1]),u=t.find((function(e){return e.id===parseInt(c,10)}));return u?o.ZP.createElement(o.ZP.Fragment,{key:n},o.ZP.createElement("span",{className:(0,i.Z)("mention")},"@",u.name)," "):" "}return o.ZP.createElement(o.ZP.Fragment,{key:n},e," ")}))}(e.trim(),t))}));return o.ZP.createElement(o.ZP.Fragment,null,a)},v=function(e,t){return e.content.blocks.find((function(e){return e.type===t}))},h=function(e){var t=v(e,a._y.CHOICES);if(t&&O(t))return t},m=function(e){var t=v(e,a._y.VIDEO);if(t&&x(t))return t},g=function(e){var t=y(e);if(t&&A(t))return t},y=function(e){var t=v(e,a._y.JOURNEY_EVENT);if(t&&D(t))return t},b=function(e){var t=v(e,a._y.TEXT);if(t&&R(t))return t},w=function(e){var t=v(e,a._y.SCHEDULE);if(t&&L(t))return t},_=function(e){var t=v(e,a._y.EMAIL_INPUT);if(t&&M(t))return t},S=function(e){var t=v(e,a._y.GENERAL_EVENT);if(t&&E(t))return t},E=function(e){return e.type===a._y.GENERAL_EVENT},C=function(e){return E(e)&&e.generalEventType===a.Hd.AGENT_CALL},k=function(e){return E(e)&&e.generalEventType===a.Hd.VISITOR_MISSED_AGENT_CALL},I=function(e){return E(e)&&e.generalEventType===a.Hd.VISITOR_CALLBACK_AGENT},T=function(e){return E(e)&&e.generalEventType===a.Hd.AGENT_TRANSFER},O=function(e){return e.type===a._y.CHOICES},x=function(e){return e.type===a._y.VIDEO},A=function(e){return D(e)&&e.journeyEventType===a.gi.INBOUND_CALL},D=function(e){return e.type===a._y.JOURNEY_EVENT},R=function(e){return e.type===a._y.TEXT},L=function(e){return e.type===a._y.SCHEDULE},P=function(e){return L(e)&&"journeyStepId"in e},M=function(e){return e.type===a._y.EMAIL_INPUT},N=function(e){return M(e)&&"journeyStepId"in e},j=function(e,t){var n=e.content.blocks.find((function(e){return e.type===t}));return"system"===e.sourceType&&!!n},W=function(e){return j(e,a._y.FEEDBACK_INPUT)},U=function(e){return!W(e)&&!function(e){return j(e,a._y.EMAIL_INPUT)}(e)&&j(e,a._y.TEXT)},V=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"system",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6?arguments[6]:void 0,c={feedback:[{type:a._y.TEXT,text:""},{type:a._y.FEEDBACK_INPUT,feedbackQuestions:i,feedbackAnswers:{}}],typing:[{type:a._y.TYPING}]},u={id:n,conversationId:t,from:"",visitorId:e,agent:s||{id:0,name:"",title:""},timestamp:Date.now(),text:"",content:{blocks:c[r]},sourceType:o,dateRead:null};return u},F=function(e,t,n){var r,o,i=!1;return e.assigneeId&&(o=t.find((function(t){return t.id===e.assigneeId}))),!o&&e.lastAgentId&&(o=t.find((function(t){return t.id===e.lastAgentId}))),o||((null===(r=e.messages)||void 0===r?void 0:r.items.find((function(e){return"bot"===e.sourceType})))&&(i=!0),o={id:0,name:n,title:""}),{agent:o,bot:i}},B=function(e){return e.messages&&e.messages.items.length?e.messages.items[0]:null},Z=function(e){for(var t=[],n=0,r=Object.values(e);n<r.length;n++){var o=r[n],i=G(o);i&&t.push(i)}return 0===t.length?null:t.reduce((function(e,t){return e.timestamp>t.timestamp?e:t}))},H=function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=[],o=0,i=Object.values(e);o<i.length;o++){var a=i[o],s=K(a,t);s&&n.push(s);var c=q(a);c&&r.push(c)}return n.length>0?n.reduce((function(e,t){return e.timestamp>t.timestamp?e:t})):r.length>0?r.reduce((function(e,t){return e.timestamp>t.timestamp?e:t})):null},G=function(e){if(!e.isOpen)return null;var t=B(e);return t&&"agent"===t.sourceType&&!t.dateRead?t:null},K=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t&&!e.isOpen)return null;var n=B(e);return n&&"bot"===n.sourceType&&!n.dateRead?n:null},q=function(e){if(!e.isOpen)return null;var t=B(e);if(!t)return null;var n=t.content.blocks.find(R);return"bot"===t.sourceType&&(null==n?void 0:n.journeyOptionExpandPolicy)===a.w_.ALWAYS&&(null==n?void 0:n.journeyStepStatus)===a.Gj.IN_PROGRESS?t:null},z=function(e){var t="bot"===e.sourceType,n=b(e)||m(e);return t&&n&&n.journeyOptionInitialDisplayMode===a.$N.SKELETON&&(n.type===a._y.TEXT&&!!n.text||!0)},Y=function(e){var t="bot"===e.sourceType,n=e.content.blocks.find(R);return t&&n&&n.journeyOptionInitialDisplayMode===a.$N.CHAT&&!!n.text},X=function(e){return e.filter((function(e){return!e.dateEnded&&e.messages&&0===e.messages.items.length}))},J=function(e){if(e.messages){var t,n=c(e.messages.items);try{for(n.s();!(t=n.n()).done;){var r,o=c(t.value.content.blocks);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.journeyStepId)return{journeyStepId:i.journeyStepId}}}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}}return null}},3593:(e,t,n)=>{"use strict";n.d(t,{Ek:()=>u,Hb:()=>a,Q4:()=>i,YR:()=>o,ex:()=>c,gO:()=>l,uC:()=>r,uK:()=>s});var r="https://uploads.servicebell.com/video/woman-3-700.jpg",o="https://uploads.servicebell.com/video/woman-3-400.mp4",i="servicebell--live-playback-hide",a="svb-iframe-wrap",s="svb-iframe-container",c="svb-iframe-block-capture",u="WIDGETROOT",l=540},2212:(e,t,n)=>{"use strict";n.d(t,{E_:()=>o,Tu:()=>s,fr:()=>c});var r=n(5776),o=function(){return{IDLE_HELP_TEXT:"Talk to a<br />live agent",IDLE_HELP_TEXT_FOCUSED:"Start a<br />call now",IDLE_BUSY_TEXT:"Book a<br />meeting",IDLE_BUSY_TEXT_FOCUSED:"We're busy<br />right now",IDLE_AWAY_TEXT:"Book a<br />meeting",IDLE_AWAY_TEXT_FOCUSED:"We're gone<br />right now",ANSWER_CALL:"I'd like to join your session and speak with you",NEED_HELP_TITLE:"Chat with us",NEED_HELP_TEXT:"Agents are standing by to help you.",NEED_HELP_TITLE_OFFLINE:"We're offline",NEED_HELP_TEXT_OFFLINE:"Our agents are away, but send us a message and we'll get back to you.",NEED_HELP_AWAY_TEXT:"Our agents are away, but send us a message and we'll get back to you.",NEED_HELP_AWAY_TITLE:"We're offline",NEED_HELP_BUSY_TEXT:"Our agents are away, but send us a message and we'll get back to you.",NEED_HELP_BUSY_TITLE:"We're offline",NEED_HELP_CTA:"Start a call",DIALING_TITLE:"We're on<br />our way",RECORDING_OPTIN_TITLE:"Allow agent to record?",RECORDING_OPTIN_TEXT:"An agent is requesting permission to begin recording."}},i=/<br\s?\/?>/,a=/(\r\n|\r|\n)/g,s=function(e){var t=e.split(i).map((function(e,t){return r.ZP.createElement(r.ZP.Fragment,{key:t},0!==t&&r.ZP.createElement("br",null),e.trim())}));return r.ZP.createElement(r.ZP.Fragment,null,t)},c=function(e){return e?e.replace(a,"<br />"):e}},7660:(e,t,n)=>{"use strict";n.d(t,{lf:()=>w,mG:()=>g,pt:()=>b});var r=n(885),o=n(5861),i=n(4687),a=n.n(i),s=n(2222),c=n(6403),u=n(2795),l=n(5592),d=n(5776),f=function(e){return"//js.hs-scripts.com/".concat(e,".js")},p=(0,u.U)("hubspot-api-utils"),v=!1,h=function(){var e=(0,o.Z)(a().mark((function e(t){var n,r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=2;break}return e.abrupt("return");case 2:return n=f(t),(r=document.createElement("script")).src=n,r.async=!0,r.type="text/javascript",document.body.appendChild(r),i=new Promise((function(e){return o=e})),r.addEventListener("load",(function(){document.body.removeChild(r),v=!0,o(!0)})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){if(!v)throw new Error("Hubspot script not loaded, cannot send identity");p.debug("Sending email ".concat(e," via identify")),window._hsq=window._hsq||[],window._hsq.push(["identify",{email:e}])},g=function(e,t){var n=y(t),r=t.realtime.email,o=!r,i=r&&e&&r!==e;return n.portalId&&(o||i)},y=(0,s.P1)((function(e){return e.app.org.integrations.hubspot}),(function(e){return e})),b=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,d.eJ)(!1),n=(0,r.Z)(t,2),i=n[0],s=n[1],c=(0,l.Q)(y),u=(0,l.Q)((function(e){return e.realtime})),f=u.email,v=u.sbid;(0,d.d4)((function(){(0,o.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:if(!c.enabled){t.next=10;break}if(c.portalId){t.next=6;break}return p.warn("Unable to load script w/o portal id."),t.abrupt("return");case 6:return t.next=8,h(c.portalId);case 8:p.debug("Script loaded"),s(!0);case 10:case"end":return t.stop()}}),t)})))()}),[c.enabled,c.portalId,e]);var g=(0,d.I4)((function(e){if(!i)throw new Error("Cannot identify because script not loaded");e!==f?(f&&e!==f&&p.info("New email identity for sbid=".concat(v,": old=").concat(f," -> new=").concat(e)),m(e)):p.info("Email already set, not sending")}),[i,f,v]);return{scriptLoaded:i,identifyWithEmail:g}},w=(0,c.hg)("realtime/hubspotSendEmail",function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,c,u,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,o=y(r()),i="customMetadata"in t?t.customMetadata.email:t.email,s="state"in t?t.state:r(),!i||!g(i,s)){e.next=11;break}return c=s.realtime,u=c.email,l=c.sbid,u&&i!==u&&p.info("New email identity for sbid=".concat(l,": old=").concat(u," -> new=").concat(i)),e.next=9,h(o.portalId);case 9:return m(i),e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},9046:(e,t,n)=>{"use strict";n.d(t,{$Q:()=>v,D9:()=>S,GD:()=>T,KS:()=>D,Mf:()=>I,O9:()=>m,fI:()=>_,gX:()=>C,gm:()=>A,jU:()=>b,lp:()=>h,mj:()=>O,nC:()=>x,oU:()=>R,so:()=>k,ve:()=>d,yL:()=>y,yY:()=>E,zb:()=>w});var r=n(885),o=n(5861),i=n(4687),a=n.n(i),s=n(5776),c=n(32),u=n(3593),l=n(7838);function d(e,t){return new Promise((function(n,r){var o=t||document,i=o.createElement("script");i.src=e,i.onload=n,i.onerror=r,o.head.appendChild(i)}))}var f=function(e,t){for(var n="",r=!1,o=window.location.hostname.split("."),i=o.length-2;i>=0;i--){var a=o.slice(i,o.length).join(".");if(n="".concat(p(t),"=").concat(e,"; path=/; domain=").concat(a),document.cookie=n,document.cookie.includes(e)){r=!0;break}c.Z.debug("Failed to save cookie with domain ".concat(a))}r||(n="".concat(p(t),"=").concat(e,"; path=/"),document.cookie=n),c.Z.debug("Saved cookie ",n)},p=function(e){return"servicebelltoken_".concat(e)};function v(e){var t=h(e);return t||(c.Z.info("Could not find org namespaced sbid cookie, will look for legacy version"),(t=g("servicebelltoken"))&&(c.Z.info("Migrate legacy sbid cookie to namespaced"),f(t,e))),t&&"undefined"!==t&&"null"!==t?c.Z.debug("Found cookie ".concat(t," for org ").concat(e),{sbid:t,orgId:e}):(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),f(t,e)),t}function h(e){return g(p(e))}function m(e,t){e&&"undefined"!==e&&"null"!==e?h(t)?f(e,t):c.Z.warn("Attempted to update sbid cookie with ".concat(e," before one was set, doing nothing.")):c.Z.warn("Attempted to update sbid cookie with invalid sbid '".concat(e,"', doing nothing."))}function g(e){var t=(document.cookie||"").match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t&&t.pop()||""}function y(){return window.frameElement&&window.top&&"svb-top-body"===window.top.document.body.id}function b(){var e=document.getElementById(u.uK);return e?e.contentWindow:null}function w(){var e=document.getElementById(u.uK);return e?e.contentWindow.document:document}var _=function(e){try{var t=new URL(e),n=t&&["http:","https:"].includes(t.protocol)&&t.host,r=n&&t.host===window.location.host;return n&&!r}catch(e){return!1}};function S(e){var t=(0,s.sO)(e);return(0,s.d4)((function(){t.current=e})),t.current}var E=function(){var e=(0,o.Z)(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l);case 2:return t=e.sent,e.next=5,t.text();case 5:n=e.sent,(r=document.createElement("div")).style.width="0",r.style.height="0",r.style.display="none",r.innerHTML=n,document.body.insertBefore(r,document.body.childNodes[0]);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){return"complete"===document.readyState||"interactive"===document.readyState?Promise.resolve():new Promise((function(e){document.addEventListener("DOMContentLoaded",e)}))},k=function(){var e="sb-root-".concat(Date.now()),t=document.createElement("div");return t.setAttribute("id",e),t},I=function(e){return new Promise((function(t){return e.duration?e.duration&&Number.isFinite(e.duration)?t(e.duration):(e.addEventListener("timeupdate",(function n(){t(e.duration),e.removeEventListener("timeupdate",n)})),void(e.currentTime=1e101)):t(0)}))},T=function(e){var t=window,n=t.__sbwexpose__||{};t.__sbwexpose__=Object.assign(Object.assign({},n),e)},O=function(){if(navigator.connection)return{type:navigator.connection.type,effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,downlinkMax:navigator.connection.downlinkMax,rtt:navigator.connection.rtt};c.Z.debug("Browser does not support navigator.connection")},x=function(){return document.hidden||"hidden"===document.visibilityState},A=function(e){var t=new Audio("https://assets.servicebell.com/bell-ding.mp3");t.volume=.1,e?setTimeout((function(){t.play().catch()}),e):t.play().catch()},D=function(e){var t=new Audio("https://uploads.servicebell.com/assets/message-notification.wav");t.volume=.1,e?setTimeout((function(){t.play().catch()}),e):t.play().catch()},R=function(e,t){var n=e.split(":").map((function(e){return parseInt(e)})),o=(0,r.Z)(n,2),i=o[0],a=o[1],s=t.split(":").map((function(e){return parseInt(e)})),c=(0,r.Z)(s,2),u=i/a,l=c[0]/c[1],d=Math.min(u,l),f=Math.max(u,l);return function(e,t){var n=e/t;if(n<f&&n>d)return{width:e,height:t,widthDiff:0,heightDiff:0};if(e>t){var r=f*t;return{width:r,height:t,widthDiff:e-r,heightDiff:0}}var o=e/d;return{width:e,height:o,widthDiff:0,heightDiff:t-o}}}},8891:(e,t,n)=>{"use strict";n.d(t,{A2:()=>c,rS:()=>s});const r=new RegExp("[^#a-f\\d]","gi"),o=new RegExp("^#?[a-f\\d]{3}[a-f\\d]?$|^#?[a-f\\d]{6}([a-f\\d]{2})?$","i");function i(e,t={}){if("string"!=typeof e||r.test(e)||!o.test(e))throw new TypeError("Expected a valid hex string");let n=1;8===(e=e.replace(/^#/,"")).length&&(n=Number.parseInt(e.slice(6,8),16)/255,e=e.slice(0,6)),4===e.length&&(n=Number.parseInt(e.slice(3,4).repeat(2),16)/255,e=e.slice(0,3)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const i=Number.parseInt(e,16),a=i>>16,s=i>>8&255,c=255&i,u="number"==typeof t.alpha?t.alpha:n;return"array"===t.format?[a,s,c,u]:"css"===t.format?`rgb(${a} ${s} ${c}${1===u?"":` / ${Number((100*u).toFixed(2))}%`})`:{red:a,green:s,blue:c,alpha:u}}var a=n(32),s={colors:{colorStart:"#e77709",colorStartRgb:"231, 119, 9",colorStartRgbInverted:"30, 39, 73",colorStop:"#d99e00",colorStopRgb:"217, 158, 0",colorGradient:"linear-gradient(38.12deg, #e77709 4.57%, #d99e00 102.26%)",bgColor:"#1e2749",bgColorRgb:"30, 39, 73",bgColorRgbInverted:"255, 255, 255"}},c=function(e,t,n){var r=d(e||"".concat(s.colors.colorStart," ").concat(s.colors.colorStop),t||s.colors.bgColor),o=document.getElementById(n);if(!o)throw new Error("Tried to set theme style, but no Element found for rootId");r&&f(r,o)},u=function(e){return i(e,{format:"array"}).slice(0,3).join(", ")},l=function(e){var t=i(e);return.2126*t.red+.7151*t.green+.0721*t.blue>140},d=function(e,t){if(/^(#(?:[0-9a-fA-F]{3}){1,2}(\s|$)){1,2}/.test(e)){var n=e.split(" ");s.colors.colorGradient=1===n.length?n[0]:"linear-gradient(38.12deg, ".concat(n[0]," 4.57%, ").concat(n[1]," 102.26%)"),s.colors.colorStart=n.length?n[0]:s.colors.colorStart,s.colors.colorStartRgb=u(s.colors.colorStart),s.colors.colorStartRgbInverted=l(s.colors.colorStart)?"30, 39, 73":"255, 255, 255",s.colors.colorStop=2===n.length?n[1]:s.colors.colorStart,s.colors.colorStopRgb=u(s.colors.colorStop)}else a.Z.warn('OrgSetting.color is invalid, will ignore, was "'.concat(e,'"'));return/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(t)?(s.colors.bgColor=t,s.colors.bgColorRgb=u(t),s.colors.bgColorRgbInverted=l(t)?"0, 0, 0":"255, 255, 255"):a.Z.warn('OrgSetting.bgColor is invalid, will ignore, was "'.concat(t,'"')),"\n    #sbstyle {\n      --custom-color-start: ".concat(s.colors.colorStart,";\n      --custom-color-start-rgb: ").concat(s.colors.colorStartRgb,";\n      --custom-color-start-rgb-inverted: ").concat(s.colors.colorStartRgbInverted,";\n      --custom-color-stop: ").concat(s.colors.colorStop,";\n      --custom-color-stop-rgb: ").concat(s.colors.colorStopRgb,";\n      --custom-color-gradient: ").concat(s.colors.colorGradient,";\n      --custom-bgColor: ").concat(s.colors.bgColor,";\n      --custom-bgColor-rgb: ").concat(s.colors.bgColorRgb,";\n      --custom-bgColor-rgb-inverted: ").concat(s.colors.bgColorRgbInverted,";\n    }\n  ")},f=function(e,t){var n=document.createElement("style");n.textContent=e,t.prepend(n)}},5713:(e,t,n)=>{"use strict";n.d(t,{BR:()=>v,Tm:()=>d,ce:()=>p,lg:()=>f,sA:()=>h});var r=n(3144),o=n(5671),i=n(136),a=n(2963),s=n(1120),c=n(2407),u=n(9046);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var o=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}function d(e,t){var n=new CustomEvent(e,{detail:t}),r=(0,u.jU)();r?r.dispatchEvent(n):window.dispatchEvent(n)}var f=function(e){(0,i.Z)(n,e);var t=l(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n)}((0,c.Z)(Error)),p=function(e){(0,i.Z)(n,e);var t=l(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n)}((0,c.Z)(Error)),v=function(e){(0,i.Z)(n,e);var t=l(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n)}((0,c.Z)(Error));function h(e){d("sb:error",{error:e})}},1950:(e,t,n)=>{"use strict";n.d(t,{T:()=>l,e:()=>d});var r=n(9046),o=n(32),i=n(7220),a=n(7109),s=n(5164),c=window,u=0;function l(e){var t=c.Intercom;if(t){var n=(0,r.lp)(e);o.Z.debug("Added service_bell_id to intercom"),t("update",{service_bell_id:n}),t("onShow",(function(){i.ZP.dispatch((0,s.m7)(a.r4.INTERCOM))}))}else++u<25&&setTimeout((function(){return l(e)}),200)}function d(){var e=c.Intercom;e&&e("hide")}},8998:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});var r={expanded:!1,blockClass:"sb-block",mode:"retrigger",answer:"ask"}},6010:(e,t,n)=>{"use strict";function r(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function o(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(o&&(o+=" "),o+=t);return o}n.d(t,{Z:()=>o})},7187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}h(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&h(e,"error",t,{once:!0})}(e,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var o,i,a,u;if(s(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=c(e))>0&&a.length>o&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=l.bind(r);return o.listener=n,r.wrapFn=o,o}function f(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):v(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function h(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=v(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,o,i,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},8679:(e,t,n)=>{"use strict";var r=n(9864),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return r.isMemo(e)?a:s[e.$$typeof]||o}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,v=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(v){var o=p(n);o&&o!==v&&e(t,o,r)}var a=l(n);d&&(a=a.concat(d(n)));for(var s=c(t),h=c(n),m=0;m<a.length;++m){var g=a[m];if(!(i[g]||r&&r[g]||h&&h[g]||s&&s[g])){var y=f(n,g);try{u(t,g,y)}catch(e){}}}}return t}},1296:(e,t,n)=>{var r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,l=c||u||Function("return this")(),d=Object.prototype.toString,f=Math.max,p=Math.min,v=function(){return l.Date.now()};function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(h(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=h(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=i.test(e);return n||a.test(e)?s(e.slice(2),n?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,n){var r,o,i,a,s,c,u=0,l=!1,d=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,i=o;return r=o=void 0,u=t,a=e.apply(i,n)}function b(e){return u=e,s=setTimeout(_,t),l?y(e):a}function w(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=i}function _(){var e=v();if(w(e))return S(e);s=setTimeout(_,function(e){var n=t-(e-c);return d?p(n,i-(e-u)):n}(e))}function S(e){return s=void 0,g&&r?y(e):(r=o=void 0,a)}function E(){var e=v(),n=w(e);if(r=arguments,o=this,c=e,n){if(void 0===s)return b(c);if(d)return s=setTimeout(_,t),y(c)}return void 0===s&&(s=setTimeout(_,t)),a}return t=m(t)||0,h(n)&&(l=!!n.leading,i=(d="maxWait"in n)?f(m(n.maxWait)||0,t):i,g="trailing"in n?!!n.trailing:g),E.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=o=s=void 0},E.flush=function(){return void 0===s?a:S(v())},E}},5776:(e,t,n)=>{"use strict";n.d(t,{hu:()=>Ce,HY:()=>g,Tm:()=>ze,kr:()=>V,az:()=>v,jz:()=>Le,Vf:()=>m,ZP:()=>Je,Gp:()=>Se,l$:()=>qe,X$:()=>be,mm:()=>Ye,I4:()=>se,qp:()=>ce,Qb:()=>ue,d4:()=>ne,aP:()=>ie,bt:()=>re,Ye:()=>ae,_Y:()=>te,sO:()=>oe,eJ:()=>ee});var r,o,i,a,s,c,u={},l=[],d=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function f(e,t){for(var n in t)e[n]=t[n];return e}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function v(e,t,n){var o,i,a,s={};for(a in t)"key"==a?o=t[a]:"ref"==a?i=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===s[a]&&(s[a]=e.defaultProps[a]);return h(e,s,o,i,null)}function h(e,t,n,r,a){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==a?++i:a};return null==a&&null!=o.vnode&&o.vnode(s),s}function m(){return{current:null}}function g(e){return e.children}function y(e,t){this.props=e,this.context=t}function b(e,t){if(null==t)return e.__?b(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?b(e):null}function w(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return w(e)}}function _(e){(!e.__d&&(e.__d=!0)&&a.push(e)&&!S.__r++||s!==o.debounceRendering)&&((s=o.debounceRendering)||setTimeout)(S)}function S(){for(var e;S.__r=a.length;)e=a.sort((function(e,t){return e.__v.__b-t.__v.__b})),a=[],e.some((function(e){var t,n,r,o,i,a;e.__d&&(i=(o=(t=e).__v).__e,(a=t.__P)&&(n=[],(r=f({},o)).__v=o.__v+1,D(a,o,r,t.__n,void 0!==a.ownerSVGElement,null!=o.__h?[i]:null,n,null==i?b(o):i,o.__h),R(n,o),o.__e!=i&&w(o)))}))}function E(e,t,n,r,o,i,a,s,c,d){var f,p,v,m,y,w,_,S=r&&r.__k||l,E=S.length;for(n.__k=[],f=0;f<t.length;f++)if(null!=(m=n.__k[f]=null==(m=t[f])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m||"bigint"==typeof m?h(null,m,null,null,m):Array.isArray(m)?h(g,{children:m},null,null,null):m.__b>0?h(m.type,m.props,m.key,null,m.__v):m)){if(m.__=n,m.__b=n.__b+1,null===(v=S[f])||v&&m.key==v.key&&m.type===v.type)S[f]=void 0;else for(p=0;p<E;p++){if((v=S[p])&&m.key==v.key&&m.type===v.type){S[p]=void 0;break}v=null}D(e,m,v=v||u,o,i,a,s,c,d),y=m.__e,(p=m.ref)&&v.ref!=p&&(_||(_=[]),v.ref&&_.push(v.ref,null,m),_.push(p,m.__c||y,m)),null!=y?(null==w&&(w=y),"function"==typeof m.type&&m.__k===v.__k?m.__d=c=C(m,c,e):c=I(e,m,v,S,y,c),"function"==typeof n.type&&(n.__d=c)):c&&v.__e==c&&c.parentNode!=e&&(c=b(v))}for(n.__e=w,f=E;f--;)null!=S[f]&&("function"==typeof n.type&&null!=S[f].__e&&S[f].__e==n.__d&&(n.__d=b(r,f+1)),M(S[f],S[f]));if(_)for(f=0;f<_.length;f++)P(_[f],_[++f],_[++f])}function C(e,t,n){for(var r,o=e.__k,i=0;o&&i<o.length;i++)(r=o[i])&&(r.__=e,t="function"==typeof r.type?C(r,t,n):I(n,r,r,o,r.__e,t));return t}function k(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){k(e,t)})):t.push(e)),t}function I(e,t,n,r,o,i){var a,s,c;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==n||o!=i||null==o.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(o),a=null;else{for(s=i,c=0;(s=s.nextSibling)&&c<r.length;c+=2)if(s==o)break e;e.insertBefore(o,i),a=i}return void 0!==a?a:o.nextSibling}function T(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||d.test(t)?n:n+"px"}function O(e,t,n,r,o){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||T(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||T(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r||e.addEventListener(t,i?A:x,i):e.removeEventListener(t,i?A:x,i);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function x(e){this.l[e.type+!1](o.event?o.event(e):e)}function A(e){this.l[e.type+!0](o.event?o.event(e):e)}function D(e,t,n,r,i,a,s,c,u){var l,d,p,v,h,m,b,w,_,S,C,k,I,T=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(u=n.__h,c=t.__e=n.__e,t.__h=null,a=[c]),(l=o.__b)&&l(t);try{e:if("function"==typeof T){if(w=t.props,_=(l=T.contextType)&&r[l.__c],S=l?_?_.props.value:l.__:r,n.__c?b=(d=t.__c=n.__c).__=d.__E:("prototype"in T&&T.prototype.render?t.__c=d=new T(w,S):(t.__c=d=new y(w,S),d.constructor=T,d.render=N),_&&_.sub(d),d.props=w,d.state||(d.state={}),d.context=S,d.__n=r,p=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=T.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=f({},d.__s)),f(d.__s,T.getDerivedStateFromProps(w,d.__s))),v=d.props,h=d.state,p)null==T.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==T.getDerivedStateFromProps&&w!==v&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(w,S),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(w,d.__s,S)||t.__v===n.__v){d.props=w,d.state=d.__s,t.__v!==n.__v&&(d.__d=!1),d.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(w,d.__s,S),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(v,h,m)}))}if(d.context=S,d.props=w,d.__v=t,d.__P=e,C=o.__r,k=0,"prototype"in T&&T.prototype.render)d.state=d.__s,d.__d=!1,C&&C(t),l=d.render(d.props,d.state,d.context);else do{d.__d=!1,C&&C(t),l=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++k<25);d.state=d.__s,null!=d.getChildContext&&(r=f(f({},r),d.getChildContext())),p||null==d.getSnapshotBeforeUpdate||(m=d.getSnapshotBeforeUpdate(v,h)),I=null!=l&&l.type===g&&null==l.key?l.props.children:l,E(e,Array.isArray(I)?I:[I],t,n,r,i,a,s,c,u),d.base=t.__e,t.__h=null,d.__h.length&&s.push(d),b&&(d.__E=d.__=null),d.__e=!1}else null==a&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=L(n.__e,t,n,r,i,a,s,u);(l=o.diffed)&&l(t)}catch(e){t.__v=null,(u||null!=a)&&(t.__e=c,t.__h=!!u,a[a.indexOf(c)]=null),o.__e(e,t,n)}}function R(e,t){o.__c&&o.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){o.__e(e,t.__v)}}))}function L(e,t,n,o,i,a,s,c){var l,d,f,v=n.props,h=t.props,m=t.type,g=0;if("svg"===m&&(i=!0),null!=a)for(;g<a.length;g++)if((l=a[g])&&"setAttribute"in l==!!m&&(m?l.localName===m:3===l.nodeType)){e=l,a[g]=null;break}if(null==e){if(null===m)return document.createTextNode(h);e=i?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,h.is&&h),a=null,c=!1}if(null===m)v===h||c&&e.data===h||(e.data=h);else{if(a=a&&r.call(e.childNodes),d=(v=n.props||u).dangerouslySetInnerHTML,f=h.dangerouslySetInnerHTML,!c){if(null!=a)for(v={},g=0;g<e.attributes.length;g++)v[e.attributes[g].name]=e.attributes[g].value;(f||d)&&(f&&(d&&f.__html==d.__html||f.__html===e.innerHTML)||(e.innerHTML=f&&f.__html||""))}if(function(e,t,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in t||O(e,i,null,n[i],r);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||O(e,i,t[i],n[i],r)}(e,h,v,i,c),f)t.__k=[];else if(g=t.props.children,E(e,Array.isArray(g)?g:[g],t,n,o,i&&"foreignObject"!==m,a,s,a?a[0]:n.__k&&b(n,0),c),null!=a)for(g=a.length;g--;)null!=a[g]&&p(a[g]);c||("value"in h&&void 0!==(g=h.value)&&(g!==e.value||"progress"===m&&!g||"option"===m&&g!==v.value)&&O(e,"value",g,v.value,!1),"checked"in h&&void 0!==(g=h.checked)&&g!==e.checked&&O(e,"checked",g,v.checked,!1))}return e}function P(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){o.__e(e,n)}}function M(e,t,n){var r,i;if(o.unmount&&o.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||P(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){o.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&M(r[i],t,"function"!=typeof e.type);n||null==e.__e||p(e.__e),e.__e=e.__d=void 0}function N(e,t,n){return this.constructor(e,n)}function j(e,t,n){var i,a,s;o.__&&o.__(e,t),a=(i="function"==typeof n)?null:n&&n.__k||t.__k,s=[],D(t,e=(!i&&n||t).__k=v(g,null,[e]),a||u,u,void 0!==t.ownerSVGElement,!i&&n?[n]:a?null:t.firstChild?r.call(t.childNodes):null,s,!i&&n?n:a?a.__e:t.firstChild,i),R(s,e)}function W(e,t){j(e,t,W)}function U(e,t,n){var o,i,a,s=f({},e.props);for(a in t)"key"==a?o=t[a]:"ref"==a?i=t[a]:s[a]=t[a];return arguments.length>2&&(s.children=arguments.length>3?r.call(arguments,2):n),h(e.type,s,o||e.key,i||e.ref,null)}function V(e,t){var n={__c:t="__cC"+c++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(_)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}r=l.slice,o={__e:function(e,t,n,r){for(var o,i,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),a=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),a=o.__d),a)return o.__E=o}catch(t){e=t}throw e}},i=0,y.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=f({},this.state),"function"==typeof e&&(e=e(f({},n),this.props)),e&&f(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),_(this))},y.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),_(this))},y.prototype.render=g,a=[],S.__r=0,c=0;var F,B,Z,H,G=0,K=[],q=[],z=o.__b,Y=o.__r,X=o.diffed,J=o.__c,$=o.unmount;function Q(e,t){o.__h&&o.__h(B,e,G||t),G=0;var n=B.__H||(B.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:q}),n.__[e]}function ee(e){return G=1,te(he,e)}function te(e,t,n){var r=Q(F++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):he(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=B,!B.u)){B.u=!0;var o=B.shouldComponentUpdate;B.shouldComponentUpdate=function(e,t,n){if(!r.__c.__H)return!0;var i=r.__c.__H.__.filter((function(e){return e.__c}));if(i.every((function(e){return!e.__N})))return!o||o.call(this,e,t,n);var a=!1;return i.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(a=!0)}})),!!a&&(!o||o.call(this,e,t,n))}}return r.__N||r.__}function ne(e,t){var n=Q(F++,3);!o.__s&&ve(n.__H,t)&&(n.__=e,n.i=t,B.__H.__h.push(n))}function re(e,t){var n=Q(F++,4);!o.__s&&ve(n.__H,t)&&(n.__=e,n.i=t,B.__h.push(n))}function oe(e){return G=5,ae((function(){return{current:e}}),[])}function ie(e,t,n){G=6,re((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))}function ae(e,t){var n=Q(F++,7);return ve(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function se(e,t){return G=8,ae((function(){return e}),t)}function ce(e){var t=B.context[e.__c],n=Q(F++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(B)),t.props.value):e.__}function ue(e,t){o.useDebugValue&&o.useDebugValue(t?t(e):e)}function le(){for(var e;e=K.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(fe),e.__H.__h.forEach(pe),e.__H.__h=[]}catch(t){e.__H.__h=[],o.__e(t,e.__v)}}o.__b=function(e){B=null,z&&z(e)},o.__r=function(e){Y&&Y(e),F=0;var t=(B=e.__c).__H;t&&(Z===B?(t.__h=[],B.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=q,e.__N=e.i=void 0}))):(t.__h.forEach(fe),t.__h.forEach(pe),t.__h=[])),Z=B},o.diffed=function(e){X&&X(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==K.push(t)&&H===o.requestAnimationFrame||((H=o.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),de&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);de&&(t=requestAnimationFrame(n))})(le)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==q&&(e.__=e.__V),e.i=void 0,e.__V=q}))),Z=B=null},o.__c=function(e,t){t.some((function(e){try{e.__h.forEach(fe),e.__h=e.__h.filter((function(e){return!e.__||pe(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],o.__e(n,e.__v)}})),J&&J(e,t)},o.unmount=function(e){$&&$(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{fe(e)}catch(e){t=e}})),t&&o.__e(t,n.__v))};var de="function"==typeof requestAnimationFrame;function fe(e){var t=B,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),B=t}function pe(e){var t=B;e.__c=e.__(),B=t}function ve(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function he(e,t){return"function"==typeof t?t(e):t}function me(e,t){for(var n in t)e[n]=t[n];return e}function ge(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function ye(e){this.props=e}function be(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:ge(this.props,e)}function r(t){return this.shouldComponentUpdate=n,v(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(ye.prototype=new y).isPureReactComponent=!0,ye.prototype.shouldComponentUpdate=function(e,t){return ge(this.props,e)||ge(this.state,t)};var we=o.__b;o.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),we&&we(e)};var _e="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Se(e){function t(t){var n=me({},t);return delete n.ref,e(n,t.ref||null)}return t.$$typeof=_e,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Ee=function(e,t){return null==e?null:k(k(e).map(t))},Ce={map:Ee,forEach:Ee,count:function(e){return e?k(e).length:0},only:function(e){var t=k(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:k},ke=o.__e;o.__e=function(e,t,n,r){if(e.then)for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),o.__c(e,t);ke(e,t,n,r)};var Ie=o.unmount;function Te(){this.__u=0,this.t=null,this.__b=null}function Oe(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function xe(){this.u=null,this.o=null}o.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),Ie&&Ie(e)},(Te.prototype=new y).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var o=Oe(r.__v),i=!1,a=function(){i||(i=!0,n.__R=null,o?o(s):s())};n.__R=a;var s=function(){if(!--r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)})),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.t.pop();)t.forceUpdate()}},c=!0===t.__h;r.__u++||c||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(a,a)},Te.prototype.componentWillUnmount=function(){this.t=[]},Te.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),t.__c.__H=null),null!=(t=me({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)}))),t}(this.__b,n,r.__O=r.__P)}this.__b=null}var o=t.__a&&v(g,null,e.fallback);return o&&(o.__h=null),[v(g,null,t.__a?null:e.children),o]};var Ae=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function De(e){return this.getChildContext=function(){return e.context},e.children}function Re(e){var t=this,n=e.i;t.componentWillUnmount=function(){j(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),j(v(De,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function Le(e,t){var n=v(Re,{__v:e,i:t});return n.containerInfo=t,n}(xe.prototype=new y).__a=function(e){var t=this,n=Oe(t.__v),r=t.o.get(e);return r[0]++,function(o){var i=function(){t.props.revealOrder?(r.push(o),Ae(t,e,r)):o()};n?n(i):i()}},xe.prototype.render=function(e){this.u=null,this.o=new Map;var t=k(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},xe.prototype.componentDidUpdate=xe.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){Ae(e,n,t)}))};var Pe="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Me=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ne="undefined"!=typeof document,je=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e)};y.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(y.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var We=o.event;function Ue(){}function Ve(){return this.cancelBubble}function Fe(){return this.defaultPrevented}o.event=function(e){return We&&(e=We(e)),e.persist=Ue,e.isPropagationStopped=Ve,e.isDefaultPrevented=Fe,e.nativeEvent=e};var Be,Ze={configurable:!0,get:function(){return this.class}},He=o.vnode;o.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){var o=-1===t.indexOf("-");for(var i in r={},n){var a=n[i];Ne&&"children"===i&&"noscript"===t||"value"===i&&"defaultValue"in n&&null==a||("defaultValue"===i&&"value"in n&&null==n.value?i="value":"download"===i&&!0===a?a="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!je(n.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():o&&Me.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===a&&(a=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),r[i]&&(i="oninputCapture")),r[i]=a)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=k(n.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==t&&null!=r.defaultValue&&(r.value=k(n.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),e.props=r,n.class!=n.className&&(Ze.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",Ze))}e.$$typeof=Pe,He&&He(e)};var Ge=o.__r;o.__r=function(e){Ge&&Ge(e),Be=e.__c};var Ke={ReactCurrentDispatcher:{current:{readContext:function(e){return Be.__n[e.__c].props.value}}}};function qe(e){return!!e&&e.$$typeof===Pe}function ze(e){return qe(e)?U.apply(null,arguments):e}var Ye=function(e,t){return e(t)};function Xe(e){e()}const Je={useState:ee,useReducer:te,useEffect:ne,useLayoutEffect:re,useInsertionEffect:re,useTransition:function(){return[!1,Xe]},useDeferredValue:function(e){return e},useSyncExternalStore:function(e,t){var n=t(),r=ee({s:{__:n,h:t}}),o=r[0].s,i=r[1];return re((function(){o.__=n,o.h=t,o.__!==t()&&i({s:o})}),[e,n,t]),ne((function(){return o.__!==o.h()&&i({s:o}),e((function(){o.__!==o.h()&&i({s:o})}))}),[e]),n},startTransition:Xe,useRef:oe,useImperativeHandle:ie,useMemo:ae,useCallback:se,useContext:ce,useDebugValue:ue,version:"17.0.2",Children:Ce,render:function(e,t,n){return null==t.__k&&(t.textContent=""),j(e,t),"function"==typeof n&&n(),e?e.__c:null},hydrate:function(e,t,n){return W(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(j(null,e),!0)},createPortal:Le,createElement:v,createContext:V,createFactory:function(e){return v.bind(null,e)},cloneElement:ze,createRef:m,Fragment:g,isValidElement:qe,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:y,PureComponent:ye,memo:be,forwardRef:Se,flushSync:function(e,t){return e(t)},unstable_batchedUpdates:Ye,StrictMode:g,Suspense:Te,SuspenseList:xe,lazy:function(e){var t,n,r;function o(o){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){r=e})),r)throw r;if(!n)throw t;return v(n,o)}return o.displayName="Lazy",o.__f=!0,o},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Ke}},2703:(e,t,n)=>{"use strict";var r=n(414);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9921:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,v=n?Symbol.for("react.suspense_list"):60120,h=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case i:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case u:case f:case m:case h:case c:return e;default:return t}}case o:return t}}}function S(e){return _(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=f,t.Fragment=i,t.Lazy=m,t.Memo=h,t.Portal=o,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||_(e)===l},t.isConcurrentMode=S,t.isContextConsumer=function(e){return _(e)===u},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===f},t.isFragment=function(e){return _(e)===i},t.isLazy=function(e){return _(e)===m},t.isMemo=function(e){return _(e)===h},t.isPortal=function(e){return _(e)===o},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===a},t.isSuspense=function(e){return _(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===s||e===a||e===p||e===v||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===h||e.$$typeof===c||e.$$typeof===u||e.$$typeof===f||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===g)},t.typeOf=_},9864:(e,t,n)=>{"use strict";e.exports=n(9921)},8429:(e,t,n)=>{"use strict";n.d(t,{zt:()=>u,I0:()=>h,v9:()=>b,oR:()=>p});var r=n(5776),o=(n(5697),r.ZP.createContext(null)),i=function(e){e()},a=function(){return i},s={notify:function(){}},c=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=s,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=function(){var e=a(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=s)},e}();const u=function(e){var t=e.store,n=e.context,i=e.children,a=(0,r.Ye)((function(){var e=new c(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),s=(0,r.Ye)((function(){return t.getState()}),[t]);(0,r.d4)((function(){var e=a.subscription;return e.trySubscribe(),s!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,s]);var u=n||o;return r.ZP.createElement(u.Provider,{value:a},i)};n(8679),n(9864);var l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.bt:r.d4;function d(){return(0,r.qp)(o)}function f(e){void 0===e&&(e=o);var t=e===o?d:function(){return(0,r.qp)(e)};return function(){return t().store}}n(4890);var p=f();function v(e){void 0===e&&(e=o);var t=e===o?p:f(e);return function(){return t().dispatch}}var h=v(),m=function(e,t){return e===t};function g(e){void 0===e&&(e=o);var t=e===o?d:function(){return(0,r.qp)(e)};return function(e,n){void 0===n&&(n=m);var o=t(),i=function(e,t,n,o){var i,a=(0,r._Y)((function(e){return e+1}),0)[1],s=(0,r.Ye)((function(){return new c(n,o)}),[n,o]),u=(0,r.sO)(),d=(0,r.sO)(),f=(0,r.sO)(),p=(0,r.sO)(),v=n.getState();try{i=e!==d.current||v!==f.current||u.current?e(v):p.current}catch(e){throw u.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),e}return l((function(){d.current=e,f.current=v,p.current=i,u.current=void 0})),l((function(){function e(){try{var e=d.current(n.getState());if(t(e,p.current))return;p.current=e}catch(e){u.current=e}a()}return s.onStateChange=e,s.trySubscribe(),e(),function(){return s.tryUnsubscribe()}}),[n,s]),i}(e,n,o.store,o.subscription);return(0,r.Qb)(i),i}}var y,b=g();y=r.mm,i=y},4890:(e,t,n)=>{"use strict";n.d(t,{DE:()=>d,MT:()=>s,UY:()=>u,md:()=>m,qC:()=>h});var r=n(7121),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},i={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function a(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function s(e,t,n){var o;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(s)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var c=e,u=t,l=[],d=l,f=!1;function p(){d===l&&(d=l.slice())}function v(){if(f)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return u}function h(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(f)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return p(),d.push(e),function(){if(t){if(f)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,p();var n=d.indexOf(e);d.splice(n,1),l=null}}}function m(e){if(!a(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,u=c(u,e)}finally{f=!1}for(var t=l=d,n=0;n<t.length;n++)(0,t[n])();return e}function g(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");c=e,m({type:i.REPLACE})}function y(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(v())}return n(),{unsubscribe:t(n)}}})[r.Z]=function(){return this},e}return m({type:i.INIT}),(o={dispatch:m,subscribe:h,getState:v,replaceReducer:g})[r.Z]=y,o}function c(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function u(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];"function"==typeof e[o]&&(n[o]=e[o])}var a,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:i.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:i.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+i.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,o={},i=0;i<s.length;i++){var u=s[i],l=n[u],d=e[u],f=l(d,t);if(void 0===f){var p=c(u,t);throw new Error(p)}o[u]=f,r=r||f!==d}return(r=r||s.length!==Object.keys(e).length)?o:e}}function l(e,t){return function(){return t(e.apply(this,arguments))}}function d(e,t){if("function"==typeof e)return l(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=l(o,t))}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return v({},n,{dispatch:r=h.apply(void 0,i)(n.dispatch)})}}}},2222:(e,t,n)=>{"use strict";function r(e,t){return e===t}function o(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e(t[o],n[o]))return!1;return!0}function i(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}n.d(t,{P1:()=>a});var a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var a=0,s=r.pop(),c=i(r),u=e.apply(void 0,[function(){return a++,s.apply(null,arguments)}].concat(n)),l=e((function(){for(var e=[],t=c.length,n=0;n<t;n++)e.push(c[n].apply(null,arguments));return u.apply(null,e)}));return l.resultFunc=s,l.dependencies=c,l.recomputations=function(){return a},l.resetRecomputations=function(){return a=0},l}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,i=null;return function(){return o(t,n,arguments)||(i=e.apply(null,arguments)),n=arguments,i}}))},7121:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r}),e=n.hmd(e);const r=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:e)},7838:(e,t,n)=>{"use strict";e.exports=n.p+"assets/sprite.24f0e869..svg"},7061:(e,t,n)=>{var r=n(8698).default;function o(){"use strict";e.exports=o=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),s=new O(r||[]);return a(i,"_invoke",{value:C(e,n,s)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var v={};function h(){}function m(){}function g(){}var y={};d(y,c,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(x([])));w&&w!==n&&i.call(w,c)&&(y=w);var _=g.prototype=h.prototype=Object.create(y);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(o,a,s,c){var u=p(e[o],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==r(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}})}function C(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=p(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function k(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=p(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,v;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function x(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return m.prototype=g,a(_,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:m,configurable:!0}),m.displayName=d(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,d(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(E.prototype),d(E.prototype,u,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new E(f(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),d(_,l,"Generator"),d(_,c,(function(){return this})),d(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),v}},t}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},8698:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4687:(e,t,n)=>{var r=n(7061)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},907:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},7326:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:()=>r})},5861:(e,t,n)=>{"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}n.d(t,{Z:()=>o})},5671:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:()=>r})},3144:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(9142);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(0,r.Z)(o.key),o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},4942:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9142);function o(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1120:(e,t,n)=>{"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:()=>r})},136:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9611);function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},2963:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(1002),o=n(7326);function i(e,t){if(t&&("object"===(0,r.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(e)}},9611:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:()=>r})},885:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(181);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(907),o=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(1002);function o(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t);if("object"!==(0,r.Z)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:()=>r})},181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(907);function o(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},2407:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(1120),o=n(9611);function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function a(e,t,n){return a=i()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&(0,o.Z)(i,n.prototype),i},a.apply(null,arguments)}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return a(e,arguments,(0,r.Z)(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),(0,o.Z)(i,e)},s(e)}}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return a[e].call(n.exports,n,n.exports,c),n.loaded=!0,n.exports}c.m=a,c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);c.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,c.d(o,i),o},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,n)=>(c.f[n](e,t),t)),[])),c.u=e=>({49:"ChatEmojisPicker",143:"app",347:"@stardazed/streams-compression",619:"TwilioVideo",709:"ChatEmojiData",830:"web-streams-polyfill"}[e]+".4e9c45dc9d9db07e2b9d7b3877c9fcce8f1bd667.js"),c.miniCssF=e=>"app.4e9c45dc9d9db07e2b9d7b3877c9fcce8f1bd667.css",c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="servicebell-widget:",c.l=(e,t,o,i)=>{if(n[e])n[e].push(t);else{var a,s;if(void 0!==o)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+o){a=d;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,c.nc&&a.setAttribute("nonce",c.nc),a.setAttribute("data-webpack",r+o),a.src=e),n[e]=[t];var f=(t,r)=>{a.onerror=a.onload=null,clearTimeout(p);var o=n[e];if(delete n[e],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(r))),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),s&&document.head.appendChild(a)}},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),c.p="https://cdn.servicebell.com/",o=e=>new Promise(((t,n)=>{var r=c.miniCssF(e),o=c.p+r;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var o=(a=n[r]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){var a;if((o=(a=i[r]).getAttribute("data-href"))===e||o===t)return a}})(r,o))return t();((e,t,n,r)=>{var o=document.createElement("link");o.setAttribute("id","svb-styles"),o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=i=>{if(o.onerror=o.onload=null,"load"===i.type)n();else{var a=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=s,o.parentNode.removeChild(o),r(c)}},o.href=t,document.head.appendChild(o)})(e,o,t,n)})),i={179:0},c.f.miniCss=(e,t)=>{i[e]?t.push(i[e]):0!==i[e]&&{143:1}[e]&&t.push(i[e]=o(e).then((()=>{i[e]=0}),(t=>{throw delete i[e],t})))},(()=>{var e={179:0};c.f.j=(t,n)=>{var r=c.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=e[t]=[n,o]));n.push(r[2]=o);var i=c.p+c.u(t),a=new Error;c.l(i,(n=>{if(c.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,r[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,o,[i,a,s]=n,u=0;if(i.some((t=>0!==e[t]))){for(r in a)c.o(a,r)&&(c.m[r]=a[r]);s&&s(c)}for(t&&t(n);u<i.length;u++)o=i[u],c.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkservicebell_widget=self.webpackChunkservicebell_widget||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e=c(2982),t=c(885),n=c(7937),r=c(5861),o=c(4687),i=c.n(o),a=c(6403),s=c(9046),u=c(6242),l=c(7220),d=c(2611),f=c(2795),p=c(7109);function v(){window.addEventListener("message",(function(e){var t;if("hsFormCallback"===(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)&&"onFormSubmit"===e.data.eventName){var n={email:""},r=e.data.data.reduce((function(e,t){return e[t.name]=t.value,e}),{});r.email&&(n.email=r.email),(r.firstname||r.lastname)&&(n.displayName="".concat(r.firstname," ").concat(r.lastname).trim()),""!==n.email&&U.identify(void 0,n)}}))}var h=c(32);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g="__sb_last_location__",y="startCall";function b(){return null!==new URLSearchParams(window.location.search.toLowerCase()).get(y.toLowerCase())}function w(){var e,t=new URL(window.location.href),n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(t.searchParams.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value;r.toLowerCase()==y.toLowerCase()&&t.searchParams.delete(r)}}catch(e){n.e(e)}finally{n.f()}history.replaceState(history.state,document.title,t.toString())}function _(){if(!b())return!1;var e=function(){var e=localStorage.getItem(g);if(e){try{var t=JSON.parse(e);if(t.location&&t.timestamp&&t.timestamp>Date.now()-9e5)return t.location;h.Z.debug("Location data was either expired or missing data, deleting key and ignoring.")}catch(e){h.Z.warn("Failed to parse last location local storage JSON, deleting key and ignoring")}localStorage.removeItem(g)}}();if(!e)return!1;var t=function(e){var t=new URL(e);return t.searchParams.delete(y),t.pathname+t.search};if(t(e)!==t(window.location.href)){var n=new URL(e);return n.searchParams.set(y,""),h.Z.info("Redirecting to last url ".concat(n.toString()," due to call query param")),window.location.replace(n.toString()),!0}return!1}var S=c(5713),E=c(5164),C=c(8477),k=c(7887),I=c(7736),T=(0,f.U)("src/index");T.debug("Running ServiceBell widget from commit ".concat((0,n.i)(),", protocol version ").concat((0,n.J)()));var O,x=!1,A=(0,s.yL)()&&window.top.ServiceBell;function D(){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b()){e.next=5;break}return T.info("Starting call from query parameter"),w(),e.next=5,P();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return L=(0,r.Z)(i().mark((function e(t){var n,r,o,a,f,p,h=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:{},e.prev=1,n||(n={}),!O){e.next=6;break}return T.warn("ServiceBell initialize called twice, ignoring subsequent calls"),e.abrupt("return");case 6:if(O=t,(r="demo"===t)&&l.ZP.dispatch((0,I.rn)(!0)),o=(0,u.getBadBrowserReason)(),r||!o){e.next=16;break}return x=!0,a="ServiceBell didn't load because ".concat(o),T.info(a),(0,S.sA)(new S.lg(a)),e.abrupt("return");case 16:if(!_()){e.next=18;break}return e.abrupt("return");case 18:if((f=window).ServiceBell&&(f.ServiceBell.__clientKey=t),l.ZP.dispatch((0,d.Ov)(n)),!(0,s.yL)()){e.next=34;break}return T.debug("[iframe] Fetching init data to determine if retrigger mode"),e.next=25,l.ZP.dispatch((0,E.XC)({clientKey:t}));case 25:if(null==(p=(0,k.aE)(l.ZP.getState()))?void 0:p.includes("iframe")){e.next=30;break}return T.warn('[iframe] In iframe but mode is "'.concat(p,'", loading iframe URL in top window')),window.top&&(window.top.location=window.location),e.abrupt("return");case 30:return T.debug("[iframe] Injecting rrweb record fn"),(0,C._Y)(),D(),e.abrupt("return");case 34:return D(),e.next=37,c.e(143).then(c.bind(c,7330));case 37:(0,e.sent.mount)(t),v(),e.next=47;break;case 43:throw e.prev=43,e.t0=e.catch(1),(0,S.sA)(e.t0),e.t0;case 47:case"end":return e.stop()}}),e,null,[[1,43]])}))),L.apply(this,arguments)}function P(e){return M.apply(this,arguments)}function M(){return(M=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.ZP.dispatch((0,E.m7)(p.r4.DIAL)),!x){e.next=3;break}return e.abrupt("return",!1);case 3:if(!A){e.next=7;break}return e.next=6,A.dial(t);case 6:return e.abrupt("return",e.sent);case 7:return N(),e.t0=a.SI,e.next=11,l.ZP.dispatch((0,d.FN)(t));case 11:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){x||(A?A.expand():(l.ZP.dispatch((0,d.ld)()),l.ZP.dispatch((0,d.Ov)({expanded:!0}))))}function j(){return(j=(0,r.Z)(i().mark((function e(t){var n,r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.journeyId){e.next=3;break}return console.warn("ServiceBell.startJourney requires a journeyId"),e.abrupt("return",!1);case 3:if(!x){e.next=5;break}return e.abrupt("return",!1);case 5:if(!A){e.next=8;break}return A.startJourney(t),e.abrupt("return",!1);case 8:if(T.debug("ServiceBell.startJourney(".concat(t.journeyId,") called")),n=null,r=new Promise((function(e){n=e})),o=t.journeyId,n){e.next=14;break}throw new Error("promiseResolver not set for ServiceBell.startJourney");case 14:return e.next=16,l.ZP.dispatch((0,E.Eq)({journeyId:o,promiseResolver:n}));case 16:return e.next=18,r;case 18:if(!(a=e.sent)){e.next=22;break}return T.warn("ServiceBell.startJourney failed: ".concat(a)),e.abrupt("return",!1);case 22:return e.abrupt("return",!0);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=function e(t){if(t in e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return e[t].apply(e,r)}var i="ServiceBell called with unknown command '".concat(t,"'");T.warn(i),console.log(i)};W.init=function(e){return L.apply(this,arguments)},W.identify=function(e,t,n){x||(A?A.identify(e,t,n):l.ZP.dispatch((0,E.Ax)({customId:e,customMetadata:t,secureIdentityHash:n})))},W.dial=P,W.alert=function(e){if(l.ZP.dispatch((0,E.m7)(p.r4.ALERT)),!x)if(A)A.alert(e);else if(l.ZP.getState().app.isStreamEvents)T.info("Ignoring api call to alert during active session",e);else{var t="string"==typeof e?{title:e}:e;l.ZP.dispatch((0,E.Kq)(t))}},W.bookMeeting=function(){x||(A?A.bookMeeting():l.ZP.dispatch((0,d.jD)(p.Hf.BOOK_MEETING)))},W.hide=function(){x||(A?A.hide():l.ZP.dispatch((0,d.Ov)({hidden:!0})))},W.show=function(){x||(A?A.show():l.ZP.dispatch((0,d.Ov)({hidden:!1})))},W.expand=N,W.collapse=function(){x||(A?A.collapse():(l.ZP.dispatch((0,d.cp)()),l.ZP.dispatch((0,d.Ov)({expanded:!1}))))},W.connect=function(){x||(A?A.connect():(T.debug("ServiceBell.connect() called"),l.ZP.dispatch((0,E.Ie)())))},W.disconnect=function(){x||(A?A.disconnect():(T.debug("ServiceBell.disconnect() called"),l.ZP.dispatch((0,E.yn)())))},W.startJourney=function(e){return j.apply(this,arguments)},W.__clientKey=void 0;const U=W;!function(r){var o=r.ServiceBell;o&&o.q&&o.q.forEach((function(n){var r=(0,t.Z)(n,2),o=r[0],i=r[1];U.apply(void 0,[o].concat((0,e.Z)(i)))})),r.ServiceBell=U,r.ServiceBell.__commit=(0,n.i)()}(window)})()})();